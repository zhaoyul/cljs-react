{
"version":3,
"file":"module$node_modules$$firebase$storage$dist$index_cjs.js",
"lineCount":105,
"mappings":"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",
"sources":["node_modules/@firebase/storage/dist/index.cjs.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$firebase$storage$dist$index_cjs\"] = function(global,require,module,exports) {\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar firebase = _interopDefault(require('@firebase/app'));\nvar tslib = require('tslib');\nvar component = require('@firebase/component');\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Constants used in the Firebase Storage library.\r\n */\r\n/**\r\n * Domain name for firebase storage.\r\n */\r\nvar DEFAULT_HOST = 'firebasestorage.googleapis.com';\r\n/**\r\n * The key in Firebase config json for the storage bucket.\r\n */\r\nvar CONFIG_STORAGE_BUCKET_KEY = 'storageBucket';\r\n/**\r\n * 2 minutes\r\n *\r\n * The timeout for all operations except upload.\r\n */\r\nvar DEFAULT_MAX_OPERATION_RETRY_TIME = 2 * 60 * 1000;\r\n/**\r\n * 10 minutes\r\n *\r\n * The timeout for upload.\r\n */\r\nvar DEFAULT_MAX_UPLOAD_RETRY_TIME = 10 * 60 * 1000;\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar FirebaseStorageError = /** @class */ (function () {\r\n    function FirebaseStorageError(code, message) {\r\n        this.code_ = prependCode(code);\r\n        this.message_ = 'Firebase Storage: ' + message;\r\n        this.serverResponse_ = null;\r\n        this.name_ = 'FirebaseError';\r\n    }\r\n    FirebaseStorageError.prototype.codeProp = function () {\r\n        return this.code;\r\n    };\r\n    FirebaseStorageError.prototype.codeEquals = function (code) {\r\n        return prependCode(code) === this.codeProp();\r\n    };\r\n    FirebaseStorageError.prototype.serverResponseProp = function () {\r\n        return this.serverResponse_;\r\n    };\r\n    FirebaseStorageError.prototype.setServerResponseProp = function (serverResponse) {\r\n        this.serverResponse_ = serverResponse;\r\n    };\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"name\", {\r\n        get: function () {\r\n            return this.name_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"code\", {\r\n        get: function () {\r\n            return this.code_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"message\", {\r\n        get: function () {\r\n            if (this.serverResponse_) {\r\n                return this.message_ + '\\n' + this.serverResponse_;\r\n            }\r\n            else {\r\n                return this.message_;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"serverResponse\", {\r\n        get: function () {\r\n            return this.serverResponse_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return FirebaseStorageError;\r\n}());\r\nvar Code = {\r\n    // Shared between all platforms\r\n    UNKNOWN: 'unknown',\r\n    OBJECT_NOT_FOUND: 'object-not-found',\r\n    BUCKET_NOT_FOUND: 'bucket-not-found',\r\n    PROJECT_NOT_FOUND: 'project-not-found',\r\n    QUOTA_EXCEEDED: 'quota-exceeded',\r\n    UNAUTHENTICATED: 'unauthenticated',\r\n    UNAUTHORIZED: 'unauthorized',\r\n    RETRY_LIMIT_EXCEEDED: 'retry-limit-exceeded',\r\n    INVALID_CHECKSUM: 'invalid-checksum',\r\n    CANCELED: 'canceled',\r\n    // JS specific\r\n    INVALID_EVENT_NAME: 'invalid-event-name',\r\n    INVALID_URL: 'invalid-url',\r\n    INVALID_DEFAULT_BUCKET: 'invalid-default-bucket',\r\n    NO_DEFAULT_BUCKET: 'no-default-bucket',\r\n    CANNOT_SLICE_BLOB: 'cannot-slice-blob',\r\n    SERVER_FILE_WRONG_SIZE: 'server-file-wrong-size',\r\n    NO_DOWNLOAD_URL: 'no-download-url',\r\n    INVALID_ARGUMENT: 'invalid-argument',\r\n    INVALID_ARGUMENT_COUNT: 'invalid-argument-count',\r\n    APP_DELETED: 'app-deleted',\r\n    INVALID_ROOT_OPERATION: 'invalid-root-operation',\r\n    INVALID_FORMAT: 'invalid-format',\r\n    INTERNAL_ERROR: 'internal-error'\r\n};\r\nfunction prependCode(code) {\r\n    return 'storage/' + code;\r\n}\r\nfunction unknown() {\r\n    var message = 'An unknown error occurred, please check the error payload for ' +\r\n        'server response.';\r\n    return new FirebaseStorageError(Code.UNKNOWN, message);\r\n}\r\nfunction objectNotFound(path) {\r\n    return new FirebaseStorageError(Code.OBJECT_NOT_FOUND, \"Object '\" + path + \"' does not exist.\");\r\n}\r\nfunction quotaExceeded(bucket) {\r\n    return new FirebaseStorageError(Code.QUOTA_EXCEEDED, \"Quota for bucket '\" +\r\n        bucket +\r\n        \"' exceeded, please view quota on \" +\r\n        'https://firebase.google.com/pricing/.');\r\n}\r\nfunction unauthenticated() {\r\n    var message = 'User is not authenticated, please authenticate using Firebase ' +\r\n        'Authentication and try again.';\r\n    return new FirebaseStorageError(Code.UNAUTHENTICATED, message);\r\n}\r\nfunction unauthorized(path) {\r\n    return new FirebaseStorageError(Code.UNAUTHORIZED, \"User does not have permission to access '\" + path + \"'.\");\r\n}\r\nfunction retryLimitExceeded() {\r\n    return new FirebaseStorageError(Code.RETRY_LIMIT_EXCEEDED, 'Max retry time for operation exceeded, please try again.');\r\n}\r\nfunction canceled() {\r\n    return new FirebaseStorageError(Code.CANCELED, 'User canceled the upload/download.');\r\n}\r\nfunction invalidUrl(url) {\r\n    return new FirebaseStorageError(Code.INVALID_URL, \"Invalid URL '\" + url + \"'.\");\r\n}\r\nfunction invalidDefaultBucket(bucket) {\r\n    return new FirebaseStorageError(Code.INVALID_DEFAULT_BUCKET, \"Invalid default bucket '\" + bucket + \"'.\");\r\n}\r\nfunction cannotSliceBlob() {\r\n    return new FirebaseStorageError(Code.CANNOT_SLICE_BLOB, 'Cannot slice blob for upload. Please retry the upload.');\r\n}\r\nfunction serverFileWrongSize() {\r\n    return new FirebaseStorageError(Code.SERVER_FILE_WRONG_SIZE, 'Server recorded incorrect upload file size, please retry the upload.');\r\n}\r\nfunction noDownloadURL() {\r\n    return new FirebaseStorageError(Code.NO_DOWNLOAD_URL, 'The given file does not have any download URLs.');\r\n}\r\nfunction invalidArgument(index, fnName, message) {\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT, 'Invalid argument in `' + fnName + '` at index ' + index + ': ' + message);\r\n}\r\nfunction invalidArgumentCount(argMin, argMax, fnName, real) {\r\n    var countPart;\r\n    var plural;\r\n    if (argMin === argMax) {\r\n        countPart = argMin;\r\n        plural = argMin === 1 ? 'argument' : 'arguments';\r\n    }\r\n    else {\r\n        countPart = 'between ' + argMin + ' and ' + argMax;\r\n        plural = 'arguments';\r\n    }\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT_COUNT, 'Invalid argument count in `' +\r\n        fnName +\r\n        '`: Expected ' +\r\n        countPart +\r\n        ' ' +\r\n        plural +\r\n        ', received ' +\r\n        real +\r\n        '.');\r\n}\r\nfunction appDeleted() {\r\n    return new FirebaseStorageError(Code.APP_DELETED, 'The Firebase app was deleted.');\r\n}\r\n/**\r\n * @param name The name of the operation that was invalid.\r\n */\r\nfunction invalidRootOperation(name) {\r\n    return new FirebaseStorageError(Code.INVALID_ROOT_OPERATION, \"The operation '\" +\r\n        name +\r\n        \"' cannot be performed on a root reference, create a non-root \" +\r\n        \"reference using child, such as .child('file.png').\");\r\n}\r\n/**\r\n * @param format The format that was not valid.\r\n * @param message A message describing the format violation.\r\n */\r\nfunction invalidFormat(format, message) {\r\n    return new FirebaseStorageError(Code.INVALID_FORMAT, \"String does not match format '\" + format + \"': \" + message);\r\n}\r\n/**\r\n * @param message A message describing the internal error.\r\n */\r\nfunction internalError(message) {\r\n    throw new FirebaseStorageError(Code.INTERNAL_ERROR, 'Internal error: ' + message);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar StringFormat = {\r\n    RAW: 'raw',\r\n    BASE64: 'base64',\r\n    BASE64URL: 'base64url',\r\n    DATA_URL: 'data_url'\r\n};\r\nfunction formatValidator(stringFormat) {\r\n    switch (stringFormat) {\r\n        case StringFormat.RAW:\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n        case StringFormat.DATA_URL:\r\n            return;\r\n        default:\r\n            throw ('Expected one of the event types: [' +\r\n                StringFormat.RAW +\r\n                ', ' +\r\n                StringFormat.BASE64 +\r\n                ', ' +\r\n                StringFormat.BASE64URL +\r\n                ', ' +\r\n                StringFormat.DATA_URL +\r\n                '].');\r\n    }\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar StringData = /** @class */ (function () {\r\n    function StringData(data, contentType) {\r\n        this.data = data;\r\n        this.contentType = contentType || null;\r\n    }\r\n    return StringData;\r\n}());\r\nfunction dataFromString(format, stringData) {\r\n    switch (format) {\r\n        case StringFormat.RAW:\r\n            return new StringData(utf8Bytes_(stringData));\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n            return new StringData(base64Bytes_(format, stringData));\r\n        case StringFormat.DATA_URL:\r\n            return new StringData(dataURLBytes_(stringData), dataURLContentType_(stringData));\r\n        // do nothing\r\n    }\r\n    // assert(false);\r\n    throw unknown();\r\n}\r\nfunction utf8Bytes_(value) {\r\n    var b = [];\r\n    for (var i = 0; i < value.length; i++) {\r\n        var c = value.charCodeAt(i);\r\n        if (c <= 127) {\r\n            b.push(c);\r\n        }\r\n        else {\r\n            if (c <= 2047) {\r\n                b.push(192 | (c >> 6), 128 | (c & 63));\r\n            }\r\n            else {\r\n                if ((c & 64512) === 55296) {\r\n                    // The start of a surrogate pair.\r\n                    var valid = i < value.length - 1 && (value.charCodeAt(i + 1) & 64512) === 56320;\r\n                    if (!valid) {\r\n                        // The second surrogate wasn't there.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        var hi = c;\r\n                        var lo = value.charCodeAt(++i);\r\n                        c = 65536 | ((hi & 1023) << 10) | (lo & 1023);\r\n                        b.push(240 | (c >> 18), 128 | ((c >> 12) & 63), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n                else {\r\n                    if ((c & 64512) === 56320) {\r\n                        // Invalid low surrogate.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return new Uint8Array(b);\r\n}\r\nfunction percentEncodedBytes_(value) {\r\n    var decoded;\r\n    try {\r\n        decoded = decodeURIComponent(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(StringFormat.DATA_URL, 'Malformed data URL.');\r\n    }\r\n    return utf8Bytes_(decoded);\r\n}\r\nfunction base64Bytes_(format, value) {\r\n    switch (format) {\r\n        case StringFormat.BASE64: {\r\n            var hasMinus = value.indexOf('-') !== -1;\r\n            var hasUnder = value.indexOf('_') !== -1;\r\n            if (hasMinus || hasUnder) {\r\n                var invalidChar = hasMinus ? '-' : '_';\r\n                throw invalidFormat(format, \"Invalid character '\" +\r\n                    invalidChar +\r\n                    \"' found: is it base64url encoded?\");\r\n            }\r\n            break;\r\n        }\r\n        case StringFormat.BASE64URL: {\r\n            var hasPlus = value.indexOf('+') !== -1;\r\n            var hasSlash = value.indexOf('/') !== -1;\r\n            if (hasPlus || hasSlash) {\r\n                var invalidChar = hasPlus ? '+' : '/';\r\n                throw invalidFormat(format, \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\");\r\n            }\r\n            value = value.replace(/-/g, '+').replace(/_/g, '/');\r\n            break;\r\n        }\r\n        // do nothing\r\n    }\r\n    var bytes;\r\n    try {\r\n        bytes = atob(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(format, 'Invalid character found');\r\n    }\r\n    var array = new Uint8Array(bytes.length);\r\n    for (var i = 0; i < bytes.length; i++) {\r\n        array[i] = bytes.charCodeAt(i);\r\n    }\r\n    return array;\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar DataURLParts = /** @class */ (function () {\r\n    function DataURLParts(dataURL) {\r\n        this.base64 = false;\r\n        this.contentType = null;\r\n        var matches = dataURL.match(/^data:([^,]+)?,/);\r\n        if (matches === null) {\r\n            throw invalidFormat(StringFormat.DATA_URL, \"Must be formatted 'data:[<mediatype>][;base64],<data>\");\r\n        }\r\n        var middle = matches[1] || null;\r\n        if (middle != null) {\r\n            this.base64 = endsWith(middle, ';base64');\r\n            this.contentType = this.base64\r\n                ? middle.substring(0, middle.length - ';base64'.length)\r\n                : middle;\r\n        }\r\n        this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\r\n    }\r\n    return DataURLParts;\r\n}());\r\nfunction dataURLBytes_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    if (parts.base64) {\r\n        return base64Bytes_(StringFormat.BASE64, parts.rest);\r\n    }\r\n    else {\r\n        return percentEncodedBytes_(parts.rest);\r\n    }\r\n}\r\nfunction dataURLContentType_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    return parts.contentType;\r\n}\r\nfunction endsWith(s, end) {\r\n    var longEnough = s.length >= end.length;\r\n    if (!longEnough) {\r\n        return false;\r\n    }\r\n    return s.substring(s.length - end.length) === end;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar TaskEvent = {\r\n    /** Triggered whenever the task changes or progress is updated. */\r\n    STATE_CHANGED: 'state_changed'\r\n};\r\nvar InternalTaskState = {\r\n    RUNNING: 'running',\r\n    PAUSING: 'pausing',\r\n    PAUSED: 'paused',\r\n    SUCCESS: 'success',\r\n    CANCELING: 'canceling',\r\n    CANCELED: 'canceled',\r\n    ERROR: 'error'\r\n};\r\nvar TaskState = {\r\n    /** The task is currently transferring data. */\r\n    RUNNING: 'running',\r\n    /** The task was paused by the user. */\r\n    PAUSED: 'paused',\r\n    /** The task completed successfully. */\r\n    SUCCESS: 'success',\r\n    /** The task was canceled. */\r\n    CANCELED: 'canceled',\r\n    /** The task failed with an error. */\r\n    ERROR: 'error'\r\n};\r\nfunction taskStateFromInternalTaskState(state) {\r\n    switch (state) {\r\n        case InternalTaskState.RUNNING:\r\n        case InternalTaskState.PAUSING:\r\n        case InternalTaskState.CANCELING:\r\n            return TaskState.RUNNING;\r\n        case InternalTaskState.PAUSED:\r\n            return TaskState.PAUSED;\r\n        case InternalTaskState.SUCCESS:\r\n            return TaskState.SUCCESS;\r\n        case InternalTaskState.CANCELED:\r\n            return TaskState.CANCELED;\r\n        case InternalTaskState.ERROR:\r\n            return TaskState.ERROR;\r\n        default:\r\n            // TODO(andysoto): assert(false);\r\n            return TaskState.ERROR;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @return False if the object is undefined or null, true otherwise.\r\n */\r\nfunction isDef(p) {\r\n    return p != null;\r\n}\r\nfunction isJustDef(p) {\r\n    return p !== void 0;\r\n}\r\nfunction isFunction(p) {\r\n    return typeof p === 'function';\r\n}\r\nfunction isObject(p) {\r\n    return typeof p === 'object';\r\n}\r\nfunction isNonNullObject(p) {\r\n    return isObject(p) && p !== null;\r\n}\r\nfunction isNonArrayObject(p) {\r\n    return isObject(p) && !Array.isArray(p);\r\n}\r\nfunction isString(p) {\r\n    return typeof p === 'string' || p instanceof String;\r\n}\r\nfunction isInteger(p) {\r\n    return isNumber(p) && Number.isInteger(p);\r\n}\r\nfunction isNumber(p) {\r\n    return typeof p === 'number' || p instanceof Number;\r\n}\r\nfunction isNativeBlob(p) {\r\n    return isNativeBlobDefined() && p instanceof Blob;\r\n}\r\nfunction isNativeBlobDefined() {\r\n    return typeof Blob !== 'undefined';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @enum{number}\r\n */\r\nvar ErrorCode;\r\n(function (ErrorCode) {\r\n    ErrorCode[ErrorCode[\"NO_ERROR\"] = 0] = \"NO_ERROR\";\r\n    ErrorCode[ErrorCode[\"NETWORK_ERROR\"] = 1] = \"NETWORK_ERROR\";\r\n    ErrorCode[ErrorCode[\"ABORT\"] = 2] = \"ABORT\";\r\n})(ErrorCode || (ErrorCode = {}));\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * We use this instead of goog.net.XhrIo because goog.net.XhrIo is hyuuuuge and\r\n * doesn't work in React Native on Android.\r\n */\r\nvar NetworkXhrIo = /** @class */ (function () {\r\n    function NetworkXhrIo() {\r\n        var _this = this;\r\n        this.sent_ = false;\r\n        this.xhr_ = new XMLHttpRequest();\r\n        this.errorCode_ = ErrorCode.NO_ERROR;\r\n        this.sendPromise_ = new Promise(function (resolve) {\r\n            _this.xhr_.addEventListener('abort', function () {\r\n                _this.errorCode_ = ErrorCode.ABORT;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('error', function () {\r\n                _this.errorCode_ = ErrorCode.NETWORK_ERROR;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('load', function () {\r\n                resolve(_this);\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.send = function (url, method, body, headers) {\r\n        if (this.sent_) {\r\n            throw internalError('cannot .send() more than once');\r\n        }\r\n        this.sent_ = true;\r\n        this.xhr_.open(method, url, true);\r\n        if (isDef(headers)) {\r\n            for (var key in headers) {\r\n                if (headers.hasOwnProperty(key)) {\r\n                    this.xhr_.setRequestHeader(key, headers[key].toString());\r\n                }\r\n            }\r\n        }\r\n        if (isDef(body)) {\r\n            this.xhr_.send(body);\r\n        }\r\n        else {\r\n            this.xhr_.send();\r\n        }\r\n        return this.sendPromise_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getErrorCode = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getErrorCode() before sending');\r\n        }\r\n        return this.errorCode_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getStatus = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getStatus() before sending');\r\n        }\r\n        try {\r\n            return this.xhr_.status;\r\n        }\r\n        catch (e) {\r\n            return -1;\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseText = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getResponseText() before sending');\r\n        }\r\n        return this.xhr_.responseText;\r\n    };\r\n    /**\r\n     * Aborts the request.\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.abort = function () {\r\n        this.xhr_.abort();\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseHeader = function (header) {\r\n        return this.xhr_.getResponseHeader(header);\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.addUploadProgressListener = function (listener) {\r\n        if (isDef(this.xhr_.upload)) {\r\n            this.xhr_.upload.addEventListener('progress', listener);\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.removeUploadProgressListener = function (listener) {\r\n        if (isDef(this.xhr_.upload)) {\r\n            this.xhr_.upload.removeEventListener('progress', listener);\r\n        }\r\n    };\r\n    return NetworkXhrIo;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Factory-like class for creating XhrIo instances.\r\n */\r\nvar XhrIoPool = /** @class */ (function () {\r\n    function XhrIoPool() {\r\n    }\r\n    XhrIoPool.prototype.createXhrIo = function () {\r\n        return new NetworkXhrIo();\r\n    };\r\n    return XhrIoPool;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getBlobBuilder() {\r\n    if (typeof BlobBuilder !== 'undefined') {\r\n        return BlobBuilder;\r\n    }\r\n    else if (typeof WebKitBlobBuilder !== 'undefined') {\r\n        return WebKitBlobBuilder;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * Concatenates one or more values together and converts them to a Blob.\r\n *\r\n * @param args The values that will make up the resulting blob.\r\n * @return The blob.\r\n */\r\nfunction getBlob() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    var BlobBuilder = getBlobBuilder();\r\n    if (BlobBuilder !== undefined) {\r\n        var bb = new BlobBuilder();\r\n        for (var i = 0; i < args.length; i++) {\r\n            bb.append(args[i]);\r\n        }\r\n        return bb.getBlob();\r\n    }\r\n    else {\r\n        if (isNativeBlobDefined()) {\r\n            return new Blob(args);\r\n        }\r\n        else {\r\n            throw Error(\"This browser doesn't seem to support creating Blobs\");\r\n        }\r\n    }\r\n}\r\n/**\r\n * Slices the blob. The returned blob contains data from the start byte\r\n * (inclusive) till the end byte (exclusive). Negative indices cannot be used.\r\n *\r\n * @param blob The blob to be sliced.\r\n * @param start Index of the starting byte.\r\n * @param end Index of the ending byte.\r\n * @return The blob slice or null if not supported.\r\n */\r\nfunction sliceBlob(blob, start, end) {\r\n    if (blob.webkitSlice) {\r\n        return blob.webkitSlice(start, end);\r\n    }\r\n    else if (blob.mozSlice) {\r\n        return blob.mozSlice(start, end);\r\n    }\r\n    else if (blob.slice) {\r\n        return blob.slice(start, end);\r\n    }\r\n    return null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param opt_elideCopy If true, doesn't copy mutable input data\r\n *     (e.g. Uint8Arrays). Pass true only if you know the objects will not be\r\n *     modified after this blob's construction.\r\n */\r\nvar FbsBlob = /** @class */ (function () {\r\n    function FbsBlob(data, elideCopy) {\r\n        var size = 0;\r\n        var blobType = '';\r\n        if (isNativeBlob(data)) {\r\n            this.data_ = data;\r\n            size = data.size;\r\n            blobType = data.type;\r\n        }\r\n        else if (data instanceof ArrayBuffer) {\r\n            if (elideCopy) {\r\n                this.data_ = new Uint8Array(data);\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.byteLength);\r\n                this.data_.set(new Uint8Array(data));\r\n            }\r\n            size = this.data_.length;\r\n        }\r\n        else if (data instanceof Uint8Array) {\r\n            if (elideCopy) {\r\n                this.data_ = data;\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.length);\r\n                this.data_.set(data);\r\n            }\r\n            size = data.length;\r\n        }\r\n        this.size_ = size;\r\n        this.type_ = blobType;\r\n    }\r\n    FbsBlob.prototype.size = function () {\r\n        return this.size_;\r\n    };\r\n    FbsBlob.prototype.type = function () {\r\n        return this.type_;\r\n    };\r\n    FbsBlob.prototype.slice = function (startByte, endByte) {\r\n        if (isNativeBlob(this.data_)) {\r\n            var realBlob = this.data_;\r\n            var sliced = sliceBlob(realBlob, startByte, endByte);\r\n            if (sliced === null) {\r\n                return null;\r\n            }\r\n            return new FbsBlob(sliced);\r\n        }\r\n        else {\r\n            var slice = new Uint8Array(this.data_.buffer, startByte, endByte - startByte);\r\n            return new FbsBlob(slice, true);\r\n        }\r\n    };\r\n    FbsBlob.getBlob = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (isNativeBlobDefined()) {\r\n            var blobby = args.map(function (val) {\r\n                if (val instanceof FbsBlob) {\r\n                    return val.data_;\r\n                }\r\n                else {\r\n                    return val;\r\n                }\r\n            });\r\n            return new FbsBlob(getBlob.apply(null, blobby));\r\n        }\r\n        else {\r\n            var uint8Arrays = args.map(function (val) {\r\n                if (isString(val)) {\r\n                    return dataFromString(StringFormat.RAW, val).data;\r\n                }\r\n                else {\r\n                    // Blobs don't exist, so this has to be a Uint8Array.\r\n                    return val.data_;\r\n                }\r\n            });\r\n            var finalLength_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                finalLength_1 += array.byteLength;\r\n            });\r\n            var merged_1 = new Uint8Array(finalLength_1);\r\n            var index_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                for (var i = 0; i < array.length; i++) {\r\n                    merged_1[index_1++] = array[i];\r\n                }\r\n            });\r\n            return new FbsBlob(merged_1, true);\r\n        }\r\n    };\r\n    FbsBlob.prototype.uploadData = function () {\r\n        return this.data_;\r\n    };\r\n    return FbsBlob;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n */\r\nvar Location = /** @class */ (function () {\r\n    function Location(bucket, path) {\r\n        this.bucket = bucket;\r\n        this.path_ = path;\r\n    }\r\n    Object.defineProperty(Location.prototype, \"path\", {\r\n        get: function () {\r\n            return this.path_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Location.prototype, \"isRoot\", {\r\n        get: function () {\r\n            return this.path.length === 0;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Location.prototype.fullServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o/' + encode(this.path);\r\n    };\r\n    Location.prototype.bucketOnlyServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o';\r\n    };\r\n    Location.makeFromBucketSpec = function (bucketString) {\r\n        var bucketLocation;\r\n        try {\r\n            bucketLocation = Location.makeFromUrl(bucketString);\r\n        }\r\n        catch (e) {\r\n            // Not valid URL, use as-is. This lets you put bare bucket names in\r\n            // config.\r\n            return new Location(bucketString, '');\r\n        }\r\n        if (bucketLocation.path === '') {\r\n            return bucketLocation;\r\n        }\r\n        else {\r\n            throw invalidDefaultBucket(bucketString);\r\n        }\r\n    };\r\n    Location.makeFromUrl = function (url) {\r\n        var location = null;\r\n        var bucketDomain = '([A-Za-z0-9.\\\\-_]+)';\r\n        function gsModify(loc) {\r\n            if (loc.path.charAt(loc.path.length - 1) === '/') {\r\n                loc.path_ = loc.path_.slice(0, -1);\r\n            }\r\n        }\r\n        var gsPath = '(/(.*))?$';\r\n        var gsRegex = new RegExp('^gs://' + bucketDomain + gsPath, 'i');\r\n        var gsIndices = { bucket: 1, path: 3 };\r\n        function httpModify(loc) {\r\n            loc.path_ = decodeURIComponent(loc.path);\r\n        }\r\n        var version = 'v[A-Za-z0-9_]+';\r\n        var firebaseStorageHost = DEFAULT_HOST.replace(/[.]/g, '\\\\.');\r\n        var firebaseStoragePath = '(/([^?#]*).*)?$';\r\n        var firebaseStorageRegExp = new RegExp(\"^https?://\" + firebaseStorageHost + \"/\" + version + \"/b/\" + bucketDomain + \"/o\" + firebaseStoragePath, 'i');\r\n        var firebaseStorageIndices = { bucket: 1, path: 3 };\r\n        var cloudStorageHost = '(?:storage.googleapis.com|storage.cloud.google.com)';\r\n        var cloudStoragePath = '([^?#]*)';\r\n        var cloudStorageRegExp = new RegExp(\"^https?://\" + cloudStorageHost + \"/\" + bucketDomain + \"/\" + cloudStoragePath, 'i');\r\n        var cloudStorageIndices = { bucket: 1, path: 2 };\r\n        var groups = [\r\n            { regex: gsRegex, indices: gsIndices, postModify: gsModify },\r\n            {\r\n                regex: firebaseStorageRegExp,\r\n                indices: firebaseStorageIndices,\r\n                postModify: httpModify\r\n            },\r\n            {\r\n                regex: cloudStorageRegExp,\r\n                indices: cloudStorageIndices,\r\n                postModify: httpModify\r\n            }\r\n        ];\r\n        for (var i = 0; i < groups.length; i++) {\r\n            var group = groups[i];\r\n            var captures = group.regex.exec(url);\r\n            if (captures) {\r\n                var bucketValue = captures[group.indices.bucket];\r\n                var pathValue = captures[group.indices.path];\r\n                if (!pathValue) {\r\n                    pathValue = '';\r\n                }\r\n                location = new Location(bucketValue, pathValue);\r\n                group.postModify(location);\r\n                break;\r\n            }\r\n        }\r\n        if (location == null) {\r\n            throw invalidUrl(url);\r\n        }\r\n        return location;\r\n    };\r\n    return Location;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns the Object resulting from parsing the given JSON, or null if the\r\n * given string does not represent a JSON object.\r\n */\r\nfunction jsonObjectOrNull(s) {\r\n    var obj;\r\n    try {\r\n        obj = JSON.parse(s);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n    if (isNonArrayObject(obj)) {\r\n        return obj;\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Contains helper methods for manipulating paths.\r\n */\r\n/**\r\n * @return Null if the path is already at the root.\r\n */\r\nfunction parent(path) {\r\n    if (path.length === 0) {\r\n        return null;\r\n    }\r\n    var index = path.lastIndexOf('/');\r\n    if (index === -1) {\r\n        return '';\r\n    }\r\n    var newPath = path.slice(0, index);\r\n    return newPath;\r\n}\r\nfunction child(path, childPath) {\r\n    var canonicalChildPath = childPath\r\n        .split('/')\r\n        .filter(function (component) { return component.length > 0; })\r\n        .join('/');\r\n    if (path.length === 0) {\r\n        return canonicalChildPath;\r\n    }\r\n    else {\r\n        return path + '/' + canonicalChildPath;\r\n    }\r\n}\r\n/**\r\n * Returns the last component of a path.\r\n * '/foo/bar' -> 'bar'\r\n * '/foo/bar/baz/' -> 'baz/'\r\n * '/a' -> 'a'\r\n */\r\nfunction lastComponent(path) {\r\n    var index = path.lastIndexOf('/', path.length - 2);\r\n    if (index === -1) {\r\n        return path;\r\n    }\r\n    else {\r\n        return path.slice(index + 1);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction makeUrl(urlPart) {\r\n    return \"https://\" + DEFAULT_HOST + \"/v0\" + urlPart;\r\n}\r\nfunction makeQueryString(params) {\r\n    var encode = encodeURIComponent;\r\n    var queryPart = '?';\r\n    for (var key in params) {\r\n        if (params.hasOwnProperty(key)) {\r\n            // @ts-ignore TODO: remove once typescript is upgraded to 3.5.x\r\n            var nextPart = encode(key) + '=' + encode(params[key]);\r\n            queryPart = queryPart + nextPart + '&';\r\n        }\r\n    }\r\n    // Chop off the extra '&' or '?' on the end\r\n    queryPart = queryPart.slice(0, -1);\r\n    return queryPart;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction noXform_(metadata, value) {\r\n    return value;\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar Mapping = /** @class */ (function () {\r\n    function Mapping(server, local, writable, xform) {\r\n        this.server = server;\r\n        this.local = local || server;\r\n        this.writable = !!writable;\r\n        this.xform = xform || noXform_;\r\n    }\r\n    return Mapping;\r\n}());\r\nvar mappings_ = null;\r\nfunction xformPath(fullPath) {\r\n    if (!isString(fullPath) || fullPath.length < 2) {\r\n        return fullPath;\r\n    }\r\n    else {\r\n        return lastComponent(fullPath);\r\n    }\r\n}\r\nfunction getMappings() {\r\n    if (mappings_) {\r\n        return mappings_;\r\n    }\r\n    var mappings = [];\r\n    mappings.push(new Mapping('bucket'));\r\n    mappings.push(new Mapping('generation'));\r\n    mappings.push(new Mapping('metageneration'));\r\n    mappings.push(new Mapping('name', 'fullPath', true));\r\n    function mappingsXformPath(_metadata, fullPath) {\r\n        return xformPath(fullPath);\r\n    }\r\n    var nameMapping = new Mapping('name');\r\n    nameMapping.xform = mappingsXformPath;\r\n    mappings.push(nameMapping);\r\n    /**\r\n     * Coerces the second param to a number, if it is defined.\r\n     */\r\n    function xformSize(_metadata, size) {\r\n        if (isDef(size)) {\r\n            return Number(size);\r\n        }\r\n        else {\r\n            return size;\r\n        }\r\n    }\r\n    var sizeMapping = new Mapping('size');\r\n    sizeMapping.xform = xformSize;\r\n    mappings.push(sizeMapping);\r\n    mappings.push(new Mapping('timeCreated'));\r\n    mappings.push(new Mapping('updated'));\r\n    mappings.push(new Mapping('md5Hash', null, true));\r\n    mappings.push(new Mapping('cacheControl', null, true));\r\n    mappings.push(new Mapping('contentDisposition', null, true));\r\n    mappings.push(new Mapping('contentEncoding', null, true));\r\n    mappings.push(new Mapping('contentLanguage', null, true));\r\n    mappings.push(new Mapping('contentType', null, true));\r\n    mappings.push(new Mapping('metadata', 'customMetadata', true));\r\n    mappings_ = mappings;\r\n    return mappings_;\r\n}\r\nfunction addRef(metadata, service) {\r\n    function generateRef() {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var loc = new Location(bucket, path);\r\n        return service.makeStorageReference(loc);\r\n    }\r\n    Object.defineProperty(metadata, 'ref', { get: generateRef });\r\n}\r\nfunction fromResource(service, resource, mappings) {\r\n    var metadata = {};\r\n    metadata['type'] = 'file';\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        metadata[mapping.local] = mapping.xform(metadata, resource[mapping.server]);\r\n    }\r\n    addRef(metadata, service);\r\n    return metadata;\r\n}\r\nfunction fromResourceString(service, resourceString, mappings) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromResource(service, resource, mappings);\r\n}\r\nfunction downloadUrlFromResourceString(metadata, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    if (!isString(obj['downloadTokens'])) {\r\n        // This can happen if objects are uploaded through GCS and retrieved\r\n        // through list, so we don't want to throw an Error.\r\n        return null;\r\n    }\r\n    var tokens = obj['downloadTokens'];\r\n    if (tokens.length === 0) {\r\n        return null;\r\n    }\r\n    var encode = encodeURIComponent;\r\n    var tokensList = tokens.split(',');\r\n    var urls = tokensList.map(function (token) {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var urlPart = '/b/' + encode(bucket) + '/o/' + encode(path);\r\n        var base = makeUrl(urlPart);\r\n        var queryString = makeQueryString({\r\n            alt: 'media',\r\n            token: token\r\n        });\r\n        return base + queryString;\r\n    });\r\n    return urls[0];\r\n}\r\nfunction toResourceString(metadata, mappings) {\r\n    var resource = {};\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        if (mapping.writable) {\r\n            resource[mapping.server] = metadata[mapping.local];\r\n        }\r\n    }\r\n    return JSON.stringify(resource);\r\n}\r\nfunction metadataValidator(p) {\r\n    if (!isObject(p) || !p) {\r\n        throw 'Expected Metadata object.';\r\n    }\r\n    for (var key in p) {\r\n        if (p.hasOwnProperty(key)) {\r\n            var val = p[key];\r\n            if (key === 'customMetadata') {\r\n                if (!isObject(val)) {\r\n                    throw 'Expected object for \\'customMetadata\\' mapping.';\r\n                }\r\n            }\r\n            else {\r\n                if (isNonNullObject(val)) {\r\n                    throw \"Mapping for '\" + key + \"' cannot be an object.\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar MAX_RESULTS_KEY = 'maxResults';\r\nvar MAX_MAX_RESULTS = 1000;\r\nvar PAGE_TOKEN_KEY = 'pageToken';\r\nvar PREFIXES_KEY = 'prefixes';\r\nvar ITEMS_KEY = 'items';\r\nfunction fromBackendResponse(service, bucket, resource) {\r\n    var listResult = {\r\n        prefixes: [],\r\n        items: [],\r\n        nextPageToken: resource['nextPageToken']\r\n    };\r\n    if (resource[PREFIXES_KEY]) {\r\n        for (var _i = 0, _a = resource[PREFIXES_KEY]; _i < _a.length; _i++) {\r\n            var path = _a[_i];\r\n            var pathWithoutTrailingSlash = path.replace(/\\/$/, '');\r\n            var reference = service.makeStorageReference(new Location(bucket, pathWithoutTrailingSlash));\r\n            listResult.prefixes.push(reference);\r\n        }\r\n    }\r\n    if (resource[ITEMS_KEY]) {\r\n        for (var _b = 0, _c = resource[ITEMS_KEY]; _b < _c.length; _b++) {\r\n            var item = _c[_b];\r\n            var reference = service.makeStorageReference(new Location(bucket, item['name']));\r\n            listResult.items.push(reference);\r\n        }\r\n    }\r\n    return listResult;\r\n}\r\nfunction fromResponseString(service, bucket, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromBackendResponse(service, bucket, resource);\r\n}\r\nfunction listOptionsValidator(p) {\r\n    if (!isObject(p) || !p) {\r\n        throw 'Expected ListOptions object.';\r\n    }\r\n    for (var key in p) {\r\n        if (key === MAX_RESULTS_KEY) {\r\n            if (!isInteger(p[MAX_RESULTS_KEY]) ||\r\n                p[MAX_RESULTS_KEY] <= 0) {\r\n                throw 'Expected maxResults to be a positive number.';\r\n            }\r\n            if (p[MAX_RESULTS_KEY] > 1000) {\r\n                throw \"Expected maxResults to be less than or equal to \" + MAX_MAX_RESULTS + \".\";\r\n            }\r\n        }\r\n        else if (key === PAGE_TOKEN_KEY) {\r\n            if (p[PAGE_TOKEN_KEY] && !isString(p[PAGE_TOKEN_KEY])) {\r\n                throw 'Expected pageToken to be string.';\r\n            }\r\n        }\r\n        else {\r\n            throw 'Unknown option: ' + key;\r\n        }\r\n    }\r\n}\n\nvar RequestInfo = /** @class */ (function () {\r\n    function RequestInfo(url, method, \r\n    /**\r\n     * Returns the value with which to resolve the request's promise. Only called\r\n     * if the request is successful. Throw from this function to reject the\r\n     * returned Request's promise with the thrown error.\r\n     * Note: The XhrIo passed to this function may be reused after this callback\r\n     * returns. Do not keep a reference to it in any way.\r\n     */\r\n    handler, timeout) {\r\n        this.url = url;\r\n        this.method = method;\r\n        this.handler = handler;\r\n        this.timeout = timeout;\r\n        this.urlParams = {};\r\n        this.headers = {};\r\n        this.body = null;\r\n        this.errorHandler = null;\r\n        /**\r\n         * Called with the current number of bytes uploaded and total size (-1 if not\r\n         * computable) of the request body (i.e. used to report upload progress).\r\n         */\r\n        this.progressCallback = null;\r\n        this.successCodes = [200];\r\n        this.additionalRetryCodes = [];\r\n    }\r\n    return RequestInfo;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws the UNKNOWN FirebaseStorageError if cndn is false.\r\n */\r\nfunction handlerCheck(cndn) {\r\n    if (!cndn) {\r\n        throw unknown();\r\n    }\r\n}\r\nfunction metadataHandler(service, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(service, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return metadata;\r\n    }\r\n    return handler;\r\n}\r\nfunction listHandler(service, bucket) {\r\n    function handler(xhr, text) {\r\n        var listResult = fromResponseString(service, bucket, text);\r\n        handlerCheck(listResult !== null);\r\n        return listResult;\r\n    }\r\n    return handler;\r\n}\r\nfunction downloadUrlHandler(service, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(service, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return downloadUrlFromResourceString(metadata, text);\r\n    }\r\n    return handler;\r\n}\r\nfunction sharedErrorHandler(location) {\r\n    function errorHandler(xhr, err) {\r\n        var newErr;\r\n        if (xhr.getStatus() === 401) {\r\n            newErr = unauthenticated();\r\n        }\r\n        else {\r\n            if (xhr.getStatus() === 402) {\r\n                newErr = quotaExceeded(location.bucket);\r\n            }\r\n            else {\r\n                if (xhr.getStatus() === 403) {\r\n                    newErr = unauthorized(location.path);\r\n                }\r\n                else {\r\n                    newErr = err;\r\n                }\r\n            }\r\n        }\r\n        newErr.setServerResponseProp(err.serverResponseProp());\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction objectErrorHandler(location) {\r\n    var shared = sharedErrorHandler(location);\r\n    function errorHandler(xhr, err) {\r\n        var newErr = shared(xhr, err);\r\n        if (xhr.getStatus() === 404) {\r\n            newErr = objectNotFound(location.path);\r\n        }\r\n        newErr.setServerResponseProp(err.serverResponseProp());\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction getMetadata(service, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = service.maxOperationRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(service, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction list(service, location, delimiter, pageToken, maxResults) {\r\n    var urlParams = {};\r\n    if (location.isRoot) {\r\n        urlParams['prefix'] = '';\r\n    }\r\n    else {\r\n        urlParams['prefix'] = location.path + '/';\r\n    }\r\n    if (delimiter && delimiter.length > 0) {\r\n        urlParams['delimiter'] = delimiter;\r\n    }\r\n    if (pageToken) {\r\n        urlParams['pageToken'] = pageToken;\r\n    }\r\n    if (maxResults) {\r\n        urlParams['maxResults'] = maxResults;\r\n    }\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = service.maxOperationRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, listHandler(service, location.bucket), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction getDownloadUrl(service, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = service.maxOperationRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, downloadUrlHandler(service, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction updateMetadata(service, location, metadata, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'PATCH';\r\n    var body = toResourceString(metadata, mappings);\r\n    var headers = { 'Content-Type': 'application/json; charset=utf-8' };\r\n    var timeout = service.maxOperationRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(service, mappings), timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction deleteObject(service, location) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'DELETE';\r\n    var timeout = service.maxOperationRetryTime;\r\n    function handler(_xhr, _text) { }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.successCodes = [200, 204];\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction determineContentType_(metadata, blob) {\r\n    return ((metadata && metadata['contentType']) ||\r\n        (blob && blob.type()) ||\r\n        'application/octet-stream');\r\n}\r\nfunction metadataForUpload_(location, blob, metadata) {\r\n    var metadataClone = Object.assign({}, metadata);\r\n    metadataClone['fullPath'] = location.path;\r\n    metadataClone['size'] = blob.size();\r\n    if (!metadataClone['contentType']) {\r\n        metadataClone['contentType'] = determineContentType_(null, blob);\r\n    }\r\n    return metadataClone;\r\n}\r\nfunction multipartUpload(service, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'multipart'\r\n    };\r\n    function genBoundary() {\r\n        var str = '';\r\n        for (var i = 0; i < 2; i++) {\r\n            str = str + Math.random().toString().slice(2);\r\n        }\r\n        return str;\r\n    }\r\n    var boundary = genBoundary();\r\n    headers['Content-Type'] = 'multipart/related; boundary=' + boundary;\r\n    var metadata_ = metadataForUpload_(location, blob, metadata);\r\n    var metadataString = toResourceString(metadata_, mappings);\r\n    var preBlobPart = '--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: application/json; charset=utf-8\\r\\n\\r\\n' +\r\n        metadataString +\r\n        '\\r\\n--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: ' +\r\n        metadata_['contentType'] +\r\n        '\\r\\n\\r\\n';\r\n    var postBlobPart = '\\r\\n--' + boundary + '--';\r\n    var body = FbsBlob.getBlob(preBlobPart, blob, postBlobPart);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    var urlParams = { name: metadata_['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var timeout = service.maxUploadRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(service, mappings), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param current The number of bytes that have been uploaded so far.\r\n * @param total The total number of bytes in the upload.\r\n * @param opt_finalized True if the server has finished the upload.\r\n * @param opt_metadata The upload metadata, should\r\n *     only be passed if opt_finalized is true.\r\n * @struct\r\n */\r\nvar ResumableUploadStatus = /** @class */ (function () {\r\n    function ResumableUploadStatus(current, total, finalized, metadata) {\r\n        this.current = current;\r\n        this.total = total;\r\n        this.finalized = !!finalized;\r\n        this.metadata = metadata || null;\r\n    }\r\n    return ResumableUploadStatus;\r\n}());\r\nfunction checkResumeHeader_(xhr, allowed) {\r\n    var status = null;\r\n    try {\r\n        status = xhr.getResponseHeader('X-Goog-Upload-Status');\r\n    }\r\n    catch (e) {\r\n        handlerCheck(false);\r\n    }\r\n    var allowedStatus = allowed || ['active'];\r\n    handlerCheck(!!status && allowedStatus.indexOf(status) !== -1);\r\n    return status;\r\n}\r\nfunction createResumableUpload(service, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var metadataForUpload = metadataForUpload_(location, blob, metadata);\r\n    var urlParams = { name: metadataForUpload['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'resumable',\r\n        'X-Goog-Upload-Command': 'start',\r\n        'X-Goog-Upload-Header-Content-Length': blob.size(),\r\n        'X-Goog-Upload-Header-Content-Type': metadataForUpload['contentType'],\r\n        'Content-Type': 'application/json; charset=utf-8'\r\n    };\r\n    var body = toResourceString(metadataForUpload, mappings);\r\n    var timeout = service.maxUploadRetryTime;\r\n    function handler(xhr) {\r\n        checkResumeHeader_(xhr);\r\n        var url;\r\n        try {\r\n            url = xhr.getResponseHeader('X-Goog-Upload-URL');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        handlerCheck(isString(url));\r\n        return url;\r\n    }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n */\r\nfunction getResumableUploadStatus(service, location, url, blob) {\r\n    var headers = { 'X-Goog-Upload-Command': 'query' };\r\n    function handler(xhr) {\r\n        var status = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var sizeString = null;\r\n        try {\r\n            sizeString = xhr.getResponseHeader('X-Goog-Upload-Size-Received');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        if (!sizeString) {\r\n            // null or empty string\r\n            handlerCheck(false);\r\n        }\r\n        var size = Number(sizeString);\r\n        handlerCheck(!isNaN(size));\r\n        return new ResumableUploadStatus(size, blob.size(), status === 'final');\r\n    }\r\n    var method = 'POST';\r\n    var timeout = service.maxUploadRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * Any uploads via the resumable upload API must transfer a number of bytes\r\n * that is a multiple of this number.\r\n */\r\nvar resumableUploadChunkSize = 256 * 1024;\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n * @param chunkSize Number of bytes to upload.\r\n * @param status The previous status.\r\n *     If not passed or null, we start from the beginning.\r\n * @throws fbs.Error If the upload is already complete, the passed in status\r\n *     has a final size inconsistent with the blob, or the blob cannot be sliced\r\n *     for upload.\r\n */\r\nfunction continueResumableUpload(location, service, url, blob, chunkSize, mappings, status, progressCallback) {\r\n    // TODO(andysoto): standardize on internal asserts\r\n    // assert(!(opt_status && opt_status.finalized));\r\n    var status_ = new ResumableUploadStatus(0, 0);\r\n    if (status) {\r\n        status_.current = status.current;\r\n        status_.total = status.total;\r\n    }\r\n    else {\r\n        status_.current = 0;\r\n        status_.total = blob.size();\r\n    }\r\n    if (blob.size() !== status_.total) {\r\n        throw serverFileWrongSize();\r\n    }\r\n    var bytesLeft = status_.total - status_.current;\r\n    var bytesToUpload = bytesLeft;\r\n    if (chunkSize > 0) {\r\n        bytesToUpload = Math.min(bytesToUpload, chunkSize);\r\n    }\r\n    var startByte = status_.current;\r\n    var endByte = startByte + bytesToUpload;\r\n    var uploadCommand = bytesToUpload === bytesLeft ? 'upload, finalize' : 'upload';\r\n    var headers = {\r\n        'X-Goog-Upload-Command': uploadCommand,\r\n        'X-Goog-Upload-Offset': status_.current\r\n    };\r\n    var body = blob.slice(startByte, endByte);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    function handler(xhr, text) {\r\n        // TODO(andysoto): Verify the MD5 of each uploaded range:\r\n        // the 'x-range-md5' header comes back with status code 308 responses.\r\n        // We'll only be able to bail out though, because you can't re-upload a\r\n        // range that you previously uploaded.\r\n        var uploadStatus = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var newCurrent = status_.current + bytesToUpload;\r\n        var size = blob.size();\r\n        var metadata;\r\n        if (uploadStatus === 'final') {\r\n            metadata = metadataHandler(service, mappings)(xhr, text);\r\n        }\r\n        else {\r\n            metadata = null;\r\n        }\r\n        return new ResumableUploadStatus(newCurrent, size, uploadStatus === 'final', metadata);\r\n    }\r\n    var method = 'POST';\r\n    var timeout = service.maxUploadRetryTime;\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.progressCallback = progressCallback || null;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n */\r\nvar Observer = /** @class */ (function () {\r\n    function Observer(nextOrObserver, error, complete) {\r\n        var asFunctions = isFunction(nextOrObserver) ||\r\n            isDef(error) ||\r\n            isDef(complete);\r\n        if (asFunctions) {\r\n            this.next = nextOrObserver;\r\n            this.error = error || null;\r\n            this.complete = complete || null;\r\n        }\r\n        else {\r\n            var observer = nextOrObserver;\r\n            this.next = observer.next || null;\r\n            this.error = observer.error || null;\r\n            this.complete = observer.complete || null;\r\n        }\r\n    }\r\n    return Observer;\r\n}());\n\nvar UploadTaskSnapshot = /** @class */ (function () {\r\n    function UploadTaskSnapshot(bytesTransferred, totalBytes, state, metadata, task, ref) {\r\n        this.bytesTransferred = bytesTransferred;\r\n        this.totalBytes = totalBytes;\r\n        this.state = state;\r\n        this.metadata = metadata;\r\n        this.task = task;\r\n        this.ref = ref;\r\n    }\r\n    return UploadTaskSnapshot;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param name Name of the function.\r\n * @param specs Argument specs.\r\n * @param passed The actual arguments passed to the function.\r\n * @throws {fbs.Error} If the arguments are invalid.\r\n */\r\nfunction validate(name, specs, passed) {\r\n    var minArgs = specs.length;\r\n    var maxArgs = specs.length;\r\n    for (var i = 0; i < specs.length; i++) {\r\n        if (specs[i].optional) {\r\n            minArgs = i;\r\n            break;\r\n        }\r\n    }\r\n    var validLength = minArgs <= passed.length && passed.length <= maxArgs;\r\n    if (!validLength) {\r\n        throw invalidArgumentCount(minArgs, maxArgs, name, passed.length);\r\n    }\r\n    for (var i = 0; i < passed.length; i++) {\r\n        try {\r\n            specs[i].validator(passed[i]);\r\n        }\r\n        catch (e) {\r\n            if (e instanceof Error) {\r\n                throw invalidArgument(i, name, e.message);\r\n            }\r\n            else {\r\n                throw invalidArgument(i, name, e);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar ArgSpec = /** @class */ (function () {\r\n    function ArgSpec(validator, optional) {\r\n        var self = this;\r\n        this.validator = function (p) {\r\n            if (self.optional && !isJustDef(p)) {\r\n                return;\r\n            }\r\n            validator(p);\r\n        };\r\n        this.optional = !!optional;\r\n    }\r\n    return ArgSpec;\r\n}());\r\nfunction and_(v1, v2) {\r\n    return function (p) {\r\n        v1(p);\r\n        v2(p);\r\n    };\r\n}\r\nfunction stringSpec(validator, optional) {\r\n    function stringValidator(p) {\r\n        if (!isString(p)) {\r\n            throw 'Expected string.';\r\n        }\r\n    }\r\n    var chainedValidator;\r\n    if (validator) {\r\n        chainedValidator = and_(stringValidator, validator);\r\n    }\r\n    else {\r\n        chainedValidator = stringValidator;\r\n    }\r\n    return new ArgSpec(chainedValidator, optional);\r\n}\r\nfunction uploadDataSpec() {\r\n    function validator(p) {\r\n        var valid = p instanceof Uint8Array ||\r\n            p instanceof ArrayBuffer ||\r\n            (isNativeBlobDefined() && p instanceof Blob);\r\n        if (!valid) {\r\n            throw 'Expected Blob or File.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator);\r\n}\r\nfunction metadataSpec(optional) {\r\n    return new ArgSpec(metadataValidator, optional);\r\n}\r\nfunction listOptionSpec(optional) {\r\n    return new ArgSpec(listOptionsValidator, optional);\r\n}\r\nfunction nonNegativeNumberSpec() {\r\n    function validator(p) {\r\n        var valid = isNumber(p) && p >= 0;\r\n        if (!valid) {\r\n            throw 'Expected a number 0 or greater.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator);\r\n}\r\nfunction looseObjectSpec(validator, optional) {\r\n    function isLooseObjectValidator(p) {\r\n        var isLooseObject = p === null || (isDef(p) && p instanceof Object);\r\n        if (!isLooseObject) {\r\n            throw 'Expected an Object.';\r\n        }\r\n        if (validator !== undefined && validator !== null) {\r\n            validator(p);\r\n        }\r\n    }\r\n    return new ArgSpec(isLooseObjectValidator, optional);\r\n}\r\nfunction nullFunctionSpec(optional) {\r\n    function validator(p) {\r\n        var valid = p === null || isFunction(p);\r\n        if (!valid) {\r\n            throw 'Expected a Function.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator, optional);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a function that invokes f with its arguments asynchronously as a\r\n * microtask, i.e. as soon as possible after the current script returns back\r\n * into browser code.\r\n */\r\nfunction async(f) {\r\n    return function () {\r\n        var argsToForward = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            argsToForward[_i] = arguments[_i];\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        Promise.resolve().then(function () { return f.apply(void 0, argsToForward); });\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Represents a blob being uploaded. Can be used to pause/resume/cancel the\r\n * upload and manage callbacks for various events.\r\n */\r\nvar UploadTask = /** @class */ (function () {\r\n    /**\r\n     * @param ref The firebaseStorage.Reference object this task came\r\n     *     from, untyped to avoid cyclic dependencies.\r\n     * @param blob The blob to upload.\r\n     */\r\n    function UploadTask(ref, service, location, mappings, blob, metadata) {\r\n        var _this = this;\r\n        if (metadata === void 0) { metadata = null; }\r\n        this.transferred_ = 0;\r\n        this.needToFetchStatus_ = false;\r\n        this.needToFetchMetadata_ = false;\r\n        this.observers_ = [];\r\n        this.error_ = null;\r\n        this.uploadUrl_ = null;\r\n        this.request_ = null;\r\n        this.chunkMultiplier_ = 1;\r\n        this.resolve_ = null;\r\n        this.reject_ = null;\r\n        this.ref_ = ref;\r\n        this.service_ = service;\r\n        this.location_ = location;\r\n        this.blob_ = blob;\r\n        this.metadata_ = metadata;\r\n        this.mappings_ = mappings;\r\n        this.resumable_ = this.shouldDoResumable_(this.blob_);\r\n        this.state_ = InternalTaskState.RUNNING;\r\n        this.errorHandler_ = function (error) {\r\n            _this.request_ = null;\r\n            _this.chunkMultiplier_ = 1;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.needToFetchStatus_ = true;\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this.error_ = error;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this.metadataErrorHandler_ = function (error) {\r\n            _this.request_ = null;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this.error_ = error;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this.promise_ = new Promise(function (resolve, reject) {\r\n            _this.resolve_ = resolve;\r\n            _this.reject_ = reject;\r\n            _this.start_();\r\n        });\r\n        // Prevent uncaught rejections on the internal promise from bubbling out\r\n        // to the top level with a dummy handler.\r\n        this.promise_.then(null, function () { });\r\n    }\r\n    UploadTask.prototype.makeProgressCallback_ = function () {\r\n        var _this = this;\r\n        var sizeBefore = this.transferred_;\r\n        return function (loaded) { return _this.updateProgress_(sizeBefore + loaded); };\r\n    };\r\n    UploadTask.prototype.shouldDoResumable_ = function (blob) {\r\n        return blob.size() > 256 * 1024;\r\n    };\r\n    UploadTask.prototype.start_ = function () {\r\n        if (this.state_ !== InternalTaskState.RUNNING) {\r\n            // This can happen if someone pauses us in a resume callback, for example.\r\n            return;\r\n        }\r\n        if (this.request_ !== null) {\r\n            return;\r\n        }\r\n        if (this.resumable_) {\r\n            if (this.uploadUrl_ === null) {\r\n                this.createResumable_();\r\n            }\r\n            else {\r\n                if (this.needToFetchStatus_) {\r\n                    this.fetchStatus_();\r\n                }\r\n                else {\r\n                    if (this.needToFetchMetadata_) {\r\n                        // Happens if we miss the metadata on upload completion.\r\n                        this.fetchMetadata_();\r\n                    }\r\n                    else {\r\n                        this.continueUpload_();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.oneShotUpload_();\r\n        }\r\n    };\r\n    UploadTask.prototype.resolveToken_ = function (callback) {\r\n        var _this = this;\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.service_.getAuthToken().then(function (authToken) {\r\n            switch (_this.state_) {\r\n                case InternalTaskState.RUNNING:\r\n                    callback(authToken);\r\n                    break;\r\n                case InternalTaskState.CANCELING:\r\n                    _this.transition_(InternalTaskState.CANCELED);\r\n                    break;\r\n                case InternalTaskState.PAUSING:\r\n                    _this.transition_(InternalTaskState.PAUSED);\r\n                    break;\r\n            }\r\n        });\r\n    };\r\n    // TODO(andysoto): assert false\r\n    UploadTask.prototype.createResumable_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = createResumableUpload(_this.service_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\r\n            var createRequest = _this.service_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = createRequest;\r\n            createRequest.getPromise().then(function (url) {\r\n                _this.request_ = null;\r\n                _this.uploadUrl_ = url;\r\n                _this.needToFetchStatus_ = false;\r\n                _this.completeTransitions_();\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.fetchStatus_ = function () {\r\n        var _this = this;\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this.uploadUrl_;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = getResumableUploadStatus(_this.service_, _this.location_, url, _this.blob_);\r\n            var statusRequest = _this.service_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = statusRequest;\r\n            statusRequest.getPromise().then(function (status) {\r\n                status = status;\r\n                _this.request_ = null;\r\n                _this.updateProgress_(status.current);\r\n                _this.needToFetchStatus_ = false;\r\n                if (status.finalized) {\r\n                    _this.needToFetchMetadata_ = true;\r\n                }\r\n                _this.completeTransitions_();\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.continueUpload_ = function () {\r\n        var _this = this;\r\n        var chunkSize = resumableUploadChunkSize * this.chunkMultiplier_;\r\n        var status = new ResumableUploadStatus(this.transferred_, this.blob_.size());\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this.uploadUrl_;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo;\r\n            try {\r\n                requestInfo = continueResumableUpload(_this.location_, _this.service_, url, _this.blob_, chunkSize, _this.mappings_, status, _this.makeProgressCallback_());\r\n            }\r\n            catch (e) {\r\n                _this.error_ = e;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n                return;\r\n            }\r\n            var uploadRequest = _this.service_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = uploadRequest;\r\n            uploadRequest\r\n                .getPromise()\r\n                .then(function (newStatus) {\r\n                _this.increaseMultiplier_();\r\n                _this.request_ = null;\r\n                _this.updateProgress_(newStatus.current);\r\n                if (newStatus.finalized) {\r\n                    _this.metadata_ = newStatus.metadata;\r\n                    _this.transition_(InternalTaskState.SUCCESS);\r\n                }\r\n                else {\r\n                    _this.completeTransitions_();\r\n                }\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.increaseMultiplier_ = function () {\r\n        var currentSize = resumableUploadChunkSize * this.chunkMultiplier_;\r\n        // Max chunk size is 32M.\r\n        if (currentSize < 32 * 1024 * 1024) {\r\n            this.chunkMultiplier_ *= 2;\r\n        }\r\n    };\r\n    UploadTask.prototype.fetchMetadata_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = getMetadata(_this.service_, _this.location_, _this.mappings_);\r\n            var metadataRequest = _this.service_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = metadataRequest;\r\n            metadataRequest.getPromise().then(function (metadata) {\r\n                _this.request_ = null;\r\n                _this.metadata_ = metadata;\r\n                _this.transition_(InternalTaskState.SUCCESS);\r\n            }, _this.metadataErrorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.oneShotUpload_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = multipartUpload(_this.service_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\r\n            var multipartRequest = _this.service_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = multipartRequest;\r\n            multipartRequest.getPromise().then(function (metadata) {\r\n                _this.request_ = null;\r\n                _this.metadata_ = metadata;\r\n                _this.updateProgress_(_this.blob_.size());\r\n                _this.transition_(InternalTaskState.SUCCESS);\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.updateProgress_ = function (transferred) {\r\n        var old = this.transferred_;\r\n        this.transferred_ = transferred;\r\n        // A progress update can make the \"transferred\" value smaller (e.g. a\r\n        // partial upload not completed by server, after which the \"transferred\"\r\n        // value may reset to the value at the beginning of the request).\r\n        if (this.transferred_ !== old) {\r\n            this.notifyObservers_();\r\n        }\r\n    };\r\n    UploadTask.prototype.transition_ = function (state) {\r\n        if (this.state_ === state) {\r\n            return;\r\n        }\r\n        switch (state) {\r\n            case InternalTaskState.CANCELING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                this.state_ = state;\r\n                if (this.request_ !== null) {\r\n                    this.request_.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING);\r\n                this.state_ = state;\r\n                if (this.request_ !== null) {\r\n                    this.request_.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                var wasPaused = this.state_ === InternalTaskState.PAUSED;\r\n                this.state_ = state;\r\n                if (wasPaused) {\r\n                    this.notifyObservers_();\r\n                    this.start_();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.CANCELED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.error_ = canceled();\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.ERROR:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.SUCCESS:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n        }\r\n    };\r\n    UploadTask.prototype.completeTransitions_ = function () {\r\n        switch (this.state_) {\r\n            case InternalTaskState.PAUSING:\r\n                this.transition_(InternalTaskState.PAUSED);\r\n                break;\r\n            case InternalTaskState.CANCELING:\r\n                this.transition_(InternalTaskState.CANCELED);\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                this.start_();\r\n                break;\r\n        }\r\n    };\r\n    Object.defineProperty(UploadTask.prototype, \"snapshot\", {\r\n        get: function () {\r\n            var externalState = taskStateFromInternalTaskState(this.state_);\r\n            return new UploadTaskSnapshot(this.transferred_, this.blob_.size(), externalState, this.metadata_, this, this.ref_);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adds a callback for an event.\r\n     * @param type The type of event to listen for.\r\n     */\r\n    UploadTask.prototype.on = function (type, nextOrObserver, error, completed) {\r\n        function typeValidator() {\r\n            if (type !== TaskEvent.STATE_CHANGED) {\r\n                throw \"Expected one of the event types: [\" + TaskEvent.STATE_CHANGED + \"].\";\r\n            }\r\n        }\r\n        var nextOrObserverMessage = 'Expected a function or an Object with one of ' +\r\n            '`next`, `error`, `complete` properties.';\r\n        var nextValidator = nullFunctionSpec(true).validator;\r\n        var observerValidator = looseObjectSpec(null, true).validator;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        function nextOrObserverValidator(p) {\r\n            try {\r\n                nextValidator(p);\r\n                return;\r\n            }\r\n            catch (e) { }\r\n            try {\r\n                observerValidator(p);\r\n                var anyDefined = isJustDef(p['next']) ||\r\n                    isJustDef(p['error']) ||\r\n                    isJustDef(p['complete']);\r\n                if (!anyDefined) {\r\n                    throw '';\r\n                }\r\n                return;\r\n            }\r\n            catch (e) {\r\n                throw nextOrObserverMessage;\r\n            }\r\n        }\r\n        var specs = [\r\n            stringSpec(typeValidator),\r\n            looseObjectSpec(nextOrObserverValidator, true),\r\n            nullFunctionSpec(true),\r\n            nullFunctionSpec(true)\r\n        ];\r\n        validate('on', specs, arguments);\r\n        var self = this;\r\n        function makeBinder(specs) {\r\n            function binder(nextOrObserver, error, complete) {\r\n                if (specs !== null) {\r\n                    validate('on', specs, arguments);\r\n                }\r\n                var observer = new Observer(nextOrObserver, error, completed);\r\n                self.addObserver_(observer);\r\n                return function () {\r\n                    self.removeObserver_(observer);\r\n                };\r\n            }\r\n            return binder;\r\n        }\r\n        function binderNextOrObserverValidator(p) {\r\n            if (p === null) {\r\n                throw nextOrObserverMessage;\r\n            }\r\n            nextOrObserverValidator(p);\r\n        }\r\n        var binderSpecs = [\r\n            looseObjectSpec(binderNextOrObserverValidator),\r\n            nullFunctionSpec(true),\r\n            nullFunctionSpec(true)\r\n        ];\r\n        var typeOnly = !(isJustDef(nextOrObserver) ||\r\n            isJustDef(error) ||\r\n            isJustDef(completed));\r\n        if (typeOnly) {\r\n            return makeBinder(binderSpecs);\r\n        }\r\n        else {\r\n            return makeBinder(null)(nextOrObserver, error, completed);\r\n        }\r\n    };\r\n    /**\r\n     * This object behaves like a Promise, and resolves with its snapshot data\r\n     * when the upload completes.\r\n     * @param onFulfilled The fulfillment callback. Promise chaining works as normal.\r\n     * @param onRejected The rejection callback.\r\n     */\r\n    UploadTask.prototype.then = function (onFulfilled, onRejected) {\r\n        // These casts are needed so that TypeScript can infer the types of the\r\n        // resulting Promise.\r\n        return this.promise_.then(onFulfilled, onRejected);\r\n    };\r\n    /**\r\n     * Equivalent to calling `then(null, onRejected)`.\r\n     */\r\n    UploadTask.prototype.catch = function (onRejected) {\r\n        return this.then(null, onRejected);\r\n    };\r\n    /**\r\n     * Adds the given observer.\r\n     */\r\n    UploadTask.prototype.addObserver_ = function (observer) {\r\n        this.observers_.push(observer);\r\n        this.notifyObserver_(observer);\r\n    };\r\n    /**\r\n     * Removes the given observer.\r\n     */\r\n    UploadTask.prototype.removeObserver_ = function (observer) {\r\n        var i = this.observers_.indexOf(observer);\r\n        if (i !== -1) {\r\n            this.observers_.splice(i, 1);\r\n        }\r\n    };\r\n    UploadTask.prototype.notifyObservers_ = function () {\r\n        var _this = this;\r\n        this.finishPromise_();\r\n        var observers = this.observers_.slice();\r\n        observers.forEach(function (observer) {\r\n            _this.notifyObserver_(observer);\r\n        });\r\n    };\r\n    UploadTask.prototype.finishPromise_ = function () {\r\n        if (this.resolve_ !== null) {\r\n            var triggered = true;\r\n            switch (taskStateFromInternalTaskState(this.state_)) {\r\n                case TaskState.SUCCESS:\r\n                    async(this.resolve_.bind(null, this.snapshot))();\r\n                    break;\r\n                case TaskState.CANCELED:\r\n                case TaskState.ERROR:\r\n                    var toCall = this.reject_;\r\n                    async(toCall.bind(null, this.error_))();\r\n                    break;\r\n                default:\r\n                    triggered = false;\r\n                    break;\r\n            }\r\n            if (triggered) {\r\n                this.resolve_ = null;\r\n                this.reject_ = null;\r\n            }\r\n        }\r\n    };\r\n    UploadTask.prototype.notifyObserver_ = function (observer) {\r\n        var externalState = taskStateFromInternalTaskState(this.state_);\r\n        switch (externalState) {\r\n            case TaskState.RUNNING:\r\n            case TaskState.PAUSED:\r\n                if (observer.next) {\r\n                    async(observer.next.bind(observer, this.snapshot))();\r\n                }\r\n                break;\r\n            case TaskState.SUCCESS:\r\n                if (observer.complete) {\r\n                    async(observer.complete.bind(observer))();\r\n                }\r\n                break;\r\n            case TaskState.CANCELED:\r\n            case TaskState.ERROR:\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this.error_))();\r\n                }\r\n                break;\r\n            default:\r\n                // TODO(andysoto): assert(false);\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this.error_))();\r\n                }\r\n        }\r\n    };\r\n    /**\r\n     * Resumes a paused task. Has no effect on a currently running or failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.resume = function () {\r\n        validate('resume', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.PAUSED ||\r\n            this.state_ === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.RUNNING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Pauses a currently running task. Has no effect on a paused or failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.pause = function () {\r\n        validate('pause', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.RUNNING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.PAUSING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Cancels a currently running or paused task. Has no effect on a complete or\r\n     * failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.cancel = function () {\r\n        validate('cancel', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.RUNNING ||\r\n            this.state_ === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.CANCELING);\r\n        }\r\n        return valid;\r\n    };\r\n    return UploadTask;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provides methods to interact with a bucket in the Firebase Storage service.\r\n * @param location An fbs.location, or the URL at\r\n *     which to base this object, in one of the following forms:\r\n *         gs://<bucket>/<object-path>\r\n *         http[s]://firebasestorage.googleapis.com/\r\n *                     <api-version>/b/<bucket>/o/<object-path>\r\n *     Any query or fragment strings will be ignored in the http[s]\r\n *     format. If no value is passed, the storage object will use a URL based on\r\n *     the project ID of the base firebase.App instance.\r\n */\r\nvar Reference = /** @class */ (function () {\r\n    function Reference(service, location) {\r\n        this.service = service;\r\n        if (location instanceof Location) {\r\n            this.location = location;\r\n        }\r\n        else {\r\n            this.location = Location.makeFromUrl(location);\r\n        }\r\n    }\r\n    /**\r\n     * @return The URL for the bucket and path this object references,\r\n     *     in the form gs://<bucket>/<object-path>\r\n     * @override\r\n     */\r\n    Reference.prototype.toString = function () {\r\n        validate('toString', [], arguments);\r\n        return 'gs://' + this.location.bucket + '/' + this.location.path;\r\n    };\r\n    Reference.prototype.newRef = function (service, location) {\r\n        return new Reference(service, location);\r\n    };\r\n    Reference.prototype.mappings = function () {\r\n        return getMappings();\r\n    };\r\n    /**\r\n     * @return A reference to the object obtained by\r\n     *     appending childPath, removing any duplicate, beginning, or trailing\r\n     *     slashes.\r\n     */\r\n    Reference.prototype.child = function (childPath) {\r\n        validate('child', [stringSpec()], arguments);\r\n        var newPath = child(this.location.path, childPath);\r\n        var location = new Location(this.location.bucket, newPath);\r\n        return this.newRef(this.service, location);\r\n    };\r\n    Object.defineProperty(Reference.prototype, \"parent\", {\r\n        /**\r\n         * @return A reference to the parent of the\r\n         *     current object, or null if the current object is the root.\r\n         */\r\n        get: function () {\r\n            var newPath = parent(this.location.path);\r\n            if (newPath === null) {\r\n                return null;\r\n            }\r\n            var location = new Location(this.location.bucket, newPath);\r\n            return this.newRef(this.service, location);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"root\", {\r\n        /**\r\n         * @return An reference to the root of this\r\n         *     object's bucket.\r\n         */\r\n        get: function () {\r\n            var location = new Location(this.location.bucket, '');\r\n            return this.newRef(this.service, location);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"bucket\", {\r\n        get: function () {\r\n            return this.location.bucket;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"fullPath\", {\r\n        get: function () {\r\n            return this.location.path;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"name\", {\r\n        get: function () {\r\n            return lastComponent(this.location.path);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"storage\", {\r\n        get: function () {\r\n            return this.service;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Uploads a blob to this object's location.\r\n     * @param data The blob to upload.\r\n     * @return An UploadTask that lets you control and\r\n     *     observe the upload.\r\n     */\r\n    Reference.prototype.put = function (data, metadata) {\r\n        if (metadata === void 0) { metadata = null; }\r\n        validate('put', [uploadDataSpec(), metadataSpec(true)], arguments);\r\n        this.throwIfRoot_('put');\r\n        return new UploadTask(this, this.service, this.location, this.mappings(), new FbsBlob(data), metadata);\r\n    };\r\n    /**\r\n     * Uploads a string to this object's location.\r\n     * @param value The string to upload.\r\n     * @param format The format of the string to upload.\r\n     * @return An UploadTask that lets you control and\r\n     *     observe the upload.\r\n     */\r\n    Reference.prototype.putString = function (value, format, metadata) {\r\n        if (format === void 0) { format = StringFormat.RAW; }\r\n        validate('putString', [stringSpec(), stringSpec(formatValidator, true), metadataSpec(true)], arguments);\r\n        this.throwIfRoot_('putString');\r\n        var data = dataFromString(format, value);\r\n        var metadataClone = Object.assign({}, metadata);\r\n        if (!isDef(metadataClone['contentType']) &&\r\n            isDef(data.contentType)) {\r\n            metadataClone['contentType'] = data.contentType;\r\n        }\r\n        return new UploadTask(this, this.service, this.location, this.mappings(), new FbsBlob(data.data, true), metadataClone);\r\n    };\r\n    /**\r\n     * Deletes the object at this location.\r\n     * @return A promise that resolves if the deletion succeeds.\r\n     */\r\n    Reference.prototype.delete = function () {\r\n        var _this = this;\r\n        validate('delete', [], arguments);\r\n        this.throwIfRoot_('delete');\r\n        return this.service.getAuthToken().then(function (authToken) {\r\n            var requestInfo = deleteObject(_this.service, _this.location);\r\n            return _this.service.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * List all items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * This is a helper method for calling list() repeatedly until there are\r\n     * no more results. The default pagination size is 1000.\r\n     *\r\n     * Note: The results may not be consistent if objects are changed while this\r\n     * operation is running.\r\n     *\r\n     * Warning: listAll may potentially consume too many resources if there are\r\n     * too many results.\r\n     *\r\n     * @return A Promise that resolves with all the items and prefixes under\r\n     *      the current storage reference. `prefixes` contains references to\r\n     *      sub-directories and `items` contains references to objects in this\r\n     *      folder. `nextPageToken` is never returned.\r\n     */\r\n    Reference.prototype.listAll = function () {\r\n        validate('listAll', [], arguments);\r\n        var accumulator = {\r\n            prefixes: [],\r\n            items: []\r\n        };\r\n        return this.listAllHelper(accumulator).then(function () { return accumulator; });\r\n    };\r\n    Reference.prototype.listAllHelper = function (accumulator, pageToken) {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var opt, nextPage;\r\n            var _a, _b;\r\n            return tslib.__generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        opt = {\r\n                            // maxResults is 1000 by default.\r\n                            pageToken: pageToken\r\n                        };\r\n                        return [4 /*yield*/, this.list(opt)];\r\n                    case 1:\r\n                        nextPage = _c.sent();\r\n                        (_a = accumulator.prefixes).push.apply(_a, nextPage.prefixes);\r\n                        (_b = accumulator.items).push.apply(_b, nextPage.items);\r\n                        if (!(nextPage.nextPageToken != null)) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.listAllHelper(accumulator, nextPage.nextPageToken)];\r\n                    case 2:\r\n                        _c.sent();\r\n                        _c.label = 3;\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * List items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * List API is only available for Firebase Rules Version 2.\r\n     *\r\n     * GCS is a key-blob store. Firebase Storage imposes the semantic of '/'\r\n     * delimited folder structure.\r\n     * Refer to GCS's List API if you want to learn more.\r\n     *\r\n     * To adhere to Firebase Rules's Semantics, Firebase Storage does not\r\n     * support objects whose paths end with \"/\" or contain two consecutive\r\n     * \"/\"s. Firebase Storage List API will filter these unsupported objects.\r\n     * list() may fail if there are too many unsupported objects in the bucket.\r\n     *\r\n     * @param options See ListOptions for details.\r\n     * @return A Promise that resolves with the items and prefixes.\r\n     *      `prefixes` contains references to sub-folders and `items`\r\n     *      contains references to objects in this folder. `nextPageToken`\r\n     *      can be used to get the rest of the results.\r\n     */\r\n    Reference.prototype.list = function (options) {\r\n        validate('list', [listOptionSpec(true)], arguments);\r\n        var self = this;\r\n        return this.service.getAuthToken().then(function (authToken) {\r\n            var op = options || {};\r\n            var requestInfo = list(self.service, self.location, \r\n            /*delimiter= */ '/', op.pageToken, op.maxResults);\r\n            return self.service.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     *     A promise that resolves with the metadata for this object. If this\r\n     *     object doesn't exist or metadata cannot be retreived, the promise is\r\n     *     rejected.\r\n     */\r\n    Reference.prototype.getMetadata = function () {\r\n        var _this = this;\r\n        validate('getMetadata', [], arguments);\r\n        this.throwIfRoot_('getMetadata');\r\n        return this.service.getAuthToken().then(function (authToken) {\r\n            var requestInfo = getMetadata(_this.service, _this.location, _this.mappings());\r\n            return _this.service.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * Updates the metadata for this object.\r\n     * @param metadata The new metadata for the object.\r\n     *     Only values that have been explicitly set will be changed. Explicitly\r\n     *     setting a value to null will remove the metadata.\r\n     * @return A promise that resolves\r\n     *     with the new metadata for this object.\r\n     *     @see firebaseStorage.Reference.prototype.getMetadata\r\n     */\r\n    Reference.prototype.updateMetadata = function (metadata) {\r\n        var _this = this;\r\n        validate('updateMetadata', [metadataSpec()], arguments);\r\n        this.throwIfRoot_('updateMetadata');\r\n        return this.service.getAuthToken().then(function (authToken) {\r\n            var requestInfo = updateMetadata(_this.service, _this.location, metadata, _this.mappings());\r\n            return _this.service.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * @return A promise that resolves with the download\r\n     *     URL for this object.\r\n     */\r\n    Reference.prototype.getDownloadURL = function () {\r\n        var _this = this;\r\n        validate('getDownloadURL', [], arguments);\r\n        this.throwIfRoot_('getDownloadURL');\r\n        return this.service.getAuthToken().then(function (authToken) {\r\n            var requestInfo = getDownloadUrl(_this.service, _this.location, _this.mappings());\r\n            return _this.service\r\n                .makeRequest(requestInfo, authToken)\r\n                .getPromise()\r\n                .then(function (url) {\r\n                if (url === null) {\r\n                    throw noDownloadURL();\r\n                }\r\n                return url;\r\n            });\r\n        });\r\n    };\r\n    Reference.prototype.throwIfRoot_ = function (name) {\r\n        if (this.location.path === '') {\r\n            throw invalidRootOperation(name);\r\n        }\r\n    };\r\n    return Reference;\r\n}());\n\n/**\r\n * A request whose promise always fails.\r\n * @struct\r\n * @template T\r\n */\r\nvar FailRequest = /** @class */ (function () {\r\n    function FailRequest(error) {\r\n        this.promise_ = Promise.reject(error);\r\n    }\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.cancel = function (_appDelete) {\r\n    };\r\n    return FailRequest;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param f May be invoked\r\n *     before the function returns.\r\n * @param callback Get all the arguments passed to the function\r\n *     passed to f, including the initial boolean.\r\n */\r\nfunction start(f, callback, timeout) {\r\n    // TODO(andysoto): make this code cleaner (probably refactor into an actual\r\n    // type instead of a bunch of functions with state shared in the closure)\r\n    var waitSeconds = 1;\r\n    // Would type this as \"number\" but that doesn't work for Node so \u00af\\_(\u30c4)_/\u00af\r\n    // TODO: find a way to exclude Node type definition for storage because storage only works in browser\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    var timeoutId = null;\r\n    var hitTimeout = false;\r\n    var cancelState = 0;\r\n    function canceled() {\r\n        return cancelState === 2;\r\n    }\r\n    var triggeredCallback = false;\r\n    // TODO: This disable can be removed and the 'ignoreRestArgs' option added to\r\n    // the no-explicit-any rule when ESlint releases it.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    function triggerCallback() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (!triggeredCallback) {\r\n            triggeredCallback = true;\r\n            callback.apply(null, args);\r\n        }\r\n    }\r\n    function callWithDelay(millis) {\r\n        timeoutId = setTimeout(function () {\r\n            timeoutId = null;\r\n            f(handler, canceled());\r\n        }, millis);\r\n    }\r\n    // TODO: This disable can be removed and the 'ignoreRestArgs' option added to\r\n    // the no-explicit-any rule when ESlint releases it.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    function handler(success) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (success) {\r\n            triggerCallback.call.apply(triggerCallback, tslib.__spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        var mustStop = canceled() || hitTimeout;\r\n        if (mustStop) {\r\n            triggerCallback.call.apply(triggerCallback, tslib.__spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        if (waitSeconds < 64) {\r\n            /* TODO(andysoto): don't back off so quickly if we know we're offline. */\r\n            waitSeconds *= 2;\r\n        }\r\n        var waitMillis;\r\n        if (cancelState === 1) {\r\n            cancelState = 2;\r\n            waitMillis = 0;\r\n        }\r\n        else {\r\n            waitMillis = (waitSeconds + Math.random()) * 1000;\r\n        }\r\n        callWithDelay(waitMillis);\r\n    }\r\n    var stopped = false;\r\n    function stop(wasTimeout) {\r\n        if (stopped) {\r\n            return;\r\n        }\r\n        stopped = true;\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (timeoutId !== null) {\r\n            if (!wasTimeout) {\r\n                cancelState = 2;\r\n            }\r\n            clearTimeout(timeoutId);\r\n            callWithDelay(0);\r\n        }\r\n        else {\r\n            if (!wasTimeout) {\r\n                cancelState = 1;\r\n            }\r\n        }\r\n    }\r\n    callWithDelay(0);\r\n    setTimeout(function () {\r\n        hitTimeout = true;\r\n        stop(true);\r\n    }, timeout);\r\n    return stop;\r\n}\r\n/**\r\n * Stops the retry loop from repeating.\r\n * If the function is currently \"in between\" retries, it is invoked immediately\r\n * with the second parameter as \"true\". Otherwise, it will be invoked once more\r\n * after the current invocation finishes iff the current invocation would have\r\n * triggered another retry.\r\n */\r\nfunction stop(id) {\r\n    id(false);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n * @template T\r\n */\r\nvar NetworkRequest = /** @class */ (function () {\r\n    function NetworkRequest(url, method, headers, body, successCodes, additionalRetryCodes, callback, errorCallback, timeout, progressCallback, pool) {\r\n        var _this = this;\r\n        this.pendingXhr_ = null;\r\n        this.backoffId_ = null;\r\n        this.resolve_ = null;\r\n        this.reject_ = null;\r\n        this.canceled_ = false;\r\n        this.appDelete_ = false;\r\n        this.url_ = url;\r\n        this.method_ = method;\r\n        this.headers_ = headers;\r\n        this.body_ = body;\r\n        this.successCodes_ = successCodes.slice();\r\n        this.additionalRetryCodes_ = additionalRetryCodes.slice();\r\n        this.callback_ = callback;\r\n        this.errorCallback_ = errorCallback;\r\n        this.progressCallback_ = progressCallback;\r\n        this.timeout_ = timeout;\r\n        this.pool_ = pool;\r\n        this.promise_ = new Promise(function (resolve, reject) {\r\n            _this.resolve_ = resolve;\r\n            _this.reject_ = reject;\r\n            _this.start_();\r\n        });\r\n    }\r\n    /**\r\n     * Actually starts the retry loop.\r\n     */\r\n    NetworkRequest.prototype.start_ = function () {\r\n        var self = this;\r\n        function doTheRequest(backoffCallback, canceled) {\r\n            if (canceled) {\r\n                backoffCallback(false, new RequestEndStatus(false, null, true));\r\n                return;\r\n            }\r\n            var xhr = self.pool_.createXhrIo();\r\n            self.pendingXhr_ = xhr;\r\n            function progressListener(progressEvent) {\r\n                var loaded = progressEvent.loaded;\r\n                var total = progressEvent.lengthComputable ? progressEvent.total : -1;\r\n                if (self.progressCallback_ !== null) {\r\n                    self.progressCallback_(loaded, total);\r\n                }\r\n            }\r\n            if (self.progressCallback_ !== null) {\r\n                xhr.addUploadProgressListener(progressListener);\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            xhr\r\n                .send(self.url_, self.method_, self.body_, self.headers_)\r\n                .then(function (xhr) {\r\n                if (self.progressCallback_ !== null) {\r\n                    xhr.removeUploadProgressListener(progressListener);\r\n                }\r\n                self.pendingXhr_ = null;\r\n                xhr = xhr;\r\n                var hitServer = xhr.getErrorCode() === ErrorCode.NO_ERROR;\r\n                var status = xhr.getStatus();\r\n                if (!hitServer || self.isRetryStatusCode_(status)) {\r\n                    var wasCanceled = xhr.getErrorCode() === ErrorCode.ABORT;\r\n                    backoffCallback(false, new RequestEndStatus(false, null, wasCanceled));\r\n                    return;\r\n                }\r\n                var successCode = self.successCodes_.indexOf(status) !== -1;\r\n                backoffCallback(true, new RequestEndStatus(successCode, xhr));\r\n            });\r\n        }\r\n        /**\r\n         * @param requestWentThrough True if the request eventually went\r\n         *     through, false if it hit the retry limit or was canceled.\r\n         */\r\n        function backoffDone(requestWentThrough, status) {\r\n            var resolve = self.resolve_;\r\n            var reject = self.reject_;\r\n            var xhr = status.xhr;\r\n            if (status.wasSuccessCode) {\r\n                try {\r\n                    var result = self.callback_(xhr, xhr.getResponseText());\r\n                    if (isJustDef(result)) {\r\n                        resolve(result);\r\n                    }\r\n                    else {\r\n                        resolve();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }\r\n            else {\r\n                if (xhr !== null) {\r\n                    var err = unknown();\r\n                    err.setServerResponseProp(xhr.getResponseText());\r\n                    if (self.errorCallback_) {\r\n                        reject(self.errorCallback_(xhr, err));\r\n                    }\r\n                    else {\r\n                        reject(err);\r\n                    }\r\n                }\r\n                else {\r\n                    if (status.canceled) {\r\n                        var err = self.appDelete_ ? appDeleted() : canceled();\r\n                        reject(err);\r\n                    }\r\n                    else {\r\n                        var err = retryLimitExceeded();\r\n                        reject(err);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.canceled_) {\r\n            backoffDone(false, new RequestEndStatus(false, null, true));\r\n        }\r\n        else {\r\n            this.backoffId_ = start(doTheRequest, backoffDone, this.timeout_);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.cancel = function (appDelete) {\r\n        this.canceled_ = true;\r\n        this.appDelete_ = appDelete || false;\r\n        if (this.backoffId_ !== null) {\r\n            stop(this.backoffId_);\r\n        }\r\n        if (this.pendingXhr_ !== null) {\r\n            this.pendingXhr_.abort();\r\n        }\r\n    };\r\n    NetworkRequest.prototype.isRetryStatusCode_ = function (status) {\r\n        // The codes for which to retry came from this page:\r\n        // https://cloud.google.com/storage/docs/exponential-backoff\r\n        var isFiveHundredCode = status >= 500 && status < 600;\r\n        var extraRetryCodes = [\r\n            // Request Timeout: web server didn't receive full request in time.\r\n            408,\r\n            // Too Many Requests: you're getting rate-limited, basically.\r\n            429\r\n        ];\r\n        var isExtraRetryCode = extraRetryCodes.indexOf(status) !== -1;\r\n        var isRequestSpecificRetryCode = this.additionalRetryCodes_.indexOf(status) !== -1;\r\n        return isFiveHundredCode || isExtraRetryCode || isRequestSpecificRetryCode;\r\n    };\r\n    return NetworkRequest;\r\n}());\r\n/**\r\n * A collection of information about the result of a network request.\r\n * @param opt_canceled Defaults to false.\r\n * @struct\r\n */\r\nvar RequestEndStatus = /** @class */ (function () {\r\n    function RequestEndStatus(wasSuccessCode, xhr, canceled) {\r\n        this.wasSuccessCode = wasSuccessCode;\r\n        this.xhr = xhr;\r\n        this.canceled = !!canceled;\r\n    }\r\n    return RequestEndStatus;\r\n}());\r\nfunction addAuthHeader_(headers, authToken) {\r\n    if (authToken !== null && authToken.length > 0) {\r\n        headers['Authorization'] = 'Firebase ' + authToken;\r\n    }\r\n}\r\nfunction addVersionHeader_(headers) {\r\n    var version = typeof firebase !== 'undefined' ? firebase.SDK_VERSION : 'AppManager';\r\n    headers['X-Firebase-Storage-Version'] = 'webjs/' + version;\r\n}\r\nfunction addGmpidHeader_(headers, appId) {\r\n    if (appId) {\r\n        headers['X-Firebase-GMPID'] = appId;\r\n    }\r\n}\r\n/**\r\n * @template T\r\n */\r\nfunction makeRequest(requestInfo, appId, authToken, pool) {\r\n    var queryPart = makeQueryString(requestInfo.urlParams);\r\n    var url = requestInfo.url + queryPart;\r\n    var headers = Object.assign({}, requestInfo.headers);\r\n    addGmpidHeader_(headers, appId);\r\n    addAuthHeader_(headers, authToken);\r\n    addVersionHeader_(headers);\r\n    return new NetworkRequest(url, requestInfo.method, headers, requestInfo.body, requestInfo.successCodes, requestInfo.additionalRetryCodes, requestInfo.handler, requestInfo.errorHandler, requestInfo.timeout, requestInfo.progressCallback, pool);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A service that provides firebaseStorage.Reference instances.\r\n * @param opt_url gs:// url to a custom Storage Bucket\r\n *\r\n * @struct\r\n */\r\nvar StorageService = /** @class */ (function () {\r\n    function StorageService(app, authProvider, pool, url) {\r\n        var _a;\r\n        this.bucket_ = null;\r\n        this.appId_ = null;\r\n        this.deleted_ = false;\r\n        this.app_ = app;\r\n        this.authProvider_ = authProvider;\r\n        this.maxOperationRetryTime_ = DEFAULT_MAX_OPERATION_RETRY_TIME;\r\n        this.maxUploadRetryTime_ = DEFAULT_MAX_UPLOAD_RETRY_TIME;\r\n        this.requests_ = new Set();\r\n        this.pool_ = pool;\r\n        if (url != null) {\r\n            this.bucket_ = Location.makeFromBucketSpec(url);\r\n        }\r\n        else {\r\n            this.bucket_ = StorageService.extractBucket_((_a = this.app_) === null || _a === void 0 ? void 0 : _a.options);\r\n        }\r\n        this.internals_ = new ServiceInternals(this);\r\n    }\r\n    StorageService.extractBucket_ = function (config) {\r\n        var bucketString = config === null || config === void 0 ? void 0 : config[CONFIG_STORAGE_BUCKET_KEY];\r\n        if (bucketString == null) {\r\n            return null;\r\n        }\r\n        return Location.makeFromBucketSpec(bucketString);\r\n    };\r\n    StorageService.prototype.getAuthToken = function () {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var auth, tokenData;\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        auth = this.authProvider_.getImmediate({ optional: true });\r\n                        if (!auth) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, auth.getToken()];\r\n                    case 1:\r\n                        tokenData = _a.sent();\r\n                        if (tokenData !== null) {\r\n                            return [2 /*return*/, tokenData.accessToken];\r\n                        }\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, null];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Stop running requests and prevent more from being created.\r\n     */\r\n    StorageService.prototype.deleteApp = function () {\r\n        this.deleted_ = true;\r\n        this.app_ = null;\r\n        this.requests_.forEach(function (request) { return request.cancel(); });\r\n        this.requests_.clear();\r\n    };\r\n    /**\r\n     * Returns a new firebaseStorage.Reference object referencing this StorageService\r\n     * at the given Location.\r\n     * @param loc The Location.\r\n     * @return A firebaseStorage.Reference.\r\n     */\r\n    StorageService.prototype.makeStorageReference = function (loc) {\r\n        return new Reference(this, loc);\r\n    };\r\n    StorageService.prototype.makeRequest = function (requestInfo, authToken) {\r\n        var _this = this;\r\n        if (!this.deleted_) {\r\n            var request_1 = makeRequest(requestInfo, this.appId_, authToken, this.pool_);\r\n            this.requests_.add(request_1);\r\n            // Request removes itself from set when complete.\r\n            request_1.getPromise().then(function () { return _this.requests_.delete(request_1); }, function () { return _this.requests_.delete(request_1); });\r\n            return request_1;\r\n        }\r\n        else {\r\n            return new FailRequest(appDeleted());\r\n        }\r\n    };\r\n    /**\r\n     * Returns a firebaseStorage.Reference for the given path in the default\r\n     * bucket.\r\n     */\r\n    StorageService.prototype.ref = function (path) {\r\n        function validator(path) {\r\n            if (typeof path !== 'string') {\r\n                throw 'Path is not a string.';\r\n            }\r\n            if (/^[A-Za-z]+:\\/\\//.test(path)) {\r\n                throw 'Expected child path but got a URL, use refFromURL instead.';\r\n            }\r\n        }\r\n        validate('ref', [stringSpec(validator, true)], arguments);\r\n        if (this.bucket_ == null) {\r\n            throw new Error('No Storage Bucket defined in Firebase Options.');\r\n        }\r\n        var ref = new Reference(this, this.bucket_);\r\n        if (path != null) {\r\n            return ref.child(path);\r\n        }\r\n        else {\r\n            return ref;\r\n        }\r\n    };\r\n    /**\r\n     * Returns a firebaseStorage.Reference object for the given absolute URL,\r\n     * which must be a gs:// or http[s]:// URL.\r\n     */\r\n    StorageService.prototype.refFromURL = function (url) {\r\n        function validator(p) {\r\n            if (typeof p !== 'string') {\r\n                throw 'Path is not a string.';\r\n            }\r\n            if (!/^[A-Za-z]+:\\/\\//.test(p)) {\r\n                throw 'Expected full URL but got a child path, use ref instead.';\r\n            }\r\n            try {\r\n                Location.makeFromUrl(p);\r\n            }\r\n            catch (e) {\r\n                throw 'Expected valid full URL but got an invalid one.';\r\n            }\r\n        }\r\n        validate('refFromURL', [stringSpec(validator, false)], arguments);\r\n        return new Reference(this, url);\r\n    };\r\n    Object.defineProperty(StorageService.prototype, \"maxUploadRetryTime\", {\r\n        get: function () {\r\n            return this.maxUploadRetryTime_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    StorageService.prototype.setMaxUploadRetryTime = function (time) {\r\n        validate('setMaxUploadRetryTime', [nonNegativeNumberSpec()], arguments);\r\n        this.maxUploadRetryTime_ = time;\r\n    };\r\n    Object.defineProperty(StorageService.prototype, \"maxOperationRetryTime\", {\r\n        get: function () {\r\n            return this.maxOperationRetryTime_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    StorageService.prototype.setMaxOperationRetryTime = function (time) {\r\n        validate('setMaxOperationRetryTime', [nonNegativeNumberSpec()], arguments);\r\n        this.maxOperationRetryTime_ = time;\r\n    };\r\n    Object.defineProperty(StorageService.prototype, \"app\", {\r\n        get: function () {\r\n            return this.app_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StorageService.prototype, \"INTERNAL\", {\r\n        get: function () {\r\n            return this.internals_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return StorageService;\r\n}());\r\n/**\r\n * @struct\r\n */\r\nvar ServiceInternals = /** @class */ (function () {\r\n    function ServiceInternals(service) {\r\n        this.service_ = service;\r\n    }\r\n    /**\r\n     * Called when the associated app is deleted.\r\n     */\r\n    ServiceInternals.prototype.delete = function () {\r\n        this.service_.deleteApp();\r\n        return Promise.resolve();\r\n    };\r\n    return ServiceInternals;\r\n}());\n\nvar name = \"@firebase/storage\";\nvar version = \"0.3.42\";\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Type constant for Firebase Storage.\r\n */\r\nvar STORAGE_TYPE = 'storage';\r\nfunction factory(container, url) {\r\n    // Dependencies\r\n    var app = container.getProvider('app').getImmediate();\r\n    var authProvider = container.getProvider('auth-internal');\r\n    return new StorageService(app, authProvider, new XhrIoPool(), url);\r\n}\r\nfunction registerStorage(instance) {\r\n    var namespaceExports = {\r\n        // no-inline\r\n        TaskState: TaskState,\r\n        TaskEvent: TaskEvent,\r\n        StringFormat: StringFormat,\r\n        Storage: StorageService,\r\n        Reference: Reference\r\n    };\r\n    instance.INTERNAL.registerComponent(new component.Component(STORAGE_TYPE, factory, \"PUBLIC\" /* PUBLIC */)\r\n        .setServiceProps(namespaceExports)\r\n        .setMultipleInstances(true));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterStorage(firebase);\n\nexports.registerStorage = registerStorage;\n//# sourceMappingURL=index.cjs.js.map\n\n};"],
"names":["shadow$provide","global","require","module","exports","unknown","FirebaseStorageError","Code","UNKNOWN","message","canceled","CANCELED","cannotSliceBlob","CANNOT_SLICE_BLOB","invalidArgument","index","fnName","INVALID_ARGUMENT","appDeleted","APP_DELETED","invalidFormat","format","INVALID_FORMAT","internalError","INTERNAL_ERROR","formatValidator","stringFormat","StringFormat","RAW","BASE64","BASE64URL","DATA_URL","dataFromString","stringData","StringData","utf8Bytes_","base64Bytes_","parts","DataURLParts","base64","decoded","decodeURIComponent","value","e","contentType","b","i","length","c","charCodeAt","push","lo","hi","Uint8Array","hasMinus","indexOf","hasUnder","invalidChar","hasPlus","hasSlash","replace","bytes","atob","array","taskStateFromInternalTaskState","state","InternalTaskState","RUNNING","PAUSING","CANCELING","TaskState","PAUSED","SUCCESS","ERROR","isJustDef","p","isObject","isString","String","isNumber","Number","isNativeBlob","isNativeBlobDefined","Blob","getBlob","args","_i","arguments","BlobBuilder","WebKitBlobBuilder","undefined","bb","append","Error","jsonObjectOrNull","s","obj","JSON","parse","Array","isArray","child","path","childPath","canonicalChildPath","split","filter","component","join","lastComponent","lastIndexOf","slice","makeUrl","urlPart","makeQueryString","params","encode","encodeURIComponent","queryPart","key","hasOwnProperty","nextPart","noXform_","metadata","getMappings","mappings_","mappings","Mapping","nameMapping","xform","mappingsXformPath","_metadata","fullPath","sizeMapping","xformSize","size","addRef","service","Object","defineProperty","get","generateRef","loc","Location","bucket","makeStorageReference","fromResourceString","resourceString","len","mapping","local","server","downloadUrlFromResourceString","tokens","tokensList","urls","map","token","base","queryString","alt","toResourceString","resource","writable","stringify","metadataValidator","val","listOptionsValidator","MAX_RESULTS_KEY","isInteger","PAGE_TOKEN_KEY","handlerCheck","cndn","metadataHandler","handler","xhr","text","listHandler","listResult","prefixes","items","nextPageToken","PREFIXES_KEY","_a","pathWithoutTrailingSlash","reference","ITEMS_KEY","_b","_c","item","downloadUrlHandler","sharedErrorHandler","location","errorHandler","err","getStatus","UNAUTHENTICATED","QUOTA_EXCEEDED","UNAUTHORIZED","newErr","setServerResponseProp","serverResponseProp","objectErrorHandler","shared","OBJECT_NOT_FOUND","getMetadata","fullServerUrl","url","timeout","maxOperationRetryTime","requestInfo","RequestInfo","method","getDownloadUrl","deleteObject","_xhr","_text","successCodes","metadataForUpload_","blob","metadataClone","assign","type","multipartUpload","bucketOnlyServerUrl","headers","str","Math","random","toString","boundary","metadata_","metadataString","body","FbsBlob","urlParams","name","maxUploadRetryTime","uploadData","checkResumeHeader_","allowed","status","getResponseHeader","allowedStatus","createResumableUpload","metadataForUpload","getResumableUploadStatus","sizeString","isNaN","ResumableUploadStatus","continueResumableUpload","chunkSize","progressCallback","status_","current","total","SERVER_FILE_WRONG_SIZE","bytesToUpload","bytesLeft","min","startByte","uploadCommand","uploadStatus","newCurrent","validate","specs","passed","minArgs","maxArgs","optional","countPart","plural","INVALID_ARGUMENT_COUNT","validator","and_","v1","v2","stringSpec","stringValidator","chainedValidator","ArgSpec","uploadDataSpec","ArrayBuffer","nonNegativeNumberSpec","looseObjectSpec","isLooseObjectValidator","nullFunctionSpec","async","f","argsToForward","Promise","resolve","then","apply","start","callback","triggerCallback","triggeredCallback","callWithDelay","millis","timeoutId","setTimeout","cancelState","success","call","tslib","__spreadArrays","hitTimeout","waitSeconds","waitMillis","stop","wasTimeout","stopped","clearTimeout","makeRequest","appId","authToken","pool","version","firebase","SDK_VERSION","NetworkRequest","additionalRetryCodes","factory","container","app","getProvider","getImmediate","authProvider","StorageService","XhrIoPool","registerStorage","instance","namespaceExports","TaskEvent","Storage","Reference","INTERNAL","registerComponent","Component","STORAGE_TYPE","setServiceProps","setMultipleInstances","registerVersion","_interopDefault","ex","code","code_","message_","serverResponse_","name_","prototype","codeProp","FirebaseStorageError.prototype.codeProp","codeEquals","FirebaseStorageError.prototype.codeEquals","FirebaseStorageError.prototype.serverResponseProp","FirebaseStorageError.prototype.setServerResponseProp","serverResponse","enumerable","configurable","BUCKET_NOT_FOUND","PROJECT_NOT_FOUND","RETRY_LIMIT_EXCEEDED","INVALID_CHECKSUM","INVALID_EVENT_NAME","INVALID_URL","INVALID_DEFAULT_BUCKET","NO_DEFAULT_BUCKET","NO_DOWNLOAD_URL","INVALID_ROOT_OPERATION","data","dataURL","matches","match","middle","end","substring","rest","STATE_CHANGED","ErrorCode","NetworkXhrIo","_this","sent_","xhr_","XMLHttpRequest","errorCode_","NO_ERROR","sendPromise_","addEventListener","ABORT","NETWORK_ERROR","send","NetworkXhrIo.prototype.send","open","setRequestHeader","getErrorCode","NetworkXhrIo.prototype.getErrorCode","NetworkXhrIo.prototype.getStatus","getResponseText","NetworkXhrIo.prototype.getResponseText","responseText","abort","NetworkXhrIo.prototype.abort","NetworkXhrIo.prototype.getResponseHeader","header","addUploadProgressListener","NetworkXhrIo.prototype.addUploadProgressListener","listener","upload","removeUploadProgressListener","NetworkXhrIo.prototype.removeUploadProgressListener","removeEventListener","createXhrIo","XhrIoPool.prototype.createXhrIo","elideCopy","blobType","data_","byteLength","set","size_","type_","FbsBlob.prototype.size","FbsBlob.prototype.type","FbsBlob.prototype.slice","endByte","realBlob","webkitSlice","mozSlice","sliced","buffer","FbsBlob.getBlob","blobby","uint8Arrays","finalLength_1","forEach","merged_1","index_1","FbsBlob.prototype.uploadData","path_","Location.prototype.fullServerUrl","Location.prototype.bucketOnlyServerUrl","makeFromBucketSpec","Location.makeFromBucketSpec","bucketString","bucketLocation","makeFromUrl","Location.makeFromUrl","httpModify","firebaseStorageHost","DEFAULT_HOST","groups","regex","gsRegex","indices","gsIndices","postModify","gsModify","charAt","firebaseStorageRegExp","RegExp","firebaseStorageIndices","cloudStorageRegExp","cloudStorageIndices","group","captures","exec","bucketValue","pathValue","finalized","Observer","nextOrObserver","error","complete","next","UploadTaskSnapshot","bytesTransferred","totalBytes","task","ref","self","this.validator","UploadTask","transferred_","needToFetchMetadata_","needToFetchStatus_","observers_","request_","uploadUrl_","error_","chunkMultiplier_","reject_","resolve_","ref_","service_","location_","blob_","resumable_","shouldDoResumable_","state_","errorHandler_","this.errorHandler_","completeTransitions_","transition_","metadataErrorHandler_","this.metadataErrorHandler_","promise_","reject","start_","makeProgressCallback_","UploadTask.prototype.makeProgressCallback_","sizeBefore","loaded","updateProgress_","UploadTask.prototype.shouldDoResumable_","UploadTask.prototype.start_","createResumable_","fetchStatus_","fetchMetadata_","continueUpload_","oneShotUpload_","resolveToken_","UploadTask.prototype.resolveToken_","getAuthToken","UploadTask.prototype.createResumable_","createRequest","getPromise","UploadTask.prototype.fetchStatus_","statusRequest","UploadTask.prototype.continueUpload_","resumableUploadChunkSize","uploadRequest","newStatus","increaseMultiplier_","UploadTask.prototype.increaseMultiplier_","UploadTask.prototype.fetchMetadata_","metadataRequest","UploadTask.prototype.oneShotUpload_","multipartRequest","UploadTask.prototype.updateProgress_","transferred","old","notifyObservers_","UploadTask.prototype.transition_","cancel","wasPaused","UploadTask.prototype.completeTransitions_","externalState","on","UploadTask.prototype.on","completed","nextOrObserverValidator","nextValidator","observerValidator","nextOrObserverMessage","makeBinder","binder","observer","addObserver_","removeObserver_","typeValidator","binderSpecs","binderNextOrObserverValidator","UploadTask.prototype.then","onFulfilled","onRejected","catch","UploadTask.prototype.catch","UploadTask.prototype.addObserver_","notifyObserver_","UploadTask.prototype.removeObserver_","splice","UploadTask.prototype.notifyObservers_","finishPromise_","observers","UploadTask.prototype.finishPromise_","triggered","bind","snapshot","UploadTask.prototype.notifyObserver_","resume","UploadTask.prototype.resume","valid","pause","UploadTask.prototype.pause","UploadTask.prototype.cancel","Reference.prototype.toString","newRef","Reference.prototype.newRef","Reference.prototype.mappings","Reference.prototype.child","newPath","put","Reference.prototype.put","throwIfRoot_","putString","Reference.prototype.putString","delete","Reference.prototype.delete","listAll","Reference.prototype.listAll","accumulator","listAllHelper","Reference.prototype.listAllHelper","pageToken","__awaiter","opt","nextPage","__generator","label","list","sent","Reference.prototype.list","options","op","maxResults","isRoot","delimiter","Reference.prototype.getMetadata","updateMetadata","Reference.prototype.updateMetadata","getDownloadURL","Reference.prototype.getDownloadURL","Reference.prototype.throwIfRoot_","FailRequest","FailRequest.prototype.getPromise","FailRequest.prototype.cancel","_appDelete","errorCallback","backoffId_","pendingXhr_","appDelete_","canceled_","url_","method_","headers_","body_","successCodes_","additionalRetryCodes_","callback_","errorCallback_","progressCallback_","timeout_","pool_","NetworkRequest.prototype.start_","doTheRequest","backoffCallback","progressListener","progressEvent","lengthComputable","RequestEndStatus","hitServer","isRetryStatusCode_","wasCanceled","successCode","backoffDone","requestWentThrough","wasSuccessCode","result","NetworkRequest.prototype.getPromise","NetworkRequest.prototype.cancel","appDelete","NetworkRequest.prototype.isRetryStatusCode_","isFiveHundredCode","isExtraRetryCode","extraRetryCodes","isRequestSpecificRetryCode","appId_","bucket_","deleted_","app_","authProvider_","maxOperationRetryTime_","DEFAULT_MAX_OPERATION_RETRY_TIME","maxUploadRetryTime_","DEFAULT_MAX_UPLOAD_RETRY_TIME","requests_","Set","extractBucket_","internals_","ServiceInternals","StorageService.extractBucket_","config","CONFIG_STORAGE_BUCKET_KEY","StorageService.prototype.getAuthToken","auth","tokenData","getToken","accessToken","deleteApp","StorageService.prototype.deleteApp","request","clear","StorageService.prototype.makeStorageReference","StorageService.prototype.makeRequest","request_1","add","StorageService.prototype.ref","test","refFromURL","StorageService.prototype.refFromURL","setMaxUploadRetryTime","StorageService.prototype.setMaxUploadRetryTime","time","setMaxOperationRetryTime","StorageService.prototype.setMaxOperationRetryTime","ServiceInternals.prototype.delete"]
}
