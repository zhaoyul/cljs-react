{
"version":3,
"file":"module$node_modules$$firebase$installations$dist$index_cjs.js",
"lineCount":39,
"mappings":"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",
"sources":["node_modules/@firebase/installations/dist/index.cjs.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$firebase$installations$dist$index_cjs\"] = function(global,require,module,exports) {\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar firebase = _interopDefault(require('@firebase/app'));\nvar component = require('@firebase/component');\nvar tslib = require('tslib');\nvar util = require('@firebase/util');\nvar idb = require('idb');\n\nvar name = \"@firebase/installations\";\nvar version = \"0.4.16\";\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar PENDING_TIMEOUT_MS = 10000;\r\nvar PACKAGE_VERSION = \"w:\" + version;\r\nvar INTERNAL_AUTH_VERSION = 'FIS_v2';\r\nvar INSTALLATIONS_API_URL = 'https://firebaseinstallations.googleapis.com/v1';\r\nvar TOKEN_EXPIRATION_BUFFER = 60 * 60 * 1000; // One hour\r\nvar SERVICE = 'installations';\r\nvar SERVICE_NAME = 'Installations';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar _a;\r\nvar ERROR_DESCRIPTION_MAP = (_a = {},\r\n    _a[\"missing-app-config-values\" /* MISSING_APP_CONFIG_VALUES */] = 'Missing App configuration value: \"{$valueName}\"',\r\n    _a[\"not-registered\" /* NOT_REGISTERED */] = 'Firebase Installation is not registered.',\r\n    _a[\"installation-not-found\" /* INSTALLATION_NOT_FOUND */] = 'Firebase Installation not found.',\r\n    _a[\"request-failed\" /* REQUEST_FAILED */] = '{$requestName} request failed with error \"{$serverCode} {$serverStatus}: {$serverMessage}\"',\r\n    _a[\"app-offline\" /* APP_OFFLINE */] = 'Could not process request. Application offline.',\r\n    _a[\"delete-pending-registration\" /* DELETE_PENDING_REGISTRATION */] = \"Can't delete installation while there is a pending registration request.\",\r\n    _a);\r\nvar ERROR_FACTORY = new util.ErrorFactory(SERVICE, SERVICE_NAME, ERROR_DESCRIPTION_MAP);\r\n/** Returns true if error is a FirebaseError that is based on an error from the server. */\r\nfunction isServerError(error) {\r\n    return (error instanceof util.FirebaseError &&\r\n        error.code.includes(\"request-failed\" /* REQUEST_FAILED */));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getInstallationsEndpoint(_a) {\r\n    var projectId = _a.projectId;\r\n    return INSTALLATIONS_API_URL + \"/projects/\" + projectId + \"/installations\";\r\n}\r\nfunction extractAuthTokenInfoFromResponse(response) {\r\n    return {\r\n        token: response.token,\r\n        requestStatus: 2 /* COMPLETED */,\r\n        expiresIn: getExpiresInFromResponseExpiresIn(response.expiresIn),\r\n        creationTime: Date.now()\r\n    };\r\n}\r\nfunction getErrorFromResponse(requestName, response) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var responseJson, errorData;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, response.json()];\r\n                case 1:\r\n                    responseJson = _a.sent();\r\n                    errorData = responseJson.error;\r\n                    return [2 /*return*/, ERROR_FACTORY.create(\"request-failed\" /* REQUEST_FAILED */, {\r\n                            requestName: requestName,\r\n                            serverCode: errorData.code,\r\n                            serverMessage: errorData.message,\r\n                            serverStatus: errorData.status\r\n                        })];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction getHeaders(_a) {\r\n    var apiKey = _a.apiKey;\r\n    return new Headers({\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        'x-goog-api-key': apiKey\r\n    });\r\n}\r\nfunction getHeadersWithAuth(appConfig, _a) {\r\n    var refreshToken = _a.refreshToken;\r\n    var headers = getHeaders(appConfig);\r\n    headers.append('Authorization', getAuthorizationHeader(refreshToken));\r\n    return headers;\r\n}\r\n/**\r\n * Calls the passed in fetch wrapper and returns the response.\r\n * If the returned response has a status of 5xx, re-runs the function once and\r\n * returns the response.\r\n */\r\nfunction retryIfServerError(fn) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var result;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, fn()];\r\n                case 1:\r\n                    result = _a.sent();\r\n                    if (result.status >= 500 && result.status < 600) {\r\n                        // Internal Server Error. Retry request.\r\n                        return [2 /*return*/, fn()];\r\n                    }\r\n                    return [2 /*return*/, result];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction getExpiresInFromResponseExpiresIn(responseExpiresIn) {\r\n    // This works because the server will never respond with fractions of a second.\r\n    return Number(responseExpiresIn.replace('s', '000'));\r\n}\r\nfunction getAuthorizationHeader(refreshToken) {\r\n    return INTERNAL_AUTH_VERSION + \" \" + refreshToken;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction createInstallationRequest(appConfig, _a) {\r\n    var fid = _a.fid;\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var endpoint, headers, body, request, response, responseValue, registeredInstallationEntry;\r\n        return tslib.__generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    endpoint = getInstallationsEndpoint(appConfig);\r\n                    headers = getHeaders(appConfig);\r\n                    body = {\r\n                        fid: fid,\r\n                        authVersion: INTERNAL_AUTH_VERSION,\r\n                        appId: appConfig.appId,\r\n                        sdkVersion: PACKAGE_VERSION\r\n                    };\r\n                    request = {\r\n                        method: 'POST',\r\n                        headers: headers,\r\n                        body: JSON.stringify(body)\r\n                    };\r\n                    return [4 /*yield*/, retryIfServerError(function () { return fetch(endpoint, request); })];\r\n                case 1:\r\n                    response = _b.sent();\r\n                    if (!response.ok) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, response.json()];\r\n                case 2:\r\n                    responseValue = _b.sent();\r\n                    registeredInstallationEntry = {\r\n                        fid: responseValue.fid || fid,\r\n                        registrationStatus: 2 /* COMPLETED */,\r\n                        refreshToken: responseValue.refreshToken,\r\n                        authToken: extractAuthTokenInfoFromResponse(responseValue.authToken)\r\n                    };\r\n                    return [2 /*return*/, registeredInstallationEntry];\r\n                case 3: return [4 /*yield*/, getErrorFromResponse('Create Installation', response)];\r\n                case 4: throw _b.sent();\r\n            }\r\n        });\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** Returns a promise that resolves after given time passes. */\r\nfunction sleep(ms) {\r\n    return new Promise(function (resolve) {\r\n        setTimeout(resolve, ms);\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction bufferToBase64UrlSafe(array) {\r\n    var b64 = btoa(String.fromCharCode.apply(String, tslib.__spread(array)));\r\n    return b64.replace(/\\+/g, '-').replace(/\\//g, '_');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar VALID_FID_PATTERN = /^[cdef][\\w-]{21}$/;\r\nvar INVALID_FID = '';\r\n/**\r\n * Generates a new FID using random values from Web Crypto API.\r\n * Returns an empty string if FID generation fails for any reason.\r\n */\r\nfunction generateFid() {\r\n    try {\r\n        // A valid FID has exactly 22 base64 characters, which is 132 bits, or 16.5\r\n        // bytes. our implementation generates a 17 byte array instead.\r\n        var fidByteArray = new Uint8Array(17);\r\n        var crypto_1 = self.crypto || self.msCrypto;\r\n        crypto_1.getRandomValues(fidByteArray);\r\n        // Replace the first 4 random bits with the constant FID header of 0b0111.\r\n        fidByteArray[0] = 112 + (fidByteArray[0] % 16);\r\n        var fid = encode(fidByteArray);\r\n        return VALID_FID_PATTERN.test(fid) ? fid : INVALID_FID;\r\n    }\r\n    catch (_a) {\r\n        // FID generation errored\r\n        return INVALID_FID;\r\n    }\r\n}\r\n/** Converts a FID Uint8Array to a base64 string representation. */\r\nfunction encode(fidByteArray) {\r\n    var b64String = bufferToBase64UrlSafe(fidByteArray);\r\n    // Remove the 23rd character that was added because of the extra 4 bits at the\r\n    // end of our 17 byte array, and the '=' padding.\r\n    return b64String.substr(0, 22);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** Returns a string key that can be used to identify the app. */\r\nfunction getKey(appConfig) {\r\n    return appConfig.appName + \"!\" + appConfig.appId;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar fidChangeCallbacks = new Map();\r\n/**\r\n * Calls the onIdChange callbacks with the new FID value, and broadcasts the\r\n * change to other tabs.\r\n */\r\nfunction fidChanged(appConfig, fid) {\r\n    var key = getKey(appConfig);\r\n    callFidChangeCallbacks(key, fid);\r\n    broadcastFidChange(key, fid);\r\n}\r\nfunction addCallback(appConfig, callback) {\r\n    // Open the broadcast channel if it's not already open,\r\n    // to be able to listen to change events from other tabs.\r\n    getBroadcastChannel();\r\n    var key = getKey(appConfig);\r\n    var callbackSet = fidChangeCallbacks.get(key);\r\n    if (!callbackSet) {\r\n        callbackSet = new Set();\r\n        fidChangeCallbacks.set(key, callbackSet);\r\n    }\r\n    callbackSet.add(callback);\r\n}\r\nfunction removeCallback(appConfig, callback) {\r\n    var key = getKey(appConfig);\r\n    var callbackSet = fidChangeCallbacks.get(key);\r\n    if (!callbackSet) {\r\n        return;\r\n    }\r\n    callbackSet.delete(callback);\r\n    if (callbackSet.size === 0) {\r\n        fidChangeCallbacks.delete(key);\r\n    }\r\n    // Close broadcast channel if there are no more callbacks.\r\n    closeBroadcastChannel();\r\n}\r\nfunction callFidChangeCallbacks(key, fid) {\r\n    var e_1, _a;\r\n    var callbacks = fidChangeCallbacks.get(key);\r\n    if (!callbacks) {\r\n        return;\r\n    }\r\n    try {\r\n        for (var callbacks_1 = tslib.__values(callbacks), callbacks_1_1 = callbacks_1.next(); !callbacks_1_1.done; callbacks_1_1 = callbacks_1.next()) {\r\n            var callback = callbacks_1_1.value;\r\n            callback(fid);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (callbacks_1_1 && !callbacks_1_1.done && (_a = callbacks_1.return)) _a.call(callbacks_1);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n}\r\nfunction broadcastFidChange(key, fid) {\r\n    var channel = getBroadcastChannel();\r\n    if (channel) {\r\n        channel.postMessage({ key: key, fid: fid });\r\n    }\r\n    closeBroadcastChannel();\r\n}\r\nvar broadcastChannel = null;\r\n/** Opens and returns a BroadcastChannel if it is supported by the browser. */\r\nfunction getBroadcastChannel() {\r\n    if (!broadcastChannel && 'BroadcastChannel' in self) {\r\n        broadcastChannel = new BroadcastChannel('[Firebase] FID Change');\r\n        broadcastChannel.onmessage = function (e) {\r\n            callFidChangeCallbacks(e.data.key, e.data.fid);\r\n        };\r\n    }\r\n    return broadcastChannel;\r\n}\r\nfunction closeBroadcastChannel() {\r\n    if (fidChangeCallbacks.size === 0 && broadcastChannel) {\r\n        broadcastChannel.close();\r\n        broadcastChannel = null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar DATABASE_NAME = 'firebase-installations-database';\r\nvar DATABASE_VERSION = 1;\r\nvar OBJECT_STORE_NAME = 'firebase-installations-store';\r\nvar dbPromise = null;\r\nfunction getDbPromise() {\r\n    if (!dbPromise) {\r\n        dbPromise = idb.openDb(DATABASE_NAME, DATABASE_VERSION, function (upgradeDB) {\r\n            // We don't use 'break' in this switch statement, the fall-through\r\n            // behavior is what we want, because if there are multiple versions between\r\n            // the old version and the current version, we want ALL the migrations\r\n            // that correspond to those versions to run, not only the last one.\r\n            // eslint-disable-next-line default-case\r\n            switch (upgradeDB.oldVersion) {\r\n                case 0:\r\n                    upgradeDB.createObjectStore(OBJECT_STORE_NAME);\r\n            }\r\n        });\r\n    }\r\n    return dbPromise;\r\n}\r\n/** Assigns or overwrites the record for the given key with the given value. */\r\nfunction set(appConfig, value) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var key, db, tx, objectStore, oldValue;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    key = getKey(appConfig);\r\n                    return [4 /*yield*/, getDbPromise()];\r\n                case 1:\r\n                    db = _a.sent();\r\n                    tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\r\n                    objectStore = tx.objectStore(OBJECT_STORE_NAME);\r\n                    return [4 /*yield*/, objectStore.get(key)];\r\n                case 2:\r\n                    oldValue = _a.sent();\r\n                    return [4 /*yield*/, objectStore.put(value, key)];\r\n                case 3:\r\n                    _a.sent();\r\n                    return [4 /*yield*/, tx.complete];\r\n                case 4:\r\n                    _a.sent();\r\n                    if (!oldValue || oldValue.fid !== value.fid) {\r\n                        fidChanged(appConfig, value.fid);\r\n                    }\r\n                    return [2 /*return*/, value];\r\n            }\r\n        });\r\n    });\r\n}\r\n/** Removes record(s) from the objectStore that match the given key. */\r\nfunction remove(appConfig) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var key, db, tx;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    key = getKey(appConfig);\r\n                    return [4 /*yield*/, getDbPromise()];\r\n                case 1:\r\n                    db = _a.sent();\r\n                    tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\r\n                    return [4 /*yield*/, tx.objectStore(OBJECT_STORE_NAME).delete(key)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [4 /*yield*/, tx.complete];\r\n                case 3:\r\n                    _a.sent();\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Atomically updates a record with the result of updateFn, which gets\r\n * called with the current value. If newValue is undefined, the record is\r\n * deleted instead.\r\n * @return Updated value\r\n */\r\nfunction update(appConfig, updateFn) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var key, db, tx, store, oldValue, newValue;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    key = getKey(appConfig);\r\n                    return [4 /*yield*/, getDbPromise()];\r\n                case 1:\r\n                    db = _a.sent();\r\n                    tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\r\n                    store = tx.objectStore(OBJECT_STORE_NAME);\r\n                    return [4 /*yield*/, store.get(key)];\r\n                case 2:\r\n                    oldValue = _a.sent();\r\n                    newValue = updateFn(oldValue);\r\n                    if (!(newValue === undefined)) return [3 /*break*/, 4];\r\n                    return [4 /*yield*/, store.delete(key)];\r\n                case 3:\r\n                    _a.sent();\r\n                    return [3 /*break*/, 6];\r\n                case 4: return [4 /*yield*/, store.put(newValue, key)];\r\n                case 5:\r\n                    _a.sent();\r\n                    _a.label = 6;\r\n                case 6: return [4 /*yield*/, tx.complete];\r\n                case 7:\r\n                    _a.sent();\r\n                    if (newValue && (!oldValue || oldValue.fid !== newValue.fid)) {\r\n                        fidChanged(appConfig, newValue.fid);\r\n                    }\r\n                    return [2 /*return*/, newValue];\r\n            }\r\n        });\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Updates and returns the InstallationEntry from the database.\r\n * Also triggers a registration request if it is necessary and possible.\r\n */\r\nfunction getInstallationEntry(appConfig) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var registrationPromise, installationEntry, _a;\r\n        return tslib.__generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0: return [4 /*yield*/, update(appConfig, function (oldEntry) {\r\n                        var installationEntry = updateOrCreateInstallationEntry(oldEntry);\r\n                        var entryWithPromise = triggerRegistrationIfNecessary(appConfig, installationEntry);\r\n                        registrationPromise = entryWithPromise.registrationPromise;\r\n                        return entryWithPromise.installationEntry;\r\n                    })];\r\n                case 1:\r\n                    installationEntry = _b.sent();\r\n                    if (!(installationEntry.fid === INVALID_FID)) return [3 /*break*/, 3];\r\n                    _a = {};\r\n                    return [4 /*yield*/, registrationPromise];\r\n                case 2: \r\n                // FID generation failed. Waiting for the FID from the server.\r\n                return [2 /*return*/, (_a.installationEntry = _b.sent(), _a)];\r\n                case 3: return [2 /*return*/, {\r\n                        installationEntry: installationEntry,\r\n                        registrationPromise: registrationPromise\r\n                    }];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Creates a new Installation Entry if one does not exist.\r\n * Also clears timed out pending requests.\r\n */\r\nfunction updateOrCreateInstallationEntry(oldEntry) {\r\n    var entry = oldEntry || {\r\n        fid: generateFid(),\r\n        registrationStatus: 0 /* NOT_STARTED */\r\n    };\r\n    return clearTimedOutRequest(entry);\r\n}\r\n/**\r\n * If the Firebase Installation is not registered yet, this will trigger the\r\n * registration and return an InProgressInstallationEntry.\r\n *\r\n * If registrationPromise does not exist, the installationEntry is guaranteed\r\n * to be registered.\r\n */\r\nfunction triggerRegistrationIfNecessary(appConfig, installationEntry) {\r\n    if (installationEntry.registrationStatus === 0 /* NOT_STARTED */) {\r\n        if (!navigator.onLine) {\r\n            // Registration required but app is offline.\r\n            var registrationPromiseWithError = Promise.reject(ERROR_FACTORY.create(\"app-offline\" /* APP_OFFLINE */));\r\n            return {\r\n                installationEntry: installationEntry,\r\n                registrationPromise: registrationPromiseWithError\r\n            };\r\n        }\r\n        // Try registering. Change status to IN_PROGRESS.\r\n        var inProgressEntry = {\r\n            fid: installationEntry.fid,\r\n            registrationStatus: 1 /* IN_PROGRESS */,\r\n            registrationTime: Date.now()\r\n        };\r\n        var registrationPromise = registerInstallation(appConfig, inProgressEntry);\r\n        return { installationEntry: inProgressEntry, registrationPromise: registrationPromise };\r\n    }\r\n    else if (installationEntry.registrationStatus === 1 /* IN_PROGRESS */) {\r\n        return {\r\n            installationEntry: installationEntry,\r\n            registrationPromise: waitUntilFidRegistration(appConfig)\r\n        };\r\n    }\r\n    else {\r\n        return { installationEntry: installationEntry };\r\n    }\r\n}\r\n/** This will be executed only once for each new Firebase Installation. */\r\nfunction registerInstallation(appConfig, installationEntry) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var registeredInstallationEntry, e_1;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    _a.trys.push([0, 2, , 7]);\r\n                    return [4 /*yield*/, createInstallationRequest(appConfig, installationEntry)];\r\n                case 1:\r\n                    registeredInstallationEntry = _a.sent();\r\n                    return [2 /*return*/, set(appConfig, registeredInstallationEntry)];\r\n                case 2:\r\n                    e_1 = _a.sent();\r\n                    if (!(isServerError(e_1) && e_1.serverCode === 409)) return [3 /*break*/, 4];\r\n                    // Server returned a \"FID can not be used\" error.\r\n                    // Generate a new ID next time.\r\n                    return [4 /*yield*/, remove(appConfig)];\r\n                case 3:\r\n                    // Server returned a \"FID can not be used\" error.\r\n                    // Generate a new ID next time.\r\n                    _a.sent();\r\n                    return [3 /*break*/, 6];\r\n                case 4: \r\n                // Registration failed. Set FID as not registered.\r\n                return [4 /*yield*/, set(appConfig, {\r\n                        fid: installationEntry.fid,\r\n                        registrationStatus: 0 /* NOT_STARTED */\r\n                    })];\r\n                case 5:\r\n                    // Registration failed. Set FID as not registered.\r\n                    _a.sent();\r\n                    _a.label = 6;\r\n                case 6: throw e_1;\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\n/** Call if FID registration is pending in another request. */\r\nfunction waitUntilFidRegistration(appConfig) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var entry, _a, installationEntry, registrationPromise;\r\n        return tslib.__generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0: return [4 /*yield*/, updateInstallationRequest(appConfig)];\r\n                case 1:\r\n                    entry = _b.sent();\r\n                    _b.label = 2;\r\n                case 2:\r\n                    if (!(entry.registrationStatus === 1 /* IN_PROGRESS */)) return [3 /*break*/, 5];\r\n                    // createInstallation request still in progress.\r\n                    return [4 /*yield*/, sleep(100)];\r\n                case 3:\r\n                    // createInstallation request still in progress.\r\n                    _b.sent();\r\n                    return [4 /*yield*/, updateInstallationRequest(appConfig)];\r\n                case 4:\r\n                    entry = _b.sent();\r\n                    return [3 /*break*/, 2];\r\n                case 5:\r\n                    if (!(entry.registrationStatus === 0 /* NOT_STARTED */)) return [3 /*break*/, 7];\r\n                    return [4 /*yield*/, getInstallationEntry(appConfig)];\r\n                case 6:\r\n                    _a = _b.sent(), installationEntry = _a.installationEntry, registrationPromise = _a.registrationPromise;\r\n                    if (registrationPromise) {\r\n                        return [2 /*return*/, registrationPromise];\r\n                    }\r\n                    else {\r\n                        // if there is no registrationPromise, entry is registered.\r\n                        return [2 /*return*/, installationEntry];\r\n                    }\r\n                case 7: return [2 /*return*/, entry];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Called only if there is a CreateInstallation request in progress.\r\n *\r\n * Updates the InstallationEntry in the DB based on the status of the\r\n * CreateInstallation request.\r\n *\r\n * Returns the updated InstallationEntry.\r\n */\r\nfunction updateInstallationRequest(appConfig) {\r\n    return update(appConfig, function (oldEntry) {\r\n        if (!oldEntry) {\r\n            throw ERROR_FACTORY.create(\"installation-not-found\" /* INSTALLATION_NOT_FOUND */);\r\n        }\r\n        return clearTimedOutRequest(oldEntry);\r\n    });\r\n}\r\nfunction clearTimedOutRequest(entry) {\r\n    if (hasInstallationRequestTimedOut(entry)) {\r\n        return {\r\n            fid: entry.fid,\r\n            registrationStatus: 0 /* NOT_STARTED */\r\n        };\r\n    }\r\n    return entry;\r\n}\r\nfunction hasInstallationRequestTimedOut(installationEntry) {\r\n    return (installationEntry.registrationStatus === 1 /* IN_PROGRESS */ &&\r\n        installationEntry.registrationTime + PENDING_TIMEOUT_MS < Date.now());\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction generateAuthTokenRequest(_a, installationEntry) {\r\n    var appConfig = _a.appConfig, platformLoggerProvider = _a.platformLoggerProvider;\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var endpoint, headers, platformLogger, body, request, response, responseValue, completedAuthToken;\r\n        return tslib.__generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    endpoint = getGenerateAuthTokenEndpoint(appConfig, installationEntry);\r\n                    headers = getHeadersWithAuth(appConfig, installationEntry);\r\n                    platformLogger = platformLoggerProvider.getImmediate({\r\n                        optional: true\r\n                    });\r\n                    if (platformLogger) {\r\n                        headers.append('x-firebase-client', platformLogger.getPlatformInfoString());\r\n                    }\r\n                    body = {\r\n                        installation: {\r\n                            sdkVersion: PACKAGE_VERSION\r\n                        }\r\n                    };\r\n                    request = {\r\n                        method: 'POST',\r\n                        headers: headers,\r\n                        body: JSON.stringify(body)\r\n                    };\r\n                    return [4 /*yield*/, retryIfServerError(function () { return fetch(endpoint, request); })];\r\n                case 1:\r\n                    response = _b.sent();\r\n                    if (!response.ok) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, response.json()];\r\n                case 2:\r\n                    responseValue = _b.sent();\r\n                    completedAuthToken = extractAuthTokenInfoFromResponse(responseValue);\r\n                    return [2 /*return*/, completedAuthToken];\r\n                case 3: return [4 /*yield*/, getErrorFromResponse('Generate Auth Token', response)];\r\n                case 4: throw _b.sent();\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction getGenerateAuthTokenEndpoint(appConfig, _a) {\r\n    var fid = _a.fid;\r\n    return getInstallationsEndpoint(appConfig) + \"/\" + fid + \"/authTokens:generate\";\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a valid authentication token for the installation. Generates a new\r\n * token if one doesn't exist, is expired or about to expire.\r\n *\r\n * Should only be called if the Firebase Installation is registered.\r\n */\r\nfunction refreshAuthToken(dependencies, forceRefresh) {\r\n    if (forceRefresh === void 0) { forceRefresh = false; }\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var tokenPromise, entry, authToken, _a;\r\n        return tslib.__generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0: return [4 /*yield*/, update(dependencies.appConfig, function (oldEntry) {\r\n                        if (!isEntryRegistered(oldEntry)) {\r\n                            throw ERROR_FACTORY.create(\"not-registered\" /* NOT_REGISTERED */);\r\n                        }\r\n                        var oldAuthToken = oldEntry.authToken;\r\n                        if (!forceRefresh && isAuthTokenValid(oldAuthToken)) {\r\n                            // There is a valid token in the DB.\r\n                            return oldEntry;\r\n                        }\r\n                        else if (oldAuthToken.requestStatus === 1 /* IN_PROGRESS */) {\r\n                            // There already is a token request in progress.\r\n                            tokenPromise = waitUntilAuthTokenRequest(dependencies, forceRefresh);\r\n                            return oldEntry;\r\n                        }\r\n                        else {\r\n                            // No token or token expired.\r\n                            if (!navigator.onLine) {\r\n                                throw ERROR_FACTORY.create(\"app-offline\" /* APP_OFFLINE */);\r\n                            }\r\n                            var inProgressEntry = makeAuthTokenRequestInProgressEntry(oldEntry);\r\n                            tokenPromise = fetchAuthTokenFromServer(dependencies, inProgressEntry);\r\n                            return inProgressEntry;\r\n                        }\r\n                    })];\r\n                case 1:\r\n                    entry = _b.sent();\r\n                    if (!tokenPromise) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, tokenPromise];\r\n                case 2:\r\n                    _a = _b.sent();\r\n                    return [3 /*break*/, 4];\r\n                case 3:\r\n                    _a = entry.authToken;\r\n                    _b.label = 4;\r\n                case 4:\r\n                    authToken = _a;\r\n                    return [2 /*return*/, authToken];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Call only if FID is registered and Auth Token request is in progress.\r\n *\r\n * Waits until the current pending request finishes. If the request times out,\r\n * tries once in this thread as well.\r\n */\r\nfunction waitUntilAuthTokenRequest(dependencies, forceRefresh) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var entry, authToken;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, updateAuthTokenRequest(dependencies.appConfig)];\r\n                case 1:\r\n                    entry = _a.sent();\r\n                    _a.label = 2;\r\n                case 2:\r\n                    if (!(entry.authToken.requestStatus === 1 /* IN_PROGRESS */)) return [3 /*break*/, 5];\r\n                    // generateAuthToken still in progress.\r\n                    return [4 /*yield*/, sleep(100)];\r\n                case 3:\r\n                    // generateAuthToken still in progress.\r\n                    _a.sent();\r\n                    return [4 /*yield*/, updateAuthTokenRequest(dependencies.appConfig)];\r\n                case 4:\r\n                    entry = _a.sent();\r\n                    return [3 /*break*/, 2];\r\n                case 5:\r\n                    authToken = entry.authToken;\r\n                    if (authToken.requestStatus === 0 /* NOT_STARTED */) {\r\n                        // The request timed out or failed in a different call. Try again.\r\n                        return [2 /*return*/, refreshAuthToken(dependencies, forceRefresh)];\r\n                    }\r\n                    else {\r\n                        return [2 /*return*/, authToken];\r\n                    }\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Called only if there is a GenerateAuthToken request in progress.\r\n *\r\n * Updates the InstallationEntry in the DB based on the status of the\r\n * GenerateAuthToken request.\r\n *\r\n * Returns the updated InstallationEntry.\r\n */\r\nfunction updateAuthTokenRequest(appConfig) {\r\n    return update(appConfig, function (oldEntry) {\r\n        if (!isEntryRegistered(oldEntry)) {\r\n            throw ERROR_FACTORY.create(\"not-registered\" /* NOT_REGISTERED */);\r\n        }\r\n        var oldAuthToken = oldEntry.authToken;\r\n        if (hasAuthTokenRequestTimedOut(oldAuthToken)) {\r\n            return tslib.__assign(tslib.__assign({}, oldEntry), { authToken: { requestStatus: 0 /* NOT_STARTED */ } });\r\n        }\r\n        return oldEntry;\r\n    });\r\n}\r\nfunction fetchAuthTokenFromServer(dependencies, installationEntry) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var authToken, updatedInstallationEntry, e_1, updatedInstallationEntry;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    _a.trys.push([0, 3, , 8]);\r\n                    return [4 /*yield*/, generateAuthTokenRequest(dependencies, installationEntry)];\r\n                case 1:\r\n                    authToken = _a.sent();\r\n                    updatedInstallationEntry = tslib.__assign(tslib.__assign({}, installationEntry), { authToken: authToken });\r\n                    return [4 /*yield*/, set(dependencies.appConfig, updatedInstallationEntry)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, authToken];\r\n                case 3:\r\n                    e_1 = _a.sent();\r\n                    if (!(isServerError(e_1) && (e_1.serverCode === 401 || e_1.serverCode === 404))) return [3 /*break*/, 5];\r\n                    // Server returned a \"FID not found\" or a \"Invalid authentication\" error.\r\n                    // Generate a new ID next time.\r\n                    return [4 /*yield*/, remove(dependencies.appConfig)];\r\n                case 4:\r\n                    // Server returned a \"FID not found\" or a \"Invalid authentication\" error.\r\n                    // Generate a new ID next time.\r\n                    _a.sent();\r\n                    return [3 /*break*/, 7];\r\n                case 5:\r\n                    updatedInstallationEntry = tslib.__assign(tslib.__assign({}, installationEntry), { authToken: { requestStatus: 0 /* NOT_STARTED */ } });\r\n                    return [4 /*yield*/, set(dependencies.appConfig, updatedInstallationEntry)];\r\n                case 6:\r\n                    _a.sent();\r\n                    _a.label = 7;\r\n                case 7: throw e_1;\r\n                case 8: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction isEntryRegistered(installationEntry) {\r\n    return (installationEntry !== undefined &&\r\n        installationEntry.registrationStatus === 2 /* COMPLETED */);\r\n}\r\nfunction isAuthTokenValid(authToken) {\r\n    return (authToken.requestStatus === 2 /* COMPLETED */ &&\r\n        !isAuthTokenExpired(authToken));\r\n}\r\nfunction isAuthTokenExpired(authToken) {\r\n    var now = Date.now();\r\n    return (now < authToken.creationTime ||\r\n        authToken.creationTime + authToken.expiresIn < now + TOKEN_EXPIRATION_BUFFER);\r\n}\r\n/** Returns an updated InstallationEntry with an InProgressAuthToken. */\r\nfunction makeAuthTokenRequestInProgressEntry(oldEntry) {\r\n    var inProgressAuthToken = {\r\n        requestStatus: 1 /* IN_PROGRESS */,\r\n        requestTime: Date.now()\r\n    };\r\n    return tslib.__assign(tslib.__assign({}, oldEntry), { authToken: inProgressAuthToken });\r\n}\r\nfunction hasAuthTokenRequestTimedOut(authToken) {\r\n    return (authToken.requestStatus === 1 /* IN_PROGRESS */ &&\r\n        authToken.requestTime + PENDING_TIMEOUT_MS < Date.now());\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getId(dependencies) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var _a, installationEntry, registrationPromise;\r\n        return tslib.__generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0: return [4 /*yield*/, getInstallationEntry(dependencies.appConfig)];\r\n                case 1:\r\n                    _a = _b.sent(), installationEntry = _a.installationEntry, registrationPromise = _a.registrationPromise;\r\n                    if (registrationPromise) {\r\n                        registrationPromise.catch(console.error);\r\n                    }\r\n                    else {\r\n                        // If the installation is already registered, update the authentication\r\n                        // token if needed.\r\n                        refreshAuthToken(dependencies).catch(console.error);\r\n                    }\r\n                    return [2 /*return*/, installationEntry.fid];\r\n            }\r\n        });\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getToken(dependencies, forceRefresh) {\r\n    if (forceRefresh === void 0) { forceRefresh = false; }\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var authToken;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, completeInstallationRegistration(dependencies.appConfig)];\r\n                case 1:\r\n                    _a.sent();\r\n                    return [4 /*yield*/, refreshAuthToken(dependencies, forceRefresh)];\r\n                case 2:\r\n                    authToken = _a.sent();\r\n                    return [2 /*return*/, authToken.token];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction completeInstallationRegistration(appConfig) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var registrationPromise;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, getInstallationEntry(appConfig)];\r\n                case 1:\r\n                    registrationPromise = (_a.sent()).registrationPromise;\r\n                    if (!registrationPromise) return [3 /*break*/, 3];\r\n                    // A createInstallation request is in progress. Wait until it finishes.\r\n                    return [4 /*yield*/, registrationPromise];\r\n                case 2:\r\n                    // A createInstallation request is in progress. Wait until it finishes.\r\n                    _a.sent();\r\n                    _a.label = 3;\r\n                case 3: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction deleteInstallationRequest(appConfig, installationEntry) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var endpoint, headers, request, response;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    endpoint = getDeleteEndpoint(appConfig, installationEntry);\r\n                    headers = getHeadersWithAuth(appConfig, installationEntry);\r\n                    request = {\r\n                        method: 'DELETE',\r\n                        headers: headers\r\n                    };\r\n                    return [4 /*yield*/, retryIfServerError(function () { return fetch(endpoint, request); })];\r\n                case 1:\r\n                    response = _a.sent();\r\n                    if (!!response.ok) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, getErrorFromResponse('Delete Installation', response)];\r\n                case 2: throw _a.sent();\r\n                case 3: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction getDeleteEndpoint(appConfig, _a) {\r\n    var fid = _a.fid;\r\n    return getInstallationsEndpoint(appConfig) + \"/\" + fid;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction deleteInstallation(dependencies) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var appConfig, entry;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    appConfig = dependencies.appConfig;\r\n                    return [4 /*yield*/, update(appConfig, function (oldEntry) {\r\n                            if (oldEntry && oldEntry.registrationStatus === 0 /* NOT_STARTED */) {\r\n                                // Delete the unregistered entry without sending a deleteInstallation request.\r\n                                return undefined;\r\n                            }\r\n                            return oldEntry;\r\n                        })];\r\n                case 1:\r\n                    entry = _a.sent();\r\n                    if (!entry) return [3 /*break*/, 6];\r\n                    if (!(entry.registrationStatus === 1 /* IN_PROGRESS */)) return [3 /*break*/, 2];\r\n                    // Can't delete while trying to register.\r\n                    throw ERROR_FACTORY.create(\"delete-pending-registration\" /* DELETE_PENDING_REGISTRATION */);\r\n                case 2:\r\n                    if (!(entry.registrationStatus === 2 /* COMPLETED */)) return [3 /*break*/, 6];\r\n                    if (!!navigator.onLine) return [3 /*break*/, 3];\r\n                    throw ERROR_FACTORY.create(\"app-offline\" /* APP_OFFLINE */);\r\n                case 3: return [4 /*yield*/, deleteInstallationRequest(appConfig, entry)];\r\n                case 4:\r\n                    _a.sent();\r\n                    return [4 /*yield*/, remove(appConfig)];\r\n                case 5:\r\n                    _a.sent();\r\n                    _a.label = 6;\r\n                case 6: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Sets a new callback that will get called when Installation ID changes.\r\n * Returns an unsubscribe function that will remove the callback when called.\r\n */\r\nfunction onIdChange(_a, callback) {\r\n    var appConfig = _a.appConfig;\r\n    addCallback(appConfig, callback);\r\n    return function () {\r\n        removeCallback(appConfig, callback);\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction extractAppConfig(app) {\r\n    var e_1, _a;\r\n    if (!app || !app.options) {\r\n        throw getMissingValueError('App Configuration');\r\n    }\r\n    if (!app.name) {\r\n        throw getMissingValueError('App Name');\r\n    }\r\n    // Required app config keys\r\n    var configKeys = [\r\n        'projectId',\r\n        'apiKey',\r\n        'appId'\r\n    ];\r\n    try {\r\n        for (var configKeys_1 = tslib.__values(configKeys), configKeys_1_1 = configKeys_1.next(); !configKeys_1_1.done; configKeys_1_1 = configKeys_1.next()) {\r\n            var keyName = configKeys_1_1.value;\r\n            if (!app.options[keyName]) {\r\n                throw getMissingValueError(keyName);\r\n            }\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (configKeys_1_1 && !configKeys_1_1.done && (_a = configKeys_1.return)) _a.call(configKeys_1);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    return {\r\n        appName: app.name,\r\n        projectId: app.options.projectId,\r\n        apiKey: app.options.apiKey,\r\n        appId: app.options.appId\r\n    };\r\n}\r\nfunction getMissingValueError(valueName) {\r\n    return ERROR_FACTORY.create(\"missing-app-config-values\" /* MISSING_APP_CONFIG_VALUES */, {\r\n        valueName: valueName\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction registerInstallations(instance) {\r\n    var installationsName = 'installations';\r\n    instance.INTERNAL.registerComponent(new component.Component(installationsName, function (container) {\r\n        var app = container.getProvider('app').getImmediate();\r\n        // Throws if app isn't configured properly.\r\n        var appConfig = extractAppConfig(app);\r\n        var platformLoggerProvider = container.getProvider('platform-logger');\r\n        var dependencies = {\r\n            appConfig: appConfig,\r\n            platformLoggerProvider: platformLoggerProvider\r\n        };\r\n        var installations = {\r\n            app: app,\r\n            getId: function () { return getId(dependencies); },\r\n            getToken: function (forceRefresh) {\r\n                return getToken(dependencies, forceRefresh);\r\n            },\r\n            delete: function () { return deleteInstallation(dependencies); },\r\n            onIdChange: function (callback) {\r\n                return onIdChange(dependencies, callback);\r\n            }\r\n        };\r\n        return installations;\r\n    }, \"PUBLIC\" /* PUBLIC */));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterInstallations(firebase);\n\nexports.registerInstallations = registerInstallations;\n//# sourceMappingURL=index.cjs.js.map\n\n};"],
"names":["shadow$provide","global","require","module","exports","isServerError","error","util","FirebaseError","code","includes","getInstallationsEndpoint","_a","projectId","extractAuthTokenInfoFromResponse","response","token","requestStatus","expiresIn","Number","replace","creationTime","Date","now","getErrorFromResponse","requestName","tslib","__awaiter","responseJson","errorData","__generator","label","json","sent","ERROR_FACTORY","create","serverCode","serverMessage","message","serverStatus","status","getHeaders","Headers","Accept","apiKey","getHeadersWithAuth","appConfig","refreshToken","headers","append","retryIfServerError","fn","result","createInstallationRequest","fid","endpoint","body","request","responseValue","registeredInstallationEntry","_b","authVersion","INTERNAL_AUTH_VERSION","appId","sdkVersion","PACKAGE_VERSION","method","JSON","stringify","fetch","ok","registrationStatus","authToken","sleep","ms","Promise","resolve","setTimeout","getKey","appName","addCallback","callback","getBroadcastChannel","key","callbackSet","fidChangeCallbacks","get","Set","set","add","callFidChangeCallbacks","callbacks","callbacks_1","__values","callbacks_1_1","next","done","value","e_1_1","e_1","return","call","broadcastFidChange","channel","postMessage","closeBroadcastChannel","broadcastChannel","self","BroadcastChannel","onmessage","broadcastChannel.onmessage","e","data","size","close","getDbPromise","dbPromise","idb","openDb","DATABASE_NAME","DATABASE_VERSION","upgradeDB","oldVersion","createObjectStore","OBJECT_STORE_NAME","db","tx","objectStore","oldValue","transaction","put","complete","remove","delete","update","updateFn","store","newValue","undefined","getInstallationEntry","registrationPromise","installationEntry","oldEntry","fidByteArray","Uint8Array","crypto","msCrypto","getRandomValues","btoa","b64","String","fromCharCode","apply","__spread","b64String","substr","VALID_FID_PATTERN","test","INVALID_FID","clearTimedOutRequest","entry","navigator","onLine","inProgressEntry","registrationTime","registerInstallation","registrationPromiseWithError","reject","waitUntilFidRegistration","entryWithPromise","trys","push","updateInstallationRequest","PENDING_TIMEOUT_MS","generateAuthTokenRequest","platformLoggerProvider","platformLogger","completedAuthToken","getGenerateAuthTokenEndpoint","getImmediate","optional","getPlatformInfoString","installation","refreshAuthToken","dependencies","forceRefresh","tokenPromise","oldAuthToken","TOKEN_EXPIRATION_BUFFER","waitUntilAuthTokenRequest","inProgressAuthToken","requestTime","__assign","fetchAuthTokenFromServer","updateAuthTokenRequest","updatedInstallationEntry","getId","catch","console","getToken","completeInstallationRegistration","deleteInstallationRequest","getDeleteEndpoint","deleteInstallation","onIdChange","extractAppConfig","app","options","getMissingValueError","name","configKeys","configKeys_1","configKeys_1_1","keyName","valueName","registerInstallations","instance","INTERNAL","registerComponent","component","Component","installationsName","container","getProvider","installations","registerVersion","version","Object","defineProperty","firebase","_interopDefault","ex","ERROR_DESCRIPTION_MAP","ErrorFactory","SERVICE","SERVICE_NAME","Map"]
}
