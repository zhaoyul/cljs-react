shadow$provide.module$node_modules$$firebase$firestore$dist$index_cjs=function(global,require,module,exports){function h$jscomp$0(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];a$jscomp$1.logLevel<=n$jscomp$2.LogLevel.DEBUG&&(r=r.map(p$jscomp$0),a$jscomp$1.debug.apply(a$jscomp$1,t$jscomp$4.__spreadArrays(["Firestore (7.19.1): "+e],r)))}function f$jscomp$0(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];a$jscomp$1.logLevel<=n$jscomp$2.LogLevel.ERROR&&(r=r.map(p$jscomp$0),
a$jscomp$1.error.apply(a$jscomp$1,t$jscomp$4.__spreadArrays(["Firestore (7.19.1): "+e],r)))}function l$jscomp$0(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];a$jscomp$1.logLevel<=n$jscomp$2.LogLevel.WARN&&(r=r.map(p$jscomp$0),a$jscomp$1.warn.apply(a$jscomp$1,t$jscomp$4.__spreadArrays(["Firestore (7.19.1): "+e],r)))}function p$jscomp$0(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e$22){return t}var e}function d$jscomp$0(t){void 0===t&&(t="Unexpected state");
t="FIRESTORE (7.19.1) INTERNAL ASSERTION FAILED: "+t;throw f$jscomp$0(t),Error(t);}function y$jscomp$0(t,e){t||d$jscomp$0()}function w(t,e){return t<e?-1:t>e?1:0}function b(t$jscomp$0,e,n){return t$jscomp$0.length===e.length&&t$jscomp$0.every(function(t,r){return n(t,e[r])})}function T(t){var e=0,n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function N(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function A(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,
e))return!1;return!0}function q(t){return-0===t&&1/t==-1/0}function M(t){return"number"==typeof t&&Number.isInteger(t)&&!q(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function G(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new F(t,e,n,r,i,o,s)}function j(t$jscomp$0){if(null===t$jscomp$0.G){var n=t$jscomp$0.path.F();null!==t$jscomp$0.collectionGroup&&(n+="|cg:"+t$jscomp$0.collectionGroup);
n=n+"|f:"+t$jscomp$0.filters.map(function(t){return t.field.F()+t.op.toString()+Pt(t.value)}).join(",");n=n+"|ob:"+t$jscomp$0.orderBy.map(function(t){return(e=t).field.F()+e.dir;var e}).join(",");null==t$jscomp$0.limit||(n+="|l:",n+=t$jscomp$0.limit);t$jscomp$0.startAt&&(n+="|lb:",n+=Rn(t$jscomp$0.startAt));t$jscomp$0.endAt&&(n+="|ub:",n+=Rn(t$jscomp$0.endAt));t$jscomp$0.G=n}return t$jscomp$0.G}function B(t$jscomp$0,e$jscomp$0){if(t$jscomp$0.limit!==e$jscomp$0.limit||t$jscomp$0.orderBy.length!==e$jscomp$0.orderBy.length)return!1;
for(var n=0;n<t$jscomp$0.orderBy.length;n++){var t=t$jscomp$0.orderBy[n],e=e$jscomp$0.orderBy[n];if(t.dir!==e.dir||!t.field.isEqual(e.field))return!1}if(t$jscomp$0.filters.length!==e$jscomp$0.filters.length)return!1;for(n=0;n<t$jscomp$0.filters.length;n++)if(i=t$jscomp$0.filters[n],o=e$jscomp$0.filters[n],i.op!==o.op||!i.field.isEqual(o.field)||!xt(i.value,o.value))return!1;var i,o;return t$jscomp$0.collectionGroup===e$jscomp$0.collectionGroup&&!!t$jscomp$0.path.isEqual(e$jscomp$0.path)&&!!On(t$jscomp$0.startAt,
e$jscomp$0.startAt)&&On(t$jscomp$0.endAt,e$jscomp$0.endAt)}function z(t){return U.j(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Z(t){switch(t){case D.OK:return d$jscomp$0();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;
default:return d$jscomp$0()}}function X(t){if(void 0===t)return f$jscomp$0("GRPC error has no .code"),D.UNKNOWN;switch(t){case W.OK:return D.OK;case W.CANCELLED:return D.CANCELLED;case W.UNKNOWN:return D.UNKNOWN;case W.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case W.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case W.INTERNAL:return D.INTERNAL;case W.UNAVAILABLE:return D.UNAVAILABLE;case W.UNAUTHENTICATED:return D.UNAUTHENTICATED;case W.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case W.NOT_FOUND:return D.NOT_FOUND;
case W.ALREADY_EXISTS:return D.ALREADY_EXISTS;case W.PERMISSION_DENIED:return D.PERMISSION_DENIED;case W.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case W.ABORTED:return D.ABORTED;case W.OUT_OF_RANGE:return D.OUT_OF_RANGE;case W.UNIMPLEMENTED:return D.UNIMPLEMENTED;case W.DATA_LOSS:return D.DATA_LOSS;default:return d$jscomp$0()}}function ht(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];e=ct;for(var r=0;r<t.length;r++)e=e.add(t[r]);return e}function Nt(t){var e,n;return"server_timestamp"===
(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function At(t){t=Ot(t.mapValue.fields.__local_write_time__.timestampValue);return new k(t.seconds,t.nanos)}function Dt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nt(t)?4:10:d$jscomp$0()}function xt(t$jscomp$0,
e$jscomp$0){var n=Dt(t$jscomp$0);if(n!==Dt(e$jscomp$0))return!1;switch(n){case 0:return!0;case 1:return t$jscomp$0.booleanValue===e$jscomp$0.booleanValue;case 4:return At(t$jscomp$0).isEqual(At(e$jscomp$0));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;t=Ot(t.timestampValue);e=Ot(e.timestampValue);return t.seconds===e.seconds&&t.nanos===e.nanos}(t$jscomp$0,
e$jscomp$0);case 5:return t$jscomp$0.stringValue===e$jscomp$0.stringValue;case 6:return function(t,e){return Ut(t.bytesValue).isEqual(Ut(e.bytesValue))}(t$jscomp$0,e$jscomp$0);case 7:return t$jscomp$0.referenceValue===e$jscomp$0.referenceValue;case 8:return function(t,e){return Vt(t.geoPointValue.latitude)===Vt(e.geoPointValue.latitude)&&Vt(t.geoPointValue.longitude)===Vt(e.geoPointValue.longitude)}(t$jscomp$0,e$jscomp$0);case 2:return function(t,e){return"integerValue"in t&&"integerValue"in e?Vt(t.integerValue)===
Vt(e.integerValue):"doubleValue"in t&&"doubleValue"in e?(t=Vt(t.doubleValue),e=Vt(e.doubleValue),t===e?q(t)===q(e):isNaN(t)&&isNaN(e)):!1}(t$jscomp$0,e$jscomp$0);case 9:return b(t$jscomp$0.arrayValue.values||[],e$jscomp$0.arrayValue.values||[],xt);case 10:return function(t,e){t=t.mapValue.fields||{};e=e.mapValue.fields||{};if(T(t)!==T(e))return!1;for(var i in t)if(t.hasOwnProperty(i)&&(void 0===e[i]||!xt(t[i],e[i])))return!1;return!0}(t$jscomp$0,e$jscomp$0);default:return d$jscomp$0()}}function kt(t$jscomp$0,
e){return void 0!==(t$jscomp$0.values||[]).find(function(t){return xt(t,e)})}function Lt(t$jscomp$0,e$jscomp$0){var n$jscomp$0=Dt(t$jscomp$0),r$jscomp$0=Dt(e$jscomp$0);if(n$jscomp$0!==r$jscomp$0)return w(n$jscomp$0,r$jscomp$0);switch(n$jscomp$0){case 0:return 0;case 1:return w(t$jscomp$0.booleanValue,e$jscomp$0.booleanValue);case 2:return function(t,e){t=Vt(t.integerValue||t.doubleValue);e=Vt(e.integerValue||e.doubleValue);return t<e?-1:t>e?1:t===e?0:isNaN(t)?isNaN(e)?0:-1:1}(t$jscomp$0,e$jscomp$0);
case 3:return Rt(t$jscomp$0.timestampValue,e$jscomp$0.timestampValue);case 4:return Rt(At(t$jscomp$0),At(e$jscomp$0));case 5:return w(t$jscomp$0.stringValue,e$jscomp$0.stringValue);case 6:return function(t,e){t=Ut(t);e=Ut(e);return t.o(e)}(t$jscomp$0.bytesValue,e$jscomp$0.bytesValue);case 7:return function(t,e){t=t.split("/");e=e.split("/");for(var i=0;i<t.length&&i<e.length;i++){var o=w(t[i],e[i]);if(0!==o)return o}return w(t.length,e.length)}(t$jscomp$0.referenceValue,e$jscomp$0.referenceValue);
case 8:return function(t,e){var n=w(Vt(t.latitude),Vt(e.latitude));return 0!==n?n:w(Vt(t.longitude),Vt(e.longitude))}(t$jscomp$0.geoPointValue,e$jscomp$0.geoPointValue);case 9:return function(t,e){t=t.values||[];e=e.values||[];for(var i=0;i<t.length&&i<e.length;++i){var o=Lt(t[i],e[i]);if(o)return o}return w(t.length,e.length)}(t$jscomp$0.arrayValue,e$jscomp$0.arrayValue);case 10:return function(t,e){t=t.fields||{};var r=Object.keys(t);e=e.fields||{};var o=Object.keys(e);r.sort();o.sort();for(var s=
0;s<r.length&&s<o.length;++s){var u=w(r[s],o[s]);if(0!==u)return u;u=Lt(t[r[s]],e[o[s]]);if(0!==u)return u}return w(r.length,o.length)}(t$jscomp$0.mapValue,e$jscomp$0.mapValue);default:throw d$jscomp$0();}}function Rt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return w(t,e);t=Ot(t);e=Ot(e);var i=w(t.seconds,e.seconds);return 0!==i?i:w(t.nanos,e.nanos)}function Pt(t$jscomp$1){return function t$jscomp$0(e$jscomp$0){return"nullValue"in e$jscomp$0?"null":"booleanValue"in e$jscomp$0?
""+e$jscomp$0.booleanValue:"integerValue"in e$jscomp$0?""+e$jscomp$0.integerValue:"doubleValue"in e$jscomp$0?""+e$jscomp$0.doubleValue:"timestampValue"in e$jscomp$0?function(t){t=Ot(t);return"time("+t.seconds+","+t.nanos+")"}(e$jscomp$0.timestampValue):"stringValue"in e$jscomp$0?e$jscomp$0.stringValue:"bytesValue"in e$jscomp$0?Ut(e$jscomp$0.bytesValue).toBase64():"referenceValue"in e$jscomp$0?(r$jscomp$0=e$jscomp$0.referenceValue,U.U(r$jscomp$0).toString()):"geoPointValue"in e$jscomp$0?"geo("+(n$jscomp$0=
e$jscomp$0.geoPointValue).latitude+","+n$jscomp$0.longitude+")":"arrayValue"in e$jscomp$0?function(e){var n="[",r=!0,i=0;for(e=e.values||[];i<e.length;i++){var s=e[i];r?r=!1:n+=",";n+=t$jscomp$0(s)}return n+"]"}(e$jscomp$0.arrayValue):"mapValue"in e$jscomp$0?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",";n+=s+":"+t$jscomp$0(e.fields[s])}return n+"}"}(e$jscomp$0.mapValue):d$jscomp$0();var n$jscomp$0,r$jscomp$0}(t$jscomp$1)}function Ot(t){t||
d$jscomp$0();if("string"==typeof t){var e=0,n=St.exec(t);n||d$jscomp$0();n[1]&&(e=n[1],e=(e+"000000000").substr(0,9),e=Number(e));return{seconds:Math.floor((new Date(t)).getTime()/1E3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ut(t){return"string"==typeof t?Q.fromBase64String(t):Q.fromUint8Array(t)}function Ct(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.F()}}
function qt(t){return!!t&&"integerValue"in t}function Mt(t){return!!t&&"arrayValue"in t}function Ft(t){return!!t&&"nullValue"in t}function Gt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jt(t){return!!t&&"mapValue"in t}function Ht(t,e){if(t.Le){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:q(e)?"-0":e}}function Kt(t,e){return M(e)?{integerValue:""+e}:Ht(t,e)}function Yt(t,e){return t.Le?
(new Date(1E3*e.seconds)).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zt(t,e){return t.Le?e.toBase64():e.toUint8Array()}function $t(t$jscomp$0){t$jscomp$0||d$jscomp$0();return L.I(function(t){t=Ot(t);return new k(t.seconds,t.nanos)}(t$jscomp$0))}function Jt(t,e){return(new P(["projects",t.projectId,"databases",t.database])).child("documents").child(e).F()}function te(t){t=P.k(t);_e(t)||d$jscomp$0();
return t}function ne(t,e){e=te(e);e.get(1)===t.s.projectId||d$jscomp$0();!e.get(3)&&!t.s.database||e.get(3)===t.s.database||d$jscomp$0();return new U(se(e))}function re(t,e){return Jt(t.s,e)}function ie(t){t=te(t);return 4===t.length?P.$():se(t)}function oe(t){return(new P(["projects",t.s.projectId,"databases",t.s.database])).F()}function se(t){4<t.length&&"documents"===t.get(4)||d$jscomp$0();return t.V(5)}function ue(t,e,n){return{name:Jt(t.s,e.path),fields:n.proto.mapValue.fields}}function ae(t$jscomp$1,
e$jscomp$0){if(e$jscomp$0 instanceof Qe)var n={update:ue(t$jscomp$1,e$jscomp$0.key,e$jscomp$0.value)};else if(e$jscomp$0 instanceof Xe)n={delete:Jt(t$jscomp$1.s,e$jscomp$0.key.path)};else if(e$jscomp$0 instanceof We)n={update:ue(t$jscomp$1,e$jscomp$0.key,e$jscomp$0.data),updateMask:be(e$jscomp$0.qe)};else if(e$jscomp$0 instanceof Ke)n={transform:{document:Jt(t$jscomp$1.s,e$jscomp$0.key.path),fieldTransforms:e$jscomp$0.fieldTransforms.map(function(t$jscomp$0){return function(t,e){t=e.transform;if(t instanceof
Ae)return{fieldPath:e.field.F(),setToServerValue:"REQUEST_TIME"};if(t instanceof Se)return{fieldPath:e.field.F(),appendMissingElements:{values:t.elements}};if(t instanceof xe)return{fieldPath:e.field.F(),removeAllFromArray:{values:t.elements}};if(t instanceof Le)return{fieldPath:e.field.F(),increment:t.Be};throw d$jscomp$0();}(0,t$jscomp$0)})}};else{if(!(e$jscomp$0 instanceof $e))return d$jscomp$0();n={verify:Jt(t$jscomp$1.s,e$jscomp$0.key.path)}}return e$jscomp$0.Qe.Ue||(n.currentDocument=function(t,
e){return void 0!==e.updateTime?{updateTime:Yt(t,e.updateTime.A())}:void 0!==e.exists?{exists:e.exists}:d$jscomp$0()}(t$jscomp$1,e$jscomp$0.Qe)),n}function ce(t$jscomp$1,e$jscomp$0){var n$jscomp$0=e$jscomp$0.currentDocument?function(t){return void 0!==t.updateTime?Ce.updateTime($t(t.updateTime)):void 0!==t.exists?Ce.exists(t.exists):Ce.We()}(e$jscomp$0.currentDocument):Ce.We();if(e$jscomp$0.update){e$jscomp$0.update.name;var r=ne(t$jscomp$1,e$jscomp$0.update.name),i=new Je({mapValue:{fields:e$jscomp$0.update.fields}});
return e$jscomp$0.updateMask?(e$jscomp$0=function(t$jscomp$0){return new Oe((t$jscomp$0.fieldPaths||[]).map(function(t){return V.q(t)}))}(e$jscomp$0.updateMask),new We(r,i,e$jscomp$0,n$jscomp$0)):new Qe(r,i,n$jscomp$0)}return e$jscomp$0.delete?(e$jscomp$0=ne(t$jscomp$1,e$jscomp$0.delete),new Xe(e$jscomp$0,n$jscomp$0)):e$jscomp$0.transform?(r=ne(t$jscomp$1,e$jscomp$0.transform.document),e$jscomp$0=e$jscomp$0.transform.fieldTransforms.map(function(e){var n=null;"setToServerValue"in e?("REQUEST_TIME"===
e.setToServerValue||d$jscomp$0(),n=new Ae):"appendMissingElements"in e?n=new Se(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new xe(e.removeAllFromArray.values||[]):"increment"in e?n=new Le(t$jscomp$1,e.increment):d$jscomp$0();e=V.q(e.fieldPath);return new Ve(e,n)}),!0===n$jscomp$0.exists||d$jscomp$0(),new Ke(r,e$jscomp$0)):e$jscomp$0.verify?(e$jscomp$0=ne(t$jscomp$1,e$jscomp$0.verify),new $e(e$jscomp$0,n$jscomp$0)):d$jscomp$0()}function fe(t$jscomp$2,e$jscomp$0){var n={structuredQuery:{}},
r=e$jscomp$0.path;null!==e$jscomp$0.collectionGroup?(n.parent=re(t$jscomp$2,r),n.structuredQuery.from=[{collectionId:e$jscomp$0.collectionGroup,allDescendants:!0}]):(n.parent=re(t$jscomp$2,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);(r=function(t$jscomp$1){if(0!==t$jscomp$1.length)return t$jscomp$1=t$jscomp$1.map(function(t$jscomp$0){return function(t){if("\x3d\x3d"===t.op){if(Gt(t.value))return{unaryFilter:{field:ve(t.field),op:"IS_NAN"}};if(Ft(t.value))return{unaryFilter:{field:ve(t.field),
op:"IS_NULL"}}}else if("!\x3d"===t.op){if(Gt(t.value))return{unaryFilter:{field:ve(t.field),op:"IS_NOT_NAN"}};if(Ft(t.value))return{unaryFilter:{field:ve(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ve(t.field),op:zt[t.op],value:t.value}}}(t$jscomp$0)}),1===t$jscomp$1.length?t$jscomp$1[0]:{compositeFilter:{op:"AND",filters:t$jscomp$1}}}(e$jscomp$0.filters))&&(n.structuredQuery.where=r);(r=function(t$jscomp$0){if(0!==t$jscomp$0.length)return t$jscomp$0.map(function(t){return{field:ve(t.field),
direction:Bt[t.dir]}})}(e$jscomp$0.orderBy))&&(n.structuredQuery.orderBy=r);t$jscomp$2=function(t,e){return t.Le||null==e?e:{value:e}}(t$jscomp$2,e$jscomp$0.limit);return null!==t$jscomp$2&&(n.structuredQuery.limit=t$jscomp$2),e$jscomp$0.startAt&&(n.structuredQuery.startAt=le(e$jscomp$0.startAt)),e$jscomp$0.endAt&&(n.structuredQuery.endAt=le(e$jscomp$0.endAt)),n}function le(t){return{before:t.before,values:t.position}}function pe(t){return new Ln(t.values||[],!!t.before)}function ve(t){return{fieldPath:t.F()}}
function me(t$jscomp$0){return In.create(V.q(t$jscomp$0.fieldFilter.field.fieldPath),function(t){switch(t){case "EQUAL":return"\x3d\x3d";case "NOT_EQUAL":return"!\x3d";case "GREATER_THAN":return"\x3e";case "GREATER_THAN_OR_EQUAL":return"\x3e\x3d";case "LESS_THAN":return"\x3c";case "LESS_THAN_OR_EQUAL":return"\x3c\x3d";case "ARRAY_CONTAINS":return"array-contains";case "IN":return"in";case "NOT_IN":return"not-in";case "ARRAY_CONTAINS_ANY":return"array-contains-any";default:return d$jscomp$0()}}(t$jscomp$0.fieldFilter.op),
t$jscomp$0.fieldFilter.value)}function we(t){switch(t.unaryFilter.op){case "IS_NAN":return t=V.q(t.unaryFilter.field.fieldPath),In.create(t,"\x3d\x3d",{doubleValue:NaN});case "IS_NULL":return t=V.q(t.unaryFilter.field.fieldPath),In.create(t,"\x3d\x3d",{nullValue:"NULL_VALUE"});case "IS_NOT_NAN":return t=V.q(t.unaryFilter.field.fieldPath),In.create(t,"!\x3d",{doubleValue:NaN});case "IS_NOT_NULL":return t=V.q(t.unaryFilter.field.fieldPath),In.create(t,"!\x3d",{nullValue:"NULL_VALUE"});default:return d$jscomp$0()}}
function be(t$jscomp$0){var e=[];return t$jscomp$0.fields.forEach(function(t){return e.push(t.F())}),{fieldPaths:e}}function _e(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function Ee(t$jscomp$0,e$jscomp$0,n){return t$jscomp$0 instanceof Ae?function(t,e){t={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(t.fields.__previous_value__=e),{mapValue:t}}(n,e$jscomp$0):t$jscomp$0 instanceof
Se?De(t$jscomp$0,e$jscomp$0):t$jscomp$0 instanceof xe?ke(t$jscomp$0,e$jscomp$0):function(t,e){e=Ne(t,e);var JSCompiler_temp_const=Vt(e.integerValue||e.doubleValue);var JSCompiler_inline_result=t.Be;JSCompiler_inline_result=Vt(JSCompiler_inline_result.integerValue||JSCompiler_inline_result.doubleValue);JSCompiler_temp_const+=JSCompiler_inline_result;return qt(e)&&qt(t.Be)?{integerValue:""+JSCompiler_temp_const}:Ht(t.serializer,JSCompiler_temp_const)}(t$jscomp$0,e$jscomp$0)}function Te(t,e,n){return t instanceof
Se?De(t,e):t instanceof xe?ke(t,e):n}function Ne(t,e){return t instanceof Le?qt(n=e)||n&&"doubleValue"in n?e:{integerValue:0}:null;var n}function De(t$jscomp$0,e$jscomp$0){var n=Pe(e$jscomp$0);e$jscomp$0=function(t){n.some(function(e){return xt(e,t)})||n.push(t)};var i=0;for(t$jscomp$0=t$jscomp$0.elements;i<t$jscomp$0.length;i++)e$jscomp$0(t$jscomp$0[i]);return{arrayValue:{values:n}}}function ke(t$jscomp$0,e$jscomp$0){var n=Pe(e$jscomp$0);e$jscomp$0=function(t){n=n.filter(function(e){return!xt(e,
t)})};var i=0;for(t$jscomp$0=t$jscomp$0.elements;i<t$jscomp$0.length;i++)e$jscomp$0(t$jscomp$0[i]);return{arrayValue:{values:n}}}function Pe(t){return Mt(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function qe(t,e){return void 0!==t.updateTime?e instanceof rn&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof rn}function Fe(t$jscomp$1,e$jscomp$0,n$jscomp$1){return t$jscomp$1 instanceof Qe?new rn(t$jscomp$1.key,n$jscomp$1.version,t$jscomp$1.value,{hasCommittedMutations:!0}):
t$jscomp$1 instanceof We?function(t,e,n){if(!qe(t.Qe,e))return new sn(t.key,n.version);e=He(t,e);return new rn(t.key,n.version,e,{hasCommittedMutations:!0})}(t$jscomp$1,e$jscomp$0,n$jscomp$1):t$jscomp$1 instanceof Ke?function(t$jscomp$0,e,n$jscomp$0){null!=n$jscomp$0.transformResults||d$jscomp$0();if(!qe(t$jscomp$0.Qe,e))return new sn(t$jscomp$0.key,n$jscomp$0.version);var t=t$jscomp$0.fieldTransforms,n=n$jscomp$0.transformResults,r=[];t.length===n.length||d$jscomp$0();for(var i=0;i<n.length;i++){var o=
t[i],s=o.transform,u=null;e instanceof rn&&(u=e.field(o.field));r.push(Te(s,u,n[i]))}n$jscomp$0=n$jscomp$0.version;e=Ze(t$jscomp$0,e.data(),r);return new rn(t$jscomp$0.key,n$jscomp$0,e,{hasCommittedMutations:!0})}(t$jscomp$1,e$jscomp$0,n$jscomp$1):new on(t$jscomp$1.key,n$jscomp$1.version,{hasCommittedMutations:!0})}function Ge(t$jscomp$0,e$jscomp$0,n$jscomp$0,r$jscomp$0){return t$jscomp$0 instanceof Qe?function(t,e){if(!qe(t.Qe,e))return e;e=e instanceof rn?e.version:L.min();return new rn(t.key,e,
t.value,{Ge:!0})}(t$jscomp$0,e$jscomp$0):t$jscomp$0 instanceof We?function(t,e){if(!qe(t.Qe,e))return e;var n=e instanceof rn?e.version:L.min();e=He(t,e);return new rn(t.key,n,e,{Ge:!0})}(t$jscomp$0,e$jscomp$0):t$jscomp$0 instanceof Ke?function(t,e,n,r){if(!qe(t.Qe,e))return e;for(var i=[],o=0,s=t.fieldTransforms;o<s.length;o++){var u=s[o],a=u.transform,c=null;e instanceof rn&&(c=e.field(u.field));null===c&&r instanceof rn&&(c=r.field(u.field));i.push(Ee(a,c,n))}n=Ze(t,e.data(),i);return new rn(t.key,
e.version,n,{Ge:!0})}(t$jscomp$0,e$jscomp$0,r$jscomp$0,n$jscomp$0):function(t,e){return qe(t.Qe,e)?new on(t.key,L.min()):e}(t$jscomp$0,e$jscomp$0)}function Be(t$jscomp$0,e$jscomp$0){return t$jscomp$0.type===e$jscomp$0.type&&!!t$jscomp$0.key.isEqual(e$jscomp$0.key)&&!!t$jscomp$0.Qe.isEqual(e$jscomp$0.Qe)&&(0===t$jscomp$0.type?t$jscomp$0.value.isEqual(e$jscomp$0.value):1===t$jscomp$0.type?t$jscomp$0.data.isEqual(e$jscomp$0.data)&&t$jscomp$0.qe.isEqual(e$jscomp$0.qe):2!==t$jscomp$0.type||b(t$jscomp$0.fieldTransforms,
t$jscomp$0.fieldTransforms,function(t,e){var JSCompiler_temp;if(JSCompiler_temp=t.field.isEqual(e.field))t=t.transform,e=e.transform,JSCompiler_temp=t instanceof Se&&e instanceof Se||t instanceof xe&&e instanceof xe?b(t.elements,e.elements,xt):t instanceof Le&&e instanceof Le?xt(t.Be,e.Be):t instanceof Ae&&e instanceof Ae;return JSCompiler_temp}))}function He(t$jscomp$0,e$jscomp$1){return function(t,e$jscomp$0){var n=new tn(e$jscomp$0);return t.qe.fields.forEach(function(e){if(!e._()){var r=t.data.field(e);
null!==r?n.set(e,r):n.delete(e)}}),n.ze()}(t$jscomp$0,e$jscomp$1 instanceof rn?e$jscomp$1.data():Je.empty())}function Ze(t,e,n){e=new tn(e);for(var i=0;i<t.fieldTransforms.length;i++)e.set(t.fieldTransforms[i].field,n[i]);return e.ze()}function en(t$jscomp$0){var e=[];return N(t$jscomp$0.fields||{},function(t,n){t=new V([t]);if(jt(n))if(n=en(n.mapValue).fields,0===n.length)e.push(t);else for(var o=0;o<n.length;o++)e.push(t.child(n[o]));else e.push(t)}),new Oe(e)}function un(t,e){if(!(t instanceof
e))throw e.name===t.constructor.name?new x(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass '"+e.name+"' from a different Firestore SDK?"):new x(D.INVALID_ARGUMENT,"Expected type '"+e.name+"', but was '"+t.constructor.name+"'");return t}function ln(t){t=un(t,an);if(null===t.sn){t.sn=[];var n=t.ln(),r=t.cn();if(null!==n&&null===r)n.M()||t.sn.push(new Vn(n)),t.sn.push(new Vn(V.L(),"asc"));else{n=!1;r=0;for(var s=t.en;r<s.length;r++){var u=s[r];t.sn.push(u);u.field.M()&&(n=
!0)}n||(n=0<t.en.length?t.en[t.en.length-1].dir:"asc",t.sn.push(new Vn(V.L(),n)))}}return t.sn}function pn(t){t=un(t,an);if(!t.rn)if("F"===t.nn)t.rn=G(t.path,t.collectionGroup,ln(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=ln(t);r<i.length;r++){var o=i[r];n.push(new Vn(o.field,"desc"===o.dir?"asc":"desc"))}r=t.endAt?new Ln(t.endAt.position,!t.endAt.before):null;i=t.startAt?new Ln(t.startAt.position,!t.startAt.before):null;t.rn=G(t.path,t.collectionGroup,n,t.filters,t.limit,r,i)}return t.rn}
function dn(t,e,n){return new an(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yn(t,e){return new an(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),t.limit,t.nn,e,t.endAt)}function vn(t,e){return new an(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),t.limit,t.nn,t.startAt,e)}function gn(t,e){return B(pn(t),pn(e))&&t.nn===e.nn}function mn(t){return j(pn(t))+"|lt:"+t.nn}function wn(t$jscomp$1){return"Query(target\x3d"+function(t$jscomp$0){var e$jscomp$0=
t$jscomp$0.path.F();return null!==t$jscomp$0.collectionGroup&&(e$jscomp$0+=" collectionGroup\x3d"+t$jscomp$0.collectionGroup),0<t$jscomp$0.filters.length&&(e$jscomp$0+=", filters: ["+t$jscomp$0.filters.map(function(t){return(e=t).field.F()+" "+e.op+" "+Pt(e.value);var e}).join(", ")+"]"),null==t$jscomp$0.limit||(e$jscomp$0+=", limit: "+t$jscomp$0.limit),0<t$jscomp$0.orderBy.length&&(e$jscomp$0+=", orderBy: ["+t$jscomp$0.orderBy.map(function(t){return(e=t).field.F()+" ("+e.dir+")";var e}).join(", ")+
"]"),t$jscomp$0.startAt&&(e$jscomp$0+=", startAt: "+Rn(t$jscomp$0.startAt)),t$jscomp$0.endAt&&(e$jscomp$0+=", endAt: "+Rn(t$jscomp$0.endAt)),"Target("+e$jscomp$0+")"}(pn(t$jscomp$1))+"; limitType\x3d"+t$jscomp$1.nn+")"}function bn(t$jscomp$0,e$jscomp$0){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.W(t.collectionGroup)&&t.path.D(n):U.j(t.path)?t.path.isEqual(n):t.path.C(n)}(t$jscomp$0,e$jscomp$0)&&function(t,e){var n=0;for(t=t.en;n<t.length;n++){var i=t[n];if(!i.field.M()&&
null===e.field(i.field))return!1}return!0}(t$jscomp$0,e$jscomp$0)&&function(t,e){var n=0;for(t=t.filters;n<t.length;n++)if(!t[n].matches(e))return!1;return!0}(t$jscomp$0,e$jscomp$0)&&function(t,e){return!(t.startAt&&!Pn(t.startAt,ln(t),e))&&(!t.endAt||!Pn(t.endAt,ln(t),e))}(t$jscomp$0,e$jscomp$0)}function _n(t$jscomp$0){return function(e$jscomp$0,n){for(var r=!1,i=0,o=ln(t$jscomp$0);i<o.length;i++){var s=o[i];a:{var u=s;var e=e$jscomp$0;var JSCompiler_temp=n;if(u.field.M())JSCompiler_temp=U.P(e.key,
JSCompiler_temp.key);else{var t=u.field;e=e.field(t);JSCompiler_temp=JSCompiler_temp.field(t);JSCompiler_temp=null!==e&&null!==JSCompiler_temp?Lt(e,JSCompiler_temp):d$jscomp$0()}switch(u.dir){case "asc":u=JSCompiler_temp;break a;case "desc":u=-1*JSCompiler_temp;break a;default:u=d$jscomp$0()}}if(0!==u)return u;r=r||s.field.M()}return 0}}function An(t$jscomp$0,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return U.U(t.referenceValue)})}function Rn(t$jscomp$0){return(t$jscomp$0.before?
"b":"a")+":"+t$jscomp$0.position.map(function(t){return Pt(t)}).join(",")}function Pn(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.M()?U.P(U.U(s.referenceValue),n.key):Lt(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?0>=r:0>r}function On(t,e){if(null===t)return null===e;if(null===e||t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!xt(t.position[n],e.position[n]))return!1;
return!0}function $n(t){return"IndexedDbTransactionError"===t.name}function er(t$jscomp$0){return new Fn(function(e,n){t$jscomp$0.onsuccess=function(t){e(t.target.result)};t$jscomp$0.onerror=function(t){t=rr(t.target.error);n(t)}})}function rr(t){var e=Yn.Fs(r$jscomp$2.getUA());if(12.2<=e&&13>e&&0<=t.message.indexOf("An internal error was encountered in the Indexed Database server")){var i=new x("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown 'An internal error was encountered in the Indexed Database server'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");
return nr||(nr=!0,setTimeout(function(){throw i;},0)),i}return t}function or(){return"undefined"!=typeof document?document:null}function ar(t,e){if(f$jscomp$0("AsyncQueue",e+": "+t),$n(t))return new x(D.UNAVAILABLE,e+": "+t);throw t;}function cr(t,e){var r=t[1],o=e[1];t=w(t[0],e[0]);return 0===t?w(r,o):t}function yr(t$jscomp$0){for(var e="",n=0;n<t$jscomp$0.length;n++){0<e.length&&(e+="");for(var t=t$jscomp$0.get(n),r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case "\x00":e+="";break;case "":e+=
"";break;default:e+=o}}}return e+""}function mr(t){var e=t.length;2<=e||d$jscomp$0();if(2===e)return""===t.charAt(0)&&""===t.charAt(1)||d$jscomp$0(),P.$();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((0>s||s>n)&&d$jscomp$0(),t.charAt(s+1)){case "":o=t.substring(o,s);var a=void 0;0===i.length?a=o:(a=i+=o,i="");r.push(a);break;case "":i+=t.substring(o,s);i+="\x00";break;case "":i+=t.substring(o,s+1);break;default:d$jscomp$0()}o=s+2}return new P(r)}function br(t,e$jscomp$0){if(e$jscomp$0.document){var e=
e$jscomp$0.document;e$jscomp$0=!!e$jscomp$0.hasCommittedMutations;t=ne(t._r,e.name);var i=$t(e.updateTime);e=new Je({mapValue:{fields:e.fields}});return new rn(t,i,e,{hasCommittedMutations:!!e$jscomp$0})}return e$jscomp$0.noDocument?(e=U.K(e$jscomp$0.noDocument.path),t=Nr(e$jscomp$0.noDocument.readTime),new on(e,t,{hasCommittedMutations:!!e$jscomp$0.hasCommittedMutations})):e$jscomp$0.unknownDocument?(e=U.K(e$jscomp$0.unknownDocument.path),e$jscomp$0=Nr(e$jscomp$0.unknownDocument.version),new sn(e,
e$jscomp$0)):d$jscomp$0()}function _r(t,e,n){n=Ir(n);var i=e.key.path.p().N();if(e instanceof rn)return t=t._r,t={name:Jt(t.s,e.key.path),fields:e.tn().mapValue.fields,updateTime:Yt(t,e.version.A())},new Zr(null,null,t,e.hasCommittedMutations,n,i);if(e instanceof on){t=e.key.path.N();var a=Tr(e.version);e=e.hasCommittedMutations;return new Zr(null,new Kr(t,a),null,e,n,i)}return e instanceof sn?(t=e.key.path.N(),e=Tr(e.version),new Zr(new Yr(t,e),null,null,!0,n,i)):d$jscomp$0()}function Ir(t){t=t.A();
return[t.seconds,t.nanoseconds]}function Er(t){t=new k(t[0],t[1]);return L.I(t)}function Tr(t){t=t.A();return new Br(t.seconds,t.nanoseconds)}function Nr(t){t=new k(t.seconds,t.nanoseconds);return L.I(t)}function Ar(t,e$jscomp$0){var n=(e$jscomp$0.baseMutations||[]).map(function(e){return ce(t._r,e)}),r=e$jscomp$0.mutations.map(function(e){return ce(t._r,e)}),i=k.fromMillis(e$jscomp$0.localWriteTimeMs);return new qn(e$jscomp$0.batchId,i,n,r)}function Sr(t$jscomp$2){var e$jscomp$2,n,r$jscomp$0=Nr(t$jscomp$2.readTime),
i$jscomp$0=void 0!==t$jscomp$2.lastLimboFreeSnapshotVersion?Nr(t$jscomp$2.lastLimboFreeSnapshotVersion):L.min();return void 0!==t$jscomp$2.query.documents?(y$jscomp$0(1===(n=t$jscomp$2.query).documents.length),e$jscomp$2=pn(new an(ie(n.documents[0])))):e$jscomp$2=function(t$jscomp$1){var e$jscomp$1=ie(t$jscomp$1.parent);t$jscomp$1=t$jscomp$1.structuredQuery;var r=t$jscomp$1.from?t$jscomp$1.from.length:0,i=null;0<r&&(1===r||d$jscomp$0(),r=t$jscomp$1.from[0],r.allDescendants?i=r.collectionId:e$jscomp$1=
e$jscomp$1.child(r.collectionId));r=[];t$jscomp$1.where&&(r=function t$jscomp$0(e$jscomp$0){return e$jscomp$0?void 0!==e$jscomp$0.unaryFilter?[we(e$jscomp$0)]:void 0!==e$jscomp$0.fieldFilter?[me(e$jscomp$0)]:void 0!==e$jscomp$0.compositeFilter?e$jscomp$0.compositeFilter.filters.map(function(e){return t$jscomp$0(e)}).reduce(function(t,e){return t.concat(e)}):d$jscomp$0():[]}(t$jscomp$1.where));var u=[];t$jscomp$1.orderBy&&(u=t$jscomp$1.orderBy.map(function(t){var JSCompiler_temp_const=V.q(t.field.fieldPath);
a:switch(t.direction){case "ASCENDING":t="asc";break a;case "DESCENDING":t="desc";break a;default:t=void 0}return new Vn(JSCompiler_temp_const,t)}));var a=null;t$jscomp$1.limit&&(a=function(t){var e;return null==(e="object"==typeof t?t.value:t)?null:e}(t$jscomp$1.limit));var c=null;t$jscomp$1.startAt&&(c=pe(t$jscomp$1.startAt));var h=null;return t$jscomp$1.endAt&&(h=pe(t$jscomp$1.endAt)),pn(new an(e$jscomp$1,i,u,r,a,"F",c,h))}(t$jscomp$2.query),new K(e$jscomp$2,t$jscomp$2.targetId,0,t$jscomp$2.lastListenSequenceNumber,
r$jscomp$0,i$jscomp$0,Q.fromBase64String(t$jscomp$2.resumeToken))}function Dr(t,e){var r=Tr(e.Z),i=Tr(e.lastLimboFreeSnapshotVersion);t=z(e.target)?{documents:[re(t._r,e.target.path)]}:fe(t._r,e.target);var o=e.resumeToken.toBase64();return new $r(e.targetId,j(e.target),r,o,e.sequenceNumber,i,t)}function kr(t$jscomp$0,e,n$jscomp$0){n$jscomp$0=Hr.prefixForPath(e,n$jscomp$0.path);var i=n$jscomp$0[1];n$jscomp$0=IDBKeyRange.lowerBound(n$jscomp$0);var s=!1;return Pr(t$jscomp$0).Zs({range:n$jscomp$0,Xs:!0},
function(t,n,r){n=t[0];var u=t[1];t[2];n===e&&u===i&&(s=!0);r.done()}).next(function(){return s})}function Lr(t$jscomp$0,e$jscomp$0,n$jscomp$0){var r=t$jscomp$0.store(Wr.store);t$jscomp$0=t$jscomp$0.store(Hr.store);var o=[],s=IDBKeyRange.only(n$jscomp$0.batchId),u=0;r=r.Zs({range:s},function(t,e,n){return u++,n.delete()});o.push(r.next(function(){1===u||d$jscomp$0()}));var c=[];r=0;for(s=n$jscomp$0.mutations;r<s.length;r++){var l=s[r],p=Hr.key(e$jscomp$0,l.key.path,n$jscomp$0.batchId);o.push(t$jscomp$0.delete(p));
c.push(l.key)}return Fn.Cn(o).next(function(){return c})}function Rr(t){return di.Ms(t,Wr.store)}function Pr(t){return di.Ms(t,Hr.store)}function Cr(t){return di.Ms(t,Zr.store)}function Mr(t){if(t.document)t=t.document;else if(t.unknownDocument)t=t.unknownDocument;else{if(!t.noDocument)throw d$jscomp$0();t=t.noDocument}return JSON.stringify(t).length}function ni(t){t.createObjectStore(Jr.store,{keyPath:Jr.keyPath}).createIndex(Jr.documentTargetsIndex,Jr.documentTargetsKeyPath,{unique:!0});t.createObjectStore($r.store,
{keyPath:$r.keyPath}).createIndex($r.queryTargetsIndexName,$r.queryTargetsKeyPath,{unique:!0});t.createObjectStore(ti.store)}function ci(t){return di.Ms(t,$r.store)}function fi(t){return di.Ms(t,Jr.store)}function yi(t){return di.Ms(t,zr.store)}function mi(t$jscomp$0,e$jscomp$0){return fi(t$jscomp$0).put(function(t,e){return new Jr(0,yr(t.path),e)}(e$jscomp$0,t$jscomp$0.Ro))}function wi(t,e){var n=t.projectId;return t.i||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function _i(t$jscomp$2,e$jscomp$1){return t$jscomp$2.persistence.runTransaction("Acknowledge batch",
"readwrite-primary",function(t$jscomp$1){var r$jscomp$0=e$jscomp$1.batch.keys(),i$jscomp$0=t$jscomp$2.Ah.jr({Gr:!0});return function(t$jscomp$0,e$jscomp$0,n,r){var i=n.batch,o=i.keys(),s$jscomp$0=Fn.resolve();return o.forEach(function(t){s$jscomp$0=s$jscomp$0.next(function(){return r.Ln(e$jscomp$0,t)}).next(function(e){var s=n.Pn.get(t);null!==s||d$jscomp$0();(!e||0>e.version.o(s))&&(e=i.En(t,e,n))&&r.xn(e,n.Rn)})}),s$jscomp$0.next(function(){return t$jscomp$0.Gn.br(e$jscomp$0,i)})}(t$jscomp$2,t$jscomp$1,
e$jscomp$1,i$jscomp$0).next(function(){return i$jscomp$0.apply(t$jscomp$1)}).next(function(){return t$jscomp$2.Gn.Cr(t$jscomp$1)}).next(function(){return t$jscomp$2.Rh.Zn(t$jscomp$1,r$jscomp$0)})})}function Ii(t$jscomp$0){return t$jscomp$0.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return t$jscomp$0.ko.ro(t)})}function Ei(t$jscomp$1,e$jscomp$1){var r=e$jscomp$1.Z,i$jscomp$0=t$jscomp$1.Eh;return t$jscomp$1.persistence.runTransaction("Apply remote event","readwrite-primary",
function(t$jscomp$0){var o$jscomp$0=t$jscomp$1.Ah.jr({Gr:!0});i$jscomp$0=t$jscomp$1.Eh;var s=[];e$jscomp$1.Wt.forEach(function(e$jscomp$0,o){var u=i$jscomp$0.get(o);if(u){s.push(t$jscomp$1.ko.Io(t$jscomp$0,e$jscomp$0.Zt,o).next(function(){return t$jscomp$1.ko.To(t$jscomp$0,e$jscomp$0.Jt,o)}));var a=e$jscomp$0.resumeToken;0<a.Y()&&(a=u.et(a,r).tt(t$jscomp$0.Ro),i$jscomp$0=i$jscomp$0.st(o,a),function(t,e,n){0<e.resumeToken.Y()||d$jscomp$0();return 0===t.resumeToken.Y()||3E8<=e.Z.m()-t.Z.m()||0<n.Jt.size+
n.Xt.size+n.Zt.size}(u,a,e$jscomp$0)&&s.push(t$jscomp$1.ko.lo(t$jscomp$0,a)))}});var u$jscomp$0=rt,a$jscomp$0=ht();if(e$jscomp$1.Kt.forEach(function(t,e){a$jscomp$0=a$jscomp$0.add(t)}),s.push(o$jscomp$0.getEntries(t$jscomp$0,a$jscomp$0).next(function(i){e$jscomp$1.Kt.forEach(function(a,c){var f=i.get(a);c instanceof on&&c.version.isEqual(L.min())?(o$jscomp$0.Mn(a,r),u$jscomp$0=u$jscomp$0.st(a,c)):null==f||0<c.version.o(f.version)||0===c.version.o(f.version)&&f.hasPendingWrites?(o$jscomp$0.xn(c,r),
u$jscomp$0=u$jscomp$0.st(a,c)):h$jscomp$0("LocalStore","Ignoring outdated watch update for ",a,". Current version:",f.version," Watch version:",c.version);e$jscomp$1.Gt.has(a)&&s.push(t$jscomp$1.persistence.dr.wh(t$jscomp$0,a))})})),!r.isEqual(L.min())){var c$jscomp$0=t$jscomp$1.ko.ro(t$jscomp$0).next(function(e){return t$jscomp$1.ko.ho(t$jscomp$0,t$jscomp$0.Ro,r)});s.push(c$jscomp$0)}return Fn.Cn(s).next(function(){return o$jscomp$0.apply(t$jscomp$0)}).next(function(){return t$jscomp$1.Rh.ts(t$jscomp$0,
u$jscomp$0)})}).then(function(t){return t$jscomp$1.Eh=i$jscomp$0,t})}function Ti(t$jscomp$0,e){return t$jscomp$0.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),t$jscomp$0.Gn.gr(t,e)})}function Ni(t$jscomp$0,e){return t$jscomp$0.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return t$jscomp$0.ko.wo(t,e).next(function(i$jscomp$0){return i$jscomp$0?(r=i$jscomp$0,Fn.resolve(r)):t$jscomp$0.ko.no(t).next(function(i){return r=
new K(e,i,0,t.Ro),t$jscomp$0.ko.ao(t,r).next(function(){return r})})})}).then(function(t){var r=t$jscomp$0.Eh.get(t.targetId);return(null===r||0<t.Z.o(r.Z))&&(t$jscomp$0.Eh=t$jscomp$0.Eh.st(t.targetId,t),t$jscomp$0.Ih.set(e,t.targetId)),t})}function Ai(e,n,r){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var i,o,s,u;return t$jscomp$4.__generator(this,function(t$jscomp$0){switch(t$jscomp$0.label){case 0:i=e,o=i.Eh.get(n),s=r?"readwrite":"readwrite-primary",t$jscomp$0.label=1;case 1:return t$jscomp$0.trys.push([1,
4,,5]),r?[3,3]:[4,i.persistence.runTransaction("Release target",s,function(t){return i.persistence.dr.removeTarget(t,o)})];case 2:t$jscomp$0.sent(),t$jscomp$0.label=3;case 3:return[3,5];case 4:if(!$n(u=t$jscomp$0.sent()))throw u;return h$jscomp$0("LocalStore","Failed to update sequence numbers for target "+n+": "+u),[3,5];case 5:return i.Eh=i.Eh.remove(n),i.Ih.delete(o.target),[2]}})})}function Si(t$jscomp$1,e$jscomp$0,n$jscomp$0){var i$jscomp$0=L.min(),o=ht();return t$jscomp$1.persistence.runTransaction("Execute query",
"readonly",function(t$jscomp$0){return function(t,e,n){var i=t.Ih.get(n);return void 0!==i?Fn.resolve(t.Eh.get(i)):t.ko.wo(e,n)}(t$jscomp$1,t$jscomp$0,pn(e$jscomp$0)).next(function(e){if(e)return i$jscomp$0=e.lastLimboFreeSnapshotVersion,t$jscomp$1.ko.Ao(t$jscomp$0,e.targetId).next(function(t){o=t})}).next(function(){return t$jscomp$1.Th.ns(t$jscomp$0,e$jscomp$0,n$jscomp$0?i$jscomp$0:L.min(),n$jscomp$0?o:ht())}).next(function(t){return{documents:t,gh:o}})})}function Di(t$jscomp$1,e){var r=t$jscomp$1.ko,
i=t$jscomp$1.Eh.get(e);return i?Promise.resolve(i.target):t$jscomp$1.persistence.runTransaction("Get target data","readonly",function(t$jscomp$0){return r.Me(t$jscomp$0,e).next(function(t){return t?t.target:null})})}function xi(e){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){if(e.code!==D.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;
return h$jscomp$0("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Qi(t,e,n){t="firestore_mutations_"+t+"_"+n;return e.Er()&&(t+="_"+e.uid),t}function Wi(t,e){return"firestore_targets_"+t+"_"+e}function so(e,n){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r,i,o;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return[4,Si((r=e).La,n.query,!0)];case 1:return i=t.sent(),o=n.view.Mc(i),[2,(r.el&&r.il(n.targetId,o.$c),o)]}})})}function uo(e$jscomp$1,
n,r$jscomp$0,i){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var o,s;return t$jscomp$4.__generator(this,function(t$jscomp$1){switch(t$jscomp$1.label){case 0:return(o=e$jscomp$1).nl("applyBatchState()"),[4,function(t$jscomp$0,e$jscomp$0){var r=t$jscomp$0.Gn;return t$jscomp$0.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Pr(t,e$jscomp$0).next(function(e){return e?t$jscomp$0.Rh.Zn(t,e):Fn.resolve(null)})})}(o.La,n)];case 1:return null===(s=t$jscomp$1.sent())?
[3,6]:"pending"!==r$jscomp$0?[3,3]:[4,o.Bc.hu()];case 2:return t$jscomp$1.sent(),[3,4];case 3:"acknowledged"===r$jscomp$0||"rejected"===r$jscomp$0?(o.cl(n,i||null),o.La.Gn.Sr(n)):d$jscomp$0(),t$jscomp$1.label=4;case 4:return[4,o.hl(s)];case 5:return t$jscomp$1.sent(),[3,7];case 6:h$jscomp$0("SyncEngine","Cannot apply mutation batch with id: "+n),t$jscomp$1.label=7;case 7:return[2]}})})}function ao(e$jscomp$0,n$jscomp$0){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r,i,o,s,u,a,c,h;
return t$jscomp$4.__generator(this,function(t$jscomp$1){switch(t$jscomp$1.label){case 0:return r=e$jscomp$0,!0!==n$jscomp$0||!0===r.tl?[3,3]:(i=r.Uc.zu(),[4,co(r,i.N())]);case 1:return o=t$jscomp$1.sent(),r.tl=!0,[4,r.Bc.Su(!0)];case 2:t$jscomp$1.sent();s=0;for(u=o;s<u.length;s++)a=u[s],r.Bc.listen(a);return[3,7];case 3:return!1!==n$jscomp$0||!1===r.tl?[3,7]:(c=[],h=Promise.resolve(),r.Kc.forEach(function(t,e){r.Uc.ic(e)?c.push(e):h=h.then(function(){return r.rl(e),Ai(r.La,e,!0)});r.Bc.lu(e)}),[4,
h]);case 4:return t$jscomp$1.sent(),[4,co(r,c)];case 5:return t$jscomp$1.sent(),function(t$jscomp$0){t$jscomp$0.Hc.forEach(function(t,n){t$jscomp$0.Bc.lu(n)});t$jscomp$0.Yc.Nh();t$jscomp$0.Hc=new Map;t$jscomp$0.zc=new $(U.P)}(r),r.tl=!1,[4,r.Bc.Su(!1)];case 6:t$jscomp$1.sent(),t$jscomp$1.label=7;case 7:return[2]}})})}function co(e,n,r$jscomp$0){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r,i,o,s,u,a,c,h,f,l,p,d,y,g;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:r=
e,i=[],o=[],s=0,u=n,t.label=1;case 1:return s<u.length?(a=u[s],c=void 0,(h=r.Kc.get(a))&&0!==h.length?[4,Ni(r.La,pn(h[0]))]:[3,7]):[3,13];case 2:c=t.sent(),f=0,l=h,t.label=3;case 3:return f<l.length?(p=l[f],d=r.jc.get(p),[4,so(r,d)]):[3,6];case 4:(y=t.sent()).snapshot&&o.push(y.snapshot),t.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,Di(r.La,a)];case 8:return g=t.sent(),[4,Ni(r.La,g)];case 9:return c=t.sent(),[4,r.sl(ho(g),a,!1)];case 10:t.sent(),t.label=11;case 11:i.push(c),
t.label=12;case 12:return s++,[3,1];case 13:return[2,(r.Wc.Ea(o),i)]}})})}function ho(t){return new an(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function fo(t){return t.La.persistence.rh()}function lo(e,n$jscomp$1,r,i){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var o,s,u;return t$jscomp$4.__generator(this,function(t$jscomp$1){switch(t$jscomp$1.label){case 0:return(o=e).tl?(h$jscomp$0("SyncEngine","Ignoring unexpected query state notification."),[3,
8]):[3,1];case 1:if(!o.Kc.has(n$jscomp$1))return[3,8];switch(r){case "current":case "not-current":return[3,2];case "rejected":return[3,5]}return[3,7];case 2:return[4,function(t$jscomp$0){var n$jscomp$0=t$jscomp$0.Ah;return t$jscomp$0.persistence.runTransaction("Get new document changes","readonly",function(t){return n$jscomp$0.Ur(t,t$jscomp$0.mh)}).then(function(t){var n=t.Qr;return t$jscomp$0.mh=t.readTime,n})}(o.La)];case 3:return s=t$jscomp$1.sent(),u=vt.zt(n$jscomp$1,"current"===r),[4,o.hl(s,
u)];case 4:return t$jscomp$1.sent(),[3,8];case 5:return[4,Ai(o.La,n$jscomp$1,!0)];case 6:return t$jscomp$1.sent(),o.rl(n$jscomp$1,i),[3,8];case 7:d$jscomp$0(),t$jscomp$1.label=8;case 8:return[2]}})})}function po(e$jscomp$0,n,r){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var i,o,s,u,a,c,f,l,p,d;return t$jscomp$4.__generator(this,function(y){switch(y.label){case 0:if(!(i=e$jscomp$0).tl)return[3,10];o=0;s=n;y.label=1;case 1:return o<s.length?(u=s[o],i.Kc.has(u)?(h$jscomp$0("SyncEngine",
"Adding an already active target "+u),[3,5]):[4,Di(i.La,u)]):[3,6];case 2:return a=y.sent(),[4,Ni(i.La,a)];case 3:return c=y.sent(),[4,i.sl(ho(a),c.targetId,!1)];case 4:y.sent(),i.Bc.listen(c),y.label=5;case 5:return o++,[3,1];case 6:f=function(e){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return i.Kc.has(e)?[4,Ai(i.La,e,!1).then(function(){i.Bc.lu(e);i.rl(e)}).catch(xi)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},l=0,p=r,y.label=7;case 7:return l<p.length?(d=
p[l],[5,f(d)]):[3,10];case 8:y.sent(),y.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Vo(t){a:{if("object"==typeof t&&null!==t)for(var r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in t&&"function"==typeof t[o]){t=!0;break a}}t=!1}return t}function Co(t,e){if(0!==e.length)throw new x(D.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+es(e.length,"argument")+".");}function qo(t,e,n){if(e.length!==n)throw new x(D.INVALID_ARGUMENT,
"Function "+t+"() requires "+es(n,"argument")+", but was called with "+es(e.length,"argument")+".");}function Mo(t,e,n){if(e.length<n)throw new x(D.INVALID_ARGUMENT,"Function "+t+"() requires at least "+es(n,"argument")+", but was called with "+es(e.length,"argument")+".");}function Fo(t,e,n,r){if(e.length<n||e.length>r)throw new x(D.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+es(e.length,"argument")+".");}function Go(t,e,n,r){Ho(t,e,ts(n)+
" argument",r)}function jo(t,e,n,r){void 0!==r&&Go(t,e,n,r)}function zo(t,e,n,r){void 0!==r&&Ho(t,e,n+" option",r)}function Qo(t,e,n,r,i){if(void 0!==r)a:{e=[];for(var s=0;s<i.length;s++){var a=i[s];if(a===r)break a;e.push(Yo(a))}r=Yo(r);throw new x(D.INVALID_ARGUMENT,"Invalid value "+r+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+e.join(", "));}}function Wo(t$jscomp$0,e,n,r){if(!e.some(function(t){return t===r}))throw new x(D.INVALID_ARGUMENT,"Invalid value "+Yo(r)+" provided to function "+
t$jscomp$0+"() for its "+ts(n)+" argument. Acceptable values: "+e.join(", "));return r}function Ho(t,e,n,r){if("object"===e?!Ko(r):"non-empty string"===e?"string"!=typeof r||""===r:typeof r!==e)throw r=Yo(r),new x(D.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+r);}function Ko(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Yo(t){if(void 0===t)return"undefined";if(null===t)return"null";
if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";a:{if(t.constructor&&(t=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString()))&&1<t.length){t=t[1];break a}t=null}return t?"a custom "+t+" object":"an object"}return"function"==typeof t?"a function":d$jscomp$0()}function Zo(t,e,n){if(void 0===n)throw new x(D.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+
ts(e)+" argument, but it was undefined.");}function Xo(t,e$jscomp$0,n){N(e$jscomp$0,function(e,r){if(0>n.indexOf(e))throw new x(D.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "));})}function $o(t,e,n,r){r=Yo(r);return new x(D.INVALID_ARGUMENT,"Function "+t+"() requires its "+ts(n)+" argument to be a "+e+", but it was: "+r)}function Jo(t,e,n){if(0>=n)throw new x(D.INVALID_ARGUMENT,"Function "+t+"() requires its "+ts(e)+" argument to be a positive number, but it was: "+
n+".");}function ts(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function es(t,e){return t+" "+e+(1===t?"":"s")}function ns(){if("undefined"==typeof Uint8Array)throw new x(D.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.");}function rs(){if("undefined"==typeof atob)throw new x(D.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.");}function hs(t,e,n){return new Es({H_:3,J_:e.settings.J_,methodName:t.G_,X_:n},
e.s,e.serializer,e.ignoreUndefinedProperties)}function Is(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw d$jscomp$0();}}function Ns(t$jscomp$0,e,n,r,i,o){void 0===o&&(o={});t$jscomp$0=t$jscomp$0.wf(o.merge||o.mergeFields?2:0,e,n,i);Rs("Data must be an object, but it was:",t$jscomp$0,r);r=ks(r,t$jscomp$0);if(o.merge){var u=new Oe(t$jscomp$0.qe);e=t$jscomp$0.fieldTransforms}else if(o.mergeFields){i=[];var f=0;for(o=o.mergeFields;f<o.length;f++){var p=o[f],y=void 0;if(p instanceof
os)y=p.j_;else{if("string"!=typeof p)throw d$jscomp$0();y=Os(e,p,n)}if(!t$jscomp$0.contains(y))throw new x(D.INVALID_ARGUMENT,"Field '"+y+"' is specified in your field mask but missing from your input data.");Us(i,y)||i.push(y)}u=new Oe(i);e=t$jscomp$0.fieldTransforms.filter(function(t){return u.Ke(t.field)})}else u=null,e=t$jscomp$0.fieldTransforms;return new bs(new Je(r),u,e)}function As(t$jscomp$0,e,n,r$jscomp$0){var i=t$jscomp$0.wf(1,e,n);Rs("Data must be an object, but it was:",i,r$jscomp$0);
var o=[],s=new tn;N(r$jscomp$0,function(t,r){t=Os(e,t,n);var a=i._f(t);r instanceof as&&r.K_ instanceof cs?o.push(t):(r=xs(r,a),null!=r&&(o.push(t),s.set(t,r)))});t$jscomp$0=new Oe(o);return new _s(s.ze(),t$jscomp$0,i.fieldTransforms)}function Ss(t,e,n,r,i,o){t=t.wf(1,e,n);n=[Ps(e,r,n)];i=[i];if(0!=o.length%2)throw new x(D.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(r=0;r<o.length;r+=2)n.push(Ps(e,o[r])),
i.push(o[r+1]);o=[];e=new tn;for(r=n.length-1;0<=r;--r)if(!Us(o,n[r])){var p=n[r],d=i[r],y=t._f(p);d instanceof as&&d.K_ instanceof cs?o.push(p):(d=xs(d,y),null!=d&&(o.push(p),e.set(p,d)))}n=new Oe(o);return new _s(e.ze(),n,t.fieldTransforms)}function Ds(t,e,n,r){return void 0===r&&(r=!1),xs(n,t.wf(r?4:3,e))}function xs(t$jscomp$0,e$jscomp$0){if(Ls(t$jscomp$0))return Rs("Unsupported field value:",e$jscomp$0,t$jscomp$0),ks(t$jscomp$0,e$jscomp$0);if(t$jscomp$0 instanceof as)return function(t,e){if(!Is(e.H_))throw e.Y_(t.G_+
"() can only be used with update() and set()");if(!e.path)throw e.Y_(t.G_+"() is not currently supported inside arrays");(t=t.z_(e))&&e.fieldTransforms.push(t)}(t$jscomp$0,e$jscomp$0),null;if(e$jscomp$0.path&&e$jscomp$0.qe.push(e$jscomp$0.path),t$jscomp$0 instanceof Array){if(e$jscomp$0.settings.X_&&4!==e$jscomp$0.H_)throw e$jscomp$0.Y_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0;i<t.length;i++){var s=xs(t[i],e.ff(r));null==s&&(s={nullValue:"NULL_VALUE"});n.push(s);
r++}return{arrayValue:{values:n}}}(t$jscomp$0,e$jscomp$0)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Kt(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date)return t=k.fromDate(t),{timestampValue:Yt(e.serializer,t)};if(t instanceof k)return t=new k(t.seconds,1E3*Math.floor(t.nanoseconds/1E3)),{timestampValue:Yt(e.serializer,t)};if(t instanceof gs)return{geoPointValue:{latitude:t.latitude,
longitude:t.longitude}};if(t instanceof is)return{bytesValue:Zt(e.serializer,t)};if(t instanceof ws){var i=e.s,o=t.sf;if(!o.isEqual(i))throw e.Y_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Jt(t.sf||e.s,t.if.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Y_("Unsupported field value: "+Yo(t));}(t$jscomp$0,e$jscomp$0)}function ks(t$jscomp$0,e){var n={};return A(t$jscomp$0)?e.path&&
0<e.path.length&&e.qe.push(e.path):N(t$jscomp$0,function(t,r){r=xs(r,e.cf(t));null!=r&&(n[t]=r)}),{mapValue:{fields:n}}}function Ls(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof k||t instanceof gs||t instanceof is||t instanceof ws||t instanceof as)}function Rs(t,e,n){if(!Ls(n)||!Ko(n))throw n=Yo(n),"an object"===n?e.Y_(t+" a custom object"):e.Y_(t+" "+n);}function Ps(t,e,n){if(e instanceof os)return e.j_;if("string"==typeof e)return Os(t,e);throw Vs("Field path arguments must be of type string or FieldPath.",
t,!1,void 0,n);}function Os(e,n,r){try{if(0<=n.search(us))throw new x(D.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'");try{var JSCompiler_inline_result=new (ss.bind.apply(ss,t$jscomp$4.__spreadArrays([void 0],n.split("."))))}catch(t$31){throw new x(D.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");}return JSCompiler_inline_result.j_}catch(n$32){throw Vs((i=n$32)instanceof Error?
i.message:i.toString(),e,!1,void 0,r);}var i}function Vs(t,e,n,r,i){var o=r&&!r._(),s=void 0!==i;e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new x(D.INVALID_ARGUMENT,e+". "+t+n)}function Us(t$jscomp$0,e){return t$jscomp$0.some(function(t){return t.isEqual(e)})}function Fs(t,e,n,r,i){var o=new Uo(i),s=new go(n,o,r);return t.ai(function(){return e.listen(s)}),function(){o.Q_();
t.ai(function(){return e.lu(s)})}}function Xs(t$jscomp$1,e$jscomp$0,n$jscomp$0,r,i,o,s){if(i.M()){if("array-contains"===o||"array-contains-any"===o)throw new x(D.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){tu(s,o);e$jscomp$0=[];for(n$jscomp$0=0;n$jscomp$0<s.length;n$jscomp$0++)e$jscomp$0.push(Js(r,t$jscomp$1,s[n$jscomp$0]));r={arrayValue:{values:e$jscomp$0}}}else r=Js(r,t$jscomp$1,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==
o||tu(s,o),r=Ds(n$jscomp$0,e$jscomp$0,s,"in"===o||"not-in"===o);i=In.create(i,o,r);return function(t$jscomp$0,e){if(e._n()){var n=t$jscomp$0.ln();if(null!==n&&!n.isEqual(e.field))throw new x(D.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (\x3c, \x3c\x3d, \x3e, or \x3e\x3d) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=t$jscomp$0.cn();null!==n&&eu(t$jscomp$0,e.field,n)}t$jscomp$0=t$jscomp$0.fn(function(t){switch(t){case "!\x3d":return["!\x3d",
"not-in"];case "array-contains":return["array-contains","array-contains-any","not-in"];case "in":return["array-contains-any","in","not-in"];case "array-contains-any":return["array-contains","array-contains-any","in","not-in"];case "not-in":return["array-contains","array-contains-any","in","not-in","!\x3d"];default:return[]}}(e.op));if(null!==t$jscomp$0)throw t$jscomp$0===e.op?new x(D.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new x(D.INVALID_ARGUMENT,
"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t$jscomp$0.toString()+"' filters.");}(t$jscomp$1,i),i}function Js(t,e,n){if("string"==typeof n){if(""===n)throw new x(D.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(null===e.collectionGroup&&-1!==n.indexOf("/"))throw new x(D.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+
n+"' contains a '/' character.");e=e.path.child(P.k(n));if(!U.j(e))throw new x(D.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return Ct(t,new U(e))}if(n instanceof ws)return Ct(t,n.if);throw new x(D.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+
Yo(n)+".");}function tu(t$jscomp$0,e){if(!Array.isArray(t$jscomp$0)||0===t$jscomp$0.length)throw new x(D.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t$jscomp$0.length)throw new x(D.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(0<=t$jscomp$0.indexOf(null))throw new x(D.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");
if(0<t$jscomp$0.filter(function(t){return Number.isNaN(t)}).length)throw new x(D.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.");}}function eu(t,e,n){if(!n.isEqual(e))throw new x(D.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (\x3c, \x3c\x3d, \x3e, or \x3e\x3d) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.");
}function nu(t){if(t.un()&&0===t.en.length)throw new x(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause");}function su(t$jscomp$0,e$jscomp$0){if(void 0===e$jscomp$0)return{merge:!1};if(Xo(t$jscomp$0,e$jscomp$0,["merge","mergeFields"]),zo(t$jscomp$0,"boolean","merge",e$jscomp$0.merge),function(t,e,n,r,i){if(void 0!==r){if(!(r instanceof Array))throw new x(D.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Yo(r));for(var o=
0;o<r.length;++o)if(!i(r[o]))throw new x(D.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+Yo(r[o]));}}(t$jscomp$0,"mergeFields","a string or a FieldPath",e$jscomp$0.mergeFields,function(t){return"string"==typeof t||t instanceof ss}),void 0!==e$jscomp$0.mergeFields&&void 0!==e$jscomp$0.merge)throw new x(D.INVALID_ARGUMENT,"Invalid options passed to function "+t$jscomp$0+'(): You cannot specify both "merge" and "mergeFields".');return e$jscomp$0}
function uu(t,e){return void 0===e?{}:(Xo(t,e,["serverTimestamps"]),Qo(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function au(t,e){jo(t,"object",1,e);e&&(Xo(t,e,["source"]),Qo(t,0,"source",e.source,["default","server","cache"]))}function cu(t,e,n){if(e instanceof ws){if(e.firestore!==n)throw new x(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw $o(t,"DocumentReference",1,e);}function hu(t){switch(t){case 0:return"added";
case 2:case 3:return"modified";case 1:return"removed";default:return d$jscomp$0()}}function fu(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}function pu(t$jscomp$2){!function(t$jscomp$1,e){t$jscomp$1.INTERNAL.registerComponent((new o$jscomp$3.Component("firestore",function(t$jscomp$0){var t=t$jscomp$0.getProvider("app").getImmediate();t$jscomp$0=t$jscomp$0.getProvider("auth-internal");var n=new Oo,r=new Po(n);return new zs(t,t$jscomp$0,r,n)},"PUBLIC")).setServiceProps(Object.assign({},
lu)))}(t$jscomp$2);t$jscomp$2.registerVersion("@firebase/firestore","1.16.6")}var process=require("module$node_modules$process$browser");"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t$jscomp$4=require("module$node_modules$tslib$tslib"),e$jscomp$4=require("module$node_modules$$firebase$app$dist$index_cjs"),n$jscomp$2=require("module$node_modules$$firebase$logger$dist$index_cjs"),r$jscomp$2=require("module$node_modules$$firebase$util$dist$index_cjs"),i$jscomp$2=require("module$node_modules$$firebase$webchannel_wrapper$dist$index"),
o$jscomp$3=require("module$node_modules$$firebase$component$dist$index_cjs"),u$jscomp$1=e$jscomp$4&&"object"==typeof e$jscomp$4&&"default"in e$jscomp$4?e$jscomp$4:{default:e$jscomp$4},a$jscomp$1=new n$jscomp$2.Logger("@firebase/firestore"),m=function(){function t(){}return t.t=function(){for(var e=62*Math.floor(256/62),n="";20>n.length;){var e$jscomp$0="undefined"!=typeof self&&(self.crypto||self.msCrypto);var r=new Uint8Array(40);if(e$jscomp$0&&"function"==typeof e$jscomp$0.getRandomValues)e$jscomp$0.getRandomValues(r);
else for(e$jscomp$0=0;40>e$jscomp$0;e$jscomp$0++)r[e$jscomp$0]=Math.floor(256*Math.random());for(e$jscomp$0=0;e$jscomp$0<r.length;++e$jscomp$0)20>n.length&&r[e$jscomp$0]<e&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[e$jscomp$0]%62))}return n},t}(),I=function(t,e,n,r,i){this.s=t;this.persistenceKey=e;this.host=n;this.ssl=r;this.forceLongPolling=i},E=function(){function t$jscomp$0(t,e){this.projectId=t;this.database=e||"(default)"}return Object.defineProperty(t$jscomp$0.prototype,
"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t$jscomp$0.prototype.isEqual=function(e){return e instanceof t$jscomp$0&&e.projectId===this.projectId&&e.database===this.database},t$jscomp$0.prototype.o=function(t){return w(this.projectId,t.projectId)||w(this.database,t.database)},t$jscomp$0}(),S=function(){function t$jscomp$0(t,e){this.h=t;this.u=e;this.l={}}return t$jscomp$0.prototype.get=function(t){var e=this.h(t);e=this.l[e];if(void 0!==e)for(var r=0;r<e.length;r++){var o=
e[r],u=o[1];if(this.u(o[0],t))return u}},t$jscomp$0.prototype.has=function(t){return void 0!==this.get(t)},t$jscomp$0.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(n=0;n<r.length;n++)if(this.u(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},t$jscomp$0.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},t$jscomp$0.prototype.forEach=
function(t){N(this.l,function(e,n){for(e=0;e<n.length;e++){var o=n[e];t(o[0],o[1])}})},t$jscomp$0.prototype._=function(){return A(this.l)},t$jscomp$0}(),D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",
OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=function(e){function n$jscomp$0(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code\x3d"+r.code+"]: "+r.message},r}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0}(Error),k=function(){function t$jscomp$0(t,e){if(this.seconds=t,this.nanoseconds=e,0>e)throw new x(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+
e);if(1E9<=e)throw new x(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(-62135596800>t)throw new x(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new x(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);}return t$jscomp$0.now=function(){return t$jscomp$0.fromMillis(Date.now())},t$jscomp$0.fromDate=function(e){return t$jscomp$0.fromMillis(e.getTime())},t$jscomp$0.fromMillis=function(e){var n=Math.floor(e/1E3);return new t$jscomp$0(n,1E6*(e-
1E3*n))},t$jscomp$0.prototype.toDate=function(){return new Date(this.toMillis())},t$jscomp$0.prototype.toMillis=function(){return 1E3*this.seconds+this.nanoseconds/1E6},t$jscomp$0.prototype.T=function(t){return this.seconds===t.seconds?w(this.nanoseconds,t.nanoseconds):w(this.seconds,t.seconds)},t$jscomp$0.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t$jscomp$0.prototype.toString=function(){return"Timestamp(seconds\x3d"+this.seconds+", nanoseconds\x3d"+
this.nanoseconds+")"},t$jscomp$0.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t$jscomp$0.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t$jscomp$0}(),L=function(){function t$jscomp$0(t){this.timestamp=t}return t$jscomp$0.I=function(e){return new t$jscomp$0(e)},t$jscomp$0.min=function(){return new t$jscomp$0(new k(0,0))},t$jscomp$0.prototype.o=function(t){return this.timestamp.T(t.timestamp)},
t$jscomp$0.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t$jscomp$0.prototype.m=function(){return 1E6*this.timestamp.seconds+this.timestamp.nanoseconds/1E3},t$jscomp$0.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t$jscomp$0.prototype.A=function(){return this.timestamp},t$jscomp$0}(),R=function(){function t$jscomp$0(t,e,n){void 0===e?e=0:e>t.length&&d$jscomp$0();void 0===n?n=t.length-e:n>t.length-e&&d$jscomp$0();this.segments=t;this.offset=
e;this.R=n}return Object.defineProperty(t$jscomp$0.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),t$jscomp$0.prototype.isEqual=function(e){return 0===t$jscomp$0.P(this,e)},t$jscomp$0.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t$jscomp$0?e.forEach(function(t){n.push(t)}):n.push(e),this.g(n)},t$jscomp$0.prototype.limit=function(){return this.offset+this.length},t$jscomp$0.prototype.V=function(t){return t=void 0===
t?1:t,this.g(this.segments,this.offset+t,this.length-t)},t$jscomp$0.prototype.p=function(){return this.g(this.segments,this.offset,this.length-1)},t$jscomp$0.prototype.v=function(){return this.segments[this.offset]},t$jscomp$0.prototype.S=function(){return this.get(this.length-1)},t$jscomp$0.prototype.get=function(t){return this.segments[this.offset+t]},t$jscomp$0.prototype._=function(){return 0===this.length},t$jscomp$0.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==
t.get(e))return!1;return!0},t$jscomp$0.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t$jscomp$0.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t$jscomp$0.prototype.N=function(){return this.segments.slice(this.offset,this.limit())},t$jscomp$0.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<
e.length?-1:t.length>e.length?1:0},t$jscomp$0}(),P=function(e$jscomp$0){function n(){return null!==e$jscomp$0&&e$jscomp$0.apply(this,arguments)||this}return t$jscomp$4.__extends(n,e$jscomp$0),n.prototype.g=function(t,e,r){return new n(t,e,r)},n.prototype.F=function(){return this.N().join("/")},n.prototype.toString=function(){return this.F()},n.k=function(t$jscomp$0){if(0<=t$jscomp$0.indexOf("//"))throw new x(D.INVALID_ARGUMENT,"Invalid path ("+t$jscomp$0+"). Paths must not contain // in them.");return new n(t$jscomp$0.split("/").filter(function(t){return 0<
t.length}))},n.$=function(){return new n([])},n}(R),O=/^[_a-zA-Z][_a-zA-Z0-9]*$/,V=function(e$jscomp$0){function n(){return null!==e$jscomp$0&&e$jscomp$0.apply(this,arguments)||this}return t$jscomp$4.__extends(n,e$jscomp$0),n.prototype.g=function(t,e,r){return new n(t,e,r)},n.O=function(t){return O.test(t)},n.prototype.F=function(){return this.N().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),n.O(t)||(t="`"+t+"`"),t}).join(".")},n.prototype.toString=function(){return this.F()},
n.prototype.M=function(){return 1===this.length&&"__name__"===this.get(0)},n.L=function(){return new n(["__name__"])},n.q=function(t){for(var e=[],r="",i=0,o=function(){if(0===r.length)throw new x(D.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(r);r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new x(D.INVALID_ARGUMENT,"Path has trailing escape character: "+t);u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==
u)throw new x(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u;i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new x(D.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)},n.$=function(){return new n([])},n}(R),U=function(){function t$jscomp$0(t){this.path=t}return t$jscomp$0.B=function(e){return new t$jscomp$0(P.k(e))},t$jscomp$0.U=function(e){return new t$jscomp$0(P.k(e).V(5))},t$jscomp$0.prototype.W=function(t){return 2<=this.path.length&&this.path.get(this.path.length-
2)===t},t$jscomp$0.prototype.isEqual=function(t){return null!==t&&0===P.P(this.path,t.path)},t$jscomp$0.prototype.toString=function(){return this.path.toString()},t$jscomp$0.P=function(t,e){return P.P(t.path,e.path)},t$jscomp$0.j=function(t){return 0==t.length%2},t$jscomp$0.K=function(e){return new t$jscomp$0(new P(e.slice()))},t$jscomp$0}(),F=function(t,e,n,r,i,o,s){void 0===e&&(e=null);void 0===n&&(n=[]);void 0===r&&(r=[]);void 0===i&&(i=null);void 0===o&&(o=null);void 0===s&&(s=null);this.path=
t;this.collectionGroup=e;this.orderBy=n;this.filters=r;this.limit=i;this.startAt=o;this.endAt=s;this.G=null},Q=function(){function t$jscomp$0(t){this.H=t}return t$jscomp$0.fromBase64String=function(e){return new t$jscomp$0(atob(e))},t$jscomp$0.fromUint8Array=function(e$jscomp$0){for(var e="",n=0;n<e$jscomp$0.length;++n)e+=String.fromCharCode(e$jscomp$0[n]);return new t$jscomp$0(e)},t$jscomp$0.prototype.toBase64=function(){return t=this.H,btoa(t);var t},t$jscomp$0.prototype.toUint8Array=function(){for(var t=
this.H,e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e},t$jscomp$0.prototype.Y=function(){return 2*this.H.length},t$jscomp$0.prototype.o=function(t){return w(this.H,t.H)},t$jscomp$0.prototype.isEqual=function(t){return this.H===t.H},t$jscomp$0}();Q.J=new Q("");var W,H,K=function(){function t$jscomp$0(t,e,n,r,i,o,s){void 0===i&&(i=L.min());void 0===o&&(o=L.min());void 0===s&&(s=Q.J);this.target=t;this.targetId=e;this.X=n;this.sequenceNumber=r;this.Z=i;this.lastLimboFreeSnapshotVersion=
o;this.resumeToken=s}return t$jscomp$0.prototype.tt=function(e){return new t$jscomp$0(this.target,this.targetId,this.X,e,this.Z,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t$jscomp$0.prototype.et=function(e,n){return new t$jscomp$0(this.target,this.targetId,this.X,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t$jscomp$0.prototype.nt=function(e){return new t$jscomp$0(this.target,this.targetId,this.X,this.sequenceNumber,this.Z,e,this.resumeToken)},t$jscomp$0}(),Y=function(t){this.count=
t};(H=W||(W={}))[H.OK=0]="OK";H[H.CANCELLED=1]="CANCELLED";H[H.UNKNOWN=2]="UNKNOWN";H[H.INVALID_ARGUMENT=3]="INVALID_ARGUMENT";H[H.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED";H[H.NOT_FOUND=5]="NOT_FOUND";H[H.ALREADY_EXISTS=6]="ALREADY_EXISTS";H[H.PERMISSION_DENIED=7]="PERMISSION_DENIED";H[H.UNAUTHENTICATED=16]="UNAUTHENTICATED";H[H.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED";H[H.FAILED_PRECONDITION=9]="FAILED_PRECONDITION";H[H.ABORTED=10]="ABORTED";H[H.OUT_OF_RANGE=11]="OUT_OF_RANGE";H[H.UNIMPLEMENTED=
12]="UNIMPLEMENTED";H[H.INTERNAL=13]="INTERNAL";H[H.UNAVAILABLE=14]="UNAVAILABLE";H[H.DATA_LOSS=15]="DATA_LOSS";var $=function(){function t$jscomp$0(t,e){this.P=t;this.root=e||tt.EMPTY}return t$jscomp$0.prototype.st=function(e,n){return new t$jscomp$0(this.P,this.root.st(e,n,this.P).copy(null,null,tt.it,null,null))},t$jscomp$0.prototype.remove=function(e){return new t$jscomp$0(this.P,this.root.remove(e,this.P).copy(null,null,tt.it,null,null))},t$jscomp$0.prototype.get=function(t){for(var e=this.root;!e._();){var n=
this.P(t,e.key);if(0===n)return e.value;0>n?e=e.left:0<n&&(e=e.right)}return null},t$jscomp$0.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;0>r?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t$jscomp$0.prototype._=function(){return this.root._()},Object.defineProperty(t$jscomp$0.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t$jscomp$0.prototype.rt=function(){return this.root.rt()},t$jscomp$0.prototype.ot=
function(){return this.root.ot()},t$jscomp$0.prototype.ht=function(t){return this.root.ht(t)},t$jscomp$0.prototype.forEach=function(t){this.ht(function(e,n){return t(e,n),!1})},t$jscomp$0.prototype.toString=function(){var t=[];return this.ht(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t$jscomp$0.prototype.at=function(t){return this.root.at(t)},t$jscomp$0.prototype.ut=function(){return new J(this.root,null,this.P,!1)},t$jscomp$0.prototype.ct=function(t){return new J(this.root,t,
this.P,!1)},t$jscomp$0.prototype.lt=function(){return new J(this.root,null,this.P,!0)},t$jscomp$0.prototype._t=function(t){return new J(this.root,t,this.P,!0)},t$jscomp$0}(),J=function(){function t$jscomp$0(t,e,n,r){this.ft=r;this.dt=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),0>i)t=this.ft?t.left:t.right;else{if(0===i){this.dt.push(t);break}this.dt.push(t);t=this.ft?t.right:t.left}}return t$jscomp$0.prototype.wt=function(){var t=this.dt.pop(),e={key:t.key,value:t.value};if(this.ft)for(t=
t.left;!t._();)this.dt.push(t),t=t.right;else for(t=t.right;!t._();)this.dt.push(t),t=t.left;return e},t$jscomp$0.prototype.Tt=function(){return 0<this.dt.length},t$jscomp$0.prototype.Et=function(){if(0===this.dt.length)return null;var t=this.dt[this.dt.length-1];return{key:t.key,value:t.value}},t$jscomp$0}(),tt=function(){function t$jscomp$0(e,n,r,i,o){this.key=e;this.value=n;this.color=null!=r?r:t$jscomp$0.RED;this.left=null!=i?i:t$jscomp$0.EMPTY;this.right=null!=o?o:t$jscomp$0.EMPTY;this.size=
this.left.size+1+this.right.size}return t$jscomp$0.prototype.copy=function(e,n,r,i,o){return new t$jscomp$0(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t$jscomp$0.prototype._=function(){return!1},t$jscomp$0.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},t$jscomp$0.prototype.at=function(t){return this.right.at(t)||t(this.key,this.value)||this.left.at(t)},t$jscomp$0.prototype.min=function(){return this.left._()?
this:this.left.min()},t$jscomp$0.prototype.rt=function(){return this.min().key},t$jscomp$0.prototype.ot=function(){return this.right._()?this.key:this.right.ot()},t$jscomp$0.prototype.st=function(t,e,n){var i=n(t,this.key);return(0>i?this.copy(null,null,null,this.left.st(t,e,n),null):0===i?this.copy(null,e,null,null,null):this.copy(null,null,null,null,this.right.st(t,e,n))).It()},t$jscomp$0.prototype.At=function(){if(this.left._())return t$jscomp$0.EMPTY;var e=this;return e.left.Rt()||e.left.left.Rt()||
(e=e.Pt()),e.copy(null,null,null,e.left.At(),null).It()},t$jscomp$0.prototype.remove=function(e,n){var i=this;if(0>n(e,i.key))i.left._()||i.left.Rt()||i.left.left.Rt()||(i=i.Pt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Rt()&&(i=i.gt()),i.right._()||i.right.Rt()||i.right.left.Rt()||(i=i.Vt()),0===n(e,i.key)){if(i.right._())return t$jscomp$0.EMPTY;var r=i.right.min();i=i.copy(r.key,r.value,null,null,i.right.At())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.It()},
t$jscomp$0.prototype.Rt=function(){return this.color},t$jscomp$0.prototype.It=function(){var t=this;return t.right.Rt()&&!t.left.Rt()&&(t=t.yt()),t.left.Rt()&&t.left.left.Rt()&&(t=t.gt()),t.left.Rt()&&t.right.Rt()&&(t=t.pt()),t},t$jscomp$0.prototype.Pt=function(){var t=this.pt();return t.right.left.Rt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.gt())).yt()).pt()),t},t$jscomp$0.prototype.Vt=function(){var t=this.pt();return t.left.left.Rt()&&(t=(t=t.gt()).pt()),t},t$jscomp$0.prototype.yt=function(){var e=
this.copy(null,null,t$jscomp$0.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t$jscomp$0.prototype.gt=function(){var e=this.copy(null,null,t$jscomp$0.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t$jscomp$0.prototype.pt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t$jscomp$0.prototype.bt=function(){var t=this.vt();
return Math.pow(2,t)<=this.size+1},t$jscomp$0.prototype.vt=function(){if(this.Rt()&&this.left.Rt())throw d$jscomp$0();if(this.right.Rt())throw d$jscomp$0();var t=this.left.vt();if(t!==this.right.vt())throw d$jscomp$0();return t+(this.Rt()?0:1)},t$jscomp$0}();tt.EMPTY=null;tt.RED=!0;tt.it=!1;tt.EMPTY=new (function(){function t$jscomp$0(){this.size=0}return Object.defineProperty(t$jscomp$0.prototype,"key",{get:function(){throw d$jscomp$0();},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$0.prototype,
"value",{get:function(){throw d$jscomp$0();},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$0.prototype,"color",{get:function(){throw d$jscomp$0();},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$0.prototype,"left",{get:function(){throw d$jscomp$0();},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$0.prototype,"right",{get:function(){throw d$jscomp$0();},enumerable:!1,configurable:!0}),t$jscomp$0.prototype.copy=function(t,e,n,r,i){return this},t$jscomp$0.prototype.st=
function(t,e,n){return new tt(t,e)},t$jscomp$0.prototype.remove=function(t,e){return this},t$jscomp$0.prototype._=function(){return!0},t$jscomp$0.prototype.ht=function(t){return!1},t$jscomp$0.prototype.at=function(t){return!1},t$jscomp$0.prototype.rt=function(){return null},t$jscomp$0.prototype.ot=function(){return null},t$jscomp$0.prototype.Rt=function(){return!1},t$jscomp$0.prototype.bt=function(){return!0},t$jscomp$0.prototype.vt=function(){return 0},t$jscomp$0}());var et=function(){function t$jscomp$1(t){this.P=
t;this.data=new $(this.P)}return t$jscomp$1.prototype.has=function(t){return null!==this.data.get(t)},t$jscomp$1.prototype.first=function(){return this.data.rt()},t$jscomp$1.prototype.last=function(){return this.data.ot()},Object.defineProperty(t$jscomp$1.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t$jscomp$1.prototype.indexOf=function(t){return this.data.indexOf(t)},t$jscomp$1.prototype.forEach=function(t){this.data.ht(function(e,n){return t(e),!1})},t$jscomp$1.prototype.St=
function(t,e){for(var n=this.data.ct(t[0]);n.Tt();){var r=n.wt();if(0<=this.P(r.key,t[1]))break;e(r.key)}},t$jscomp$1.prototype.Dt=function(t,e){for(e=void 0!==e?this.data.ct(e):this.data.ut();e.Tt()&&t(e.wt().key););},t$jscomp$1.prototype.Ct=function(t){t=this.data.ct(t);return t.Tt()?t.wt().key:null},t$jscomp$1.prototype.ut=function(){return new nt(this.data.ut())},t$jscomp$1.prototype.ct=function(t){return new nt(this.data.ct(t))},t$jscomp$1.prototype.add=function(t){return this.copy(this.data.remove(t).st(t,
!0))},t$jscomp$1.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t$jscomp$1.prototype._=function(){return this.data._()},t$jscomp$1.prototype.Nt=function(t$jscomp$0){var e=this;return e.size<t$jscomp$0.size&&(e=t$jscomp$0,t$jscomp$0=this),t$jscomp$0.forEach(function(t){e=e.add(t)}),e},t$jscomp$1.prototype.isEqual=function(e){if(!(e instanceof t$jscomp$1)||this.size!==e.size)return!1;var n=this.data.ut();for(e=e.data.ut();n.Tt();){var i=n.wt().key,o=e.wt().key;
if(0!==this.P(i,o))return!1}return!0},t$jscomp$1.prototype.N=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t$jscomp$1.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t$jscomp$1.prototype.copy=function(e){var n=new t$jscomp$1(this.P);return n.data=e,n},t$jscomp$1}(),nt=function(){function t$jscomp$0(t){this.Ft=t}return t$jscomp$0.prototype.wt=function(){return this.Ft.wt().key},t$jscomp$0.prototype.Tt=function(){return this.Ft.Tt()},
t$jscomp$0}(),rt=new $(U.P),st=new $(U.P),at=new $(U.P),ct=new et(U.P),ft=new et(w),pt=function(){function t$jscomp$1(t$jscomp$0){this.P=t$jscomp$0?function(e,n){return t$jscomp$0(e,n)||U.P(e.key,n.key)}:function(t,e){return U.P(t.key,e.key)};this.kt=st;this.$t=new $(this.P)}return t$jscomp$1.xt=function(e){return new t$jscomp$1(e.P)},t$jscomp$1.prototype.has=function(t){return null!=this.kt.get(t)},t$jscomp$1.prototype.get=function(t){return this.kt.get(t)},t$jscomp$1.prototype.first=function(){return this.$t.rt()},
t$jscomp$1.prototype.last=function(){return this.$t.ot()},t$jscomp$1.prototype._=function(){return this.$t._()},t$jscomp$1.prototype.indexOf=function(t){return(t=this.kt.get(t))?this.$t.indexOf(t):-1},Object.defineProperty(t$jscomp$1.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t$jscomp$1.prototype.forEach=function(t){this.$t.ht(function(e,n){return t(e),!1})},t$jscomp$1.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.kt.st(t.key,t),e.$t.st(t,
null))},t$jscomp$1.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.kt.remove(t),this.$t.remove(e)):this},t$jscomp$1.prototype.isEqual=function(e){if(!(e instanceof t$jscomp$1)||this.size!==e.size)return!1;var n=this.$t.ut();for(e=e.$t.ut();n.Tt();){var i=n.wt().key,o=e.wt().key;if(!i.isEqual(o))return!1}return!0},t$jscomp$1.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+
"\n)"},t$jscomp$1.prototype.copy=function(e,n){var r=new t$jscomp$1;return r.P=this.P,r.kt=e,r.$t=n,r},t$jscomp$1}(),dt=function(){function t$jscomp$0(){this.Ot=new $(U.P)}return t$jscomp$0.prototype.track=function(t){var e=t.doc.key,n=this.Ot.get(e);n?0!==t.type&&3===n.type?this.Ot=this.Ot.st(e,t):3===t.type&&1!==n.type?this.Ot=this.Ot.st(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Ot=this.Ot.st(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Ot=this.Ot.st(e,{type:0,doc:t.doc}):1===
t.type&&0===n.type?this.Ot=this.Ot.remove(e):1===t.type&&2===n.type?this.Ot=this.Ot.st(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Ot=this.Ot.st(e,{type:2,doc:t.doc}):d$jscomp$0():this.Ot=this.Ot.st(e,t)},t$jscomp$0.prototype.Mt=function(){var t=[];return this.Ot.ht(function(e,n){t.push(n)}),t},t$jscomp$0}(),yt=function(){function t$jscomp$0(t,e,n,r,i,o,s,u){this.query=t;this.docs=e;this.Lt=n;this.docChanges=r;this.qt=i;this.fromCache=o;this.Bt=s;this.Ut=u}return t$jscomp$0.Qt=function(e,n,
r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t$jscomp$0(e,n,pt.xt(n),o,r,i,!0,!1)},Object.defineProperty(t$jscomp$0.prototype,"hasPendingWrites",{get:function(){return!this.qt._()},enumerable:!1,configurable:!0}),t$jscomp$0.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.qt.isEqual(t.qt)&&gn(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Lt.isEqual(t.Lt)))return!1;var e=this.docChanges;t=t.docChanges;if(e.length!==t.length)return!1;
for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||!e[r].doc.isEqual(t[r].doc))return!1;return!0},t$jscomp$0}(),vt=function(){function t$jscomp$0(t,e,n,r,i){this.Z=t;this.Wt=e;this.jt=n;this.Kt=r;this.Gt=i}return t$jscomp$0.zt=function(e,n){var r=new Map;return r.set(e,gt.Ht(e,n)),new t$jscomp$0(L.min(),r,ft,rt,ht())},t$jscomp$0}(),gt=function(){function t$jscomp$0(t,e,n,r,i){this.resumeToken=t;this.Yt=e;this.Jt=n;this.Xt=r;this.Zt=i}return t$jscomp$0.Ht=function(e,n){return new t$jscomp$0(Q.J,
n,ht(),ht(),ht())},t$jscomp$0}(),mt=function(t,e,n,r){this.te=t;this.removedTargetIds=e;this.key=n;this.ee=r},wt=function(t,e){this.targetId=t;this.ne=e},bt=function(t,e,n,r){void 0===n&&(n=Q.J);void 0===r&&(r=null);this.state=t;this.targetIds=e;this.resumeToken=n;this.cause=r},_t=function(){function t$jscomp$0(){this.se=0;this.ie=new $(U.P);this.re=Q.J;this.oe=!1;this.he=!0}return Object.defineProperty(t$jscomp$0.prototype,"Yt",{get:function(){return this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$0.prototype,
"resumeToken",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$0.prototype,"ae",{get:function(){return 0!==this.se},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$0.prototype,"ue",{get:function(){return this.he},enumerable:!1,configurable:!0}),t$jscomp$0.prototype.ce=function(t){0<t.Y()&&(this.he=!0,this.re=t)},t$jscomp$0.prototype.le=function(){var t=ht(),e=ht(),n=ht();return this.ie.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;
case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:d$jscomp$0()}}),new gt(this.re,this.oe,t,e,n)},t$jscomp$0.prototype._e=function(){this.he=!1;this.ie=new $(U.P)},t$jscomp$0.prototype.fe=function(t,e){this.he=!0;this.ie=this.ie.st(t,e)},t$jscomp$0.prototype.de=function(t){this.he=!0;this.ie=this.ie.remove(t)},t$jscomp$0.prototype.we=function(){this.se+=1},t$jscomp$0.prototype.Te=function(){--this.se},t$jscomp$0.prototype.Ee=function(){this.oe=this.he=!0},t$jscomp$0}(),It=function(){function t$jscomp$2(t){this.Ie=
t;this.me=new Map;this.Ae=rt;this.Re=new $(U.P);this.Pe=new et(w)}return t$jscomp$2.prototype.ge=function(t){for(var e=0,n=t.te;e<n.length;e++){var r=n[e];t.ee instanceof rn?this.Ve(r,t.ee):t.ee instanceof on&&this.ye(r,t.key,t.ee)}e=0;for(n=t.removedTargetIds;e<n.length;e++)this.ye(n[e],t.key,t.ee)},t$jscomp$2.prototype.pe=function(t){var e=this;this.be(t,function(n){var r=e.ve(n);switch(t.state){case 0:e.Se(n)&&r.ce(t.resumeToken);break;case 1:r.Te();r.ae||r._e();r.ce(t.resumeToken);break;case 2:r.Te();
r.ae||e.removeTarget(n);break;case 3:e.Se(n)&&(r.Ee(),r.ce(t.resumeToken));break;case 4:e.Se(n)&&(e.De(n),r.ce(t.resumeToken));break;default:d$jscomp$0()}})},t$jscomp$2.prototype.be=function(t$jscomp$0,e){var n=this;0<t$jscomp$0.targetIds.length?t$jscomp$0.targetIds.forEach(e):this.me.forEach(function(t,r){n.Se(r)&&e(r)})},t$jscomp$2.prototype.Ce=function(t){var e=t.targetId;t=t.ne.count;var r=this.Ne(e);r&&(r=r.target,z(r)?0===t?(t=new U(r.path),this.ye(e,t,new on(t,L.min()))):1===t||d$jscomp$0():
this.Fe(e)!==t&&(this.De(e),this.Pe=this.Pe.add(e)))},t$jscomp$2.prototype.ke=function(t$jscomp$1){var e=this,n$jscomp$0=new Map;this.me.forEach(function(r,i){var o=e.Ne(i);o&&(r.Yt&&z(o.target)&&(o=new U(o.target.path),null!==e.Ae.get(o)||e.$e(i,o)||e.ye(i,o,new on(o,t$jscomp$1))),r.ue&&(n$jscomp$0.set(i,r.le()),r._e()))});var r$jscomp$0=ht();this.Re.forEach(function(t$jscomp$0,n){var i=!0;n.Dt(function(t){t=e.Ne(t);return!t||2===t.X||(i=!1,!1)});i&&(r$jscomp$0=r$jscomp$0.add(t$jscomp$0))});var i$jscomp$0=
new vt(t$jscomp$1,n$jscomp$0,this.Pe,this.Ae,r$jscomp$0);return this.Ae=rt,this.Re=new $(U.P),this.Pe=new et(w),i$jscomp$0},t$jscomp$2.prototype.Ve=function(t,e){if(this.Se(t)){var n=this.$e(t,e.key)?2:0;this.ve(t).fe(e.key,n);this.Ae=this.Ae.st(e.key,e);this.Re=this.Re.st(e.key,this.xe(e.key).add(t))}},t$jscomp$2.prototype.ye=function(t,e,n){if(this.Se(t)){var r=this.ve(t);this.$e(t,e)?r.fe(e,1):r.de(e);this.Re=this.Re.st(e,this.xe(e).delete(t));n&&(this.Ae=this.Ae.st(e,n))}},t$jscomp$2.prototype.removeTarget=
function(t){this.me.delete(t)},t$jscomp$2.prototype.Fe=function(t){var e=this.ve(t).le();return this.Ie.Oe(t).size+e.Jt.size-e.Zt.size},t$jscomp$2.prototype.we=function(t){this.ve(t).we()},t$jscomp$2.prototype.ve=function(t){var e=this.me.get(t);return e||(e=new _t,this.me.set(t,e)),e},t$jscomp$2.prototype.xe=function(t){var e=this.Re.get(t);return e||(e=new et(w),this.Re=this.Re.st(t,e)),e},t$jscomp$2.prototype.Se=function(t){var e=null!==this.Ne(t);return e||h$jscomp$0("WatchChangeAggregator","Detected inactive target",
t),e},t$jscomp$2.prototype.Ne=function(t){var e=this.me.get(t);return e&&e.ae?null:this.Ie.Me(t)},t$jscomp$2.prototype.De=function(t){var e=this;this.me.set(t,new _t);this.Ie.Oe(t).forEach(function(n){e.ye(t,n,null)})},t$jscomp$2.prototype.$e=function(t,e){return this.Ie.Oe(t).has(e)},t$jscomp$2}(),St=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),Bt={asc:"ASCENDING",desc:"DESCENDING"},zt={"\x3c":"LESS_THAN","\x3c\x3d":"LESS_THAN_OR_EQUAL","\x3e":"GREATER_THAN","\x3e\x3d":"GREATER_THAN_OR_EQUAL",
"\x3d\x3d":"EQUAL","!\x3d":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qt=function(t,e){this.s=t;this.Le=e},Ie=function(){this.je=void 0},Ae=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t$jscomp$4.__extends(n,e),n}(Ie),Se=function(e){function n$jscomp$0(t){var n=this;return(n=e.call(this)||this).elements=t,n}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0}(Ie),xe=function(e){function n$jscomp$0(t){var n=
this;return(n=e.call(this)||this).elements=t,n}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0}(Ie),Le=function(e){function n$jscomp$0(t,n){var r=this;return(r=e.call(this)||this).serializer=t,r.Be=n,r}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0}(Ie),Oe=function(){function t$jscomp$1(t){this.fields=t;t.sort(V.P)}return t$jscomp$1.prototype.Ke=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},t$jscomp$1.prototype.isEqual=function(t$jscomp$0){return b(this.fields,
t$jscomp$0.fields,function(t,e){return t.isEqual(e)})},t$jscomp$1}(),Ve=function(t,e){this.field=t;this.transform=e},Ue=function(t,e){this.version=t;this.transformResults=e},Ce=function(){function t$jscomp$0(t,e){this.updateTime=t;this.exists=e}return t$jscomp$0.We=function(){return new t$jscomp$0},t$jscomp$0.exists=function(e){return new t$jscomp$0(void 0,e)},t$jscomp$0.updateTime=function(e){return new t$jscomp$0(e)},Object.defineProperty(t$jscomp$0.prototype,"Ue",{get:function(){return void 0===
this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t$jscomp$0.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t$jscomp$0}(),Me=function(){},Qe=function(e){function n$jscomp$0(t,n,r){var i=this;return(i=e.call(this)||this).key=t,i.value=n,i.Qe=r,i.type=0,i}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0}(Me),We=function(e){function n$jscomp$0(t,n,r,i){var o=this;return(o=e.call(this)||
this).key=t,o.data=n,o.qe=r,o.Qe=i,o.type=1,o}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0}(Me),Ke=function(e){function n$jscomp$0(t,n){var r=this;return(r=e.call(this)||this).key=t,r.fieldTransforms=n,r.type=2,r.Qe=Ce.exists(!0),r}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0}(Me),Xe=function(e){function n$jscomp$0(t,n){var r=this;return(r=e.call(this)||this).key=t,r.Qe=n,r.type=3,r}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0}(Me),$e=function(e){function n$jscomp$0(t,n){var r=
this;return(r=e.call(this)||this).key=t,r.Qe=n,r.type=4,r}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0}(Me),Je=function(){function t$jscomp$0(t){this.proto=t}return t$jscomp$0.empty=function(){return new t$jscomp$0({mapValue:{}})},t$jscomp$0.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n)if(!e.mapValue.fields||!jt(e=e.mapValue.fields[t.get(n)]))return null;return(e.mapValue.fields||{})[t.S()]||null},t$jscomp$0.prototype.isEqual=function(t){return xt(this.proto,
t.proto)},t$jscomp$0}(),tn=function(){function t$jscomp$0(t){void 0===t&&(t=Je.empty());this.He=t;this.Ye=new Map}return t$jscomp$0.prototype.set=function(t,e){return this.Je(t,e),this},t$jscomp$0.prototype.delete=function(t){return this.Je(t,null),this},t$jscomp$0.prototype.Je=function(t,e){for(var n=this.Ye,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Dt(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.S(),e)},
t$jscomp$0.prototype.ze=function(){var t=this.Xe(V.$(),this.Ye);return null!=t?new Je(t):this.He},t$jscomp$0.prototype.Xe=function(t,e$jscomp$0){var n=this,r=!1,i$jscomp$0=this.He.field(t),o=jt(i$jscomp$0)?Object.assign({},i$jscomp$0.mapValue.fields):{};return e$jscomp$0.forEach(function(e,i){e instanceof Map?(e=n.Xe(t.child(i),e),null!=e&&(o[i]=e,r=!0)):null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t$jscomp$0}(),nn=function(t,e){this.key=t;this.version=
e},rn=function(e){function n$jscomp$0(t,n,r,i){var o=this;return(o=e.call(this,t,n)||this).Ze=r,o.Ge=!!i.Ge,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0.prototype.field=function(t){return this.Ze.field(t)},n$jscomp$0.prototype.data=function(){return this.Ze},n$jscomp$0.prototype.tn=function(){return this.Ze.proto},n$jscomp$0.prototype.isEqual=function(t){return t instanceof n$jscomp$0&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&
this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ze.isEqual(t.Ze)},n$jscomp$0.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ze.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(n$jscomp$0.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),n$jscomp$0}(nn),on=function(e){function n$jscomp$0(t,
n,r){var i=this;return(i=e.call(this,t,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(n$jscomp$0.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),n$jscomp$0.prototype.isEqual=function(t){return t instanceof n$jscomp$0&&t.hasCommittedMutations===this.hasCommittedMutations&&
t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n$jscomp$0}(nn),sn=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t$jscomp$4.__extends(n,e),n.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n}(nn),
an=function(){function t$jscomp$0(t,e,n,r,i,o,s,u){void 0===e&&(e=null);void 0===n&&(n=[]);void 0===r&&(r=[]);void 0===i&&(i=null);void 0===o&&(o="F");void 0===s&&(s=null);void 0===u&&(u=null);this.path=t;this.collectionGroup=e;this.en=n;this.filters=r;this.limit=i;this.nn=o;this.startAt=s;this.endAt=u;this.rn=this.sn=null;this.startAt;this.endAt}return t$jscomp$0.prototype.on=function(e){return new t$jscomp$0(e,null,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},
t$jscomp$0.prototype.hn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.en.length||1===this.en.length&&this.en[0].field.M())},t$jscomp$0.prototype.an=function(){return null!=this.limit&&"F"===this.nn},t$jscomp$0.prototype.un=function(){return null!=this.limit&&"L"===this.nn},t$jscomp$0.prototype.cn=function(){return 0<this.en.length?this.en[0].field:null},t$jscomp$0.prototype.ln=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=
e[t];if(n._n())return n.field}return null},t$jscomp$0.prototype.fn=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(0<=t.indexOf(r.op))return r.op}return null},t$jscomp$0}(),In=function(e$jscomp$0){function n$jscomp$0(t,n,r){var i=this;return(i=e$jscomp$0.call(this)||this).field=t,i.op=n,i.value=r,i}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$0),n$jscomp$0.create=function(t,e,r){if(t.M())return"in"===e||"not-in"===e?this.dn(t,e,r):new En(t,e,r);if(Ft(r)){if("\x3d\x3d"!==e&&
"!\x3d"!==e)throw new x(D.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new n$jscomp$0(t,e,r)}if(Gt(r)){if("\x3d\x3d"!==e&&"!\x3d"!==e)throw new x(D.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new n$jscomp$0(t,e,r)}return"array-contains"===e?new Sn(t,r):"in"===e?new Dn(t,r):"not-in"===e?new xn(t,r):"array-contains-any"===e?new kn(t,r):new n$jscomp$0(t,e,r)},n$jscomp$0.dn=function(t,e,n){return"in"===e?new Tn(t,n):new Nn(t,
n)},n$jscomp$0.prototype.matches=function(t){t=t.field(this.field);return"!\x3d"===this.op?null!==t&&this.wn(Lt(t,this.value)):null!==t&&Dt(this.value)===Dt(t)&&this.wn(Lt(t,this.value))},n$jscomp$0.prototype.wn=function(t){switch(this.op){case "\x3c":return 0>t;case "\x3c\x3d":return 0>=t;case "\x3d\x3d":return 0===t;case "!\x3d":return 0!==t;case "\x3e":return 0<t;case "\x3e\x3d":return 0<=t;default:return d$jscomp$0()}},n$jscomp$0.prototype._n=function(){return 0<=["\x3c","\x3c\x3d","\x3e","\x3e\x3d",
"!\x3d"].indexOf(this.op)},n$jscomp$0}(function(){}),En=function(e){function n$jscomp$0(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=U.U(r.referenceValue),i}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0.prototype.matches=function(t){t=U.P(t.key,this.key);return this.wn(t)},n$jscomp$0}(In),Tn=function(e$jscomp$0){function n$jscomp$0(t,n){var r=this;return(r=e$jscomp$0.call(this,t,"in",n)||this).keys=An("in",n),r}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$0),n$jscomp$0.prototype.matches=
function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},n$jscomp$0}(In),Nn=function(e$jscomp$0){function n$jscomp$0(t,n){var r=this;return(r=e$jscomp$0.call(this,t,"not-in",n)||this).keys=An("not-in",n),r}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$0),n$jscomp$0.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},n$jscomp$0}(In),Sn=function(e){function n$jscomp$0(t,n){return e.call(this,t,"array-contains",n)||this}return t$jscomp$4.__extends(n$jscomp$0,
e),n$jscomp$0.prototype.matches=function(t){t=t.field(this.field);return Mt(t)&&kt(t.arrayValue,this.value)},n$jscomp$0}(In),Dn=function(e){function n$jscomp$0(t,n){return e.call(this,t,"in",n)||this}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0.prototype.matches=function(t){t=t.field(this.field);return null!==t&&kt(this.value.arrayValue,t)},n$jscomp$0}(In),xn=function(e){function n$jscomp$0(t,n){return e.call(this,t,"not-in",n)||this}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0.prototype.matches=
function(t){t=t.field(this.field);return null!==t&&!kt(this.value.arrayValue,t)},n$jscomp$0}(In),kn=function(e$jscomp$0){function n$jscomp$0(t,n){return e$jscomp$0.call(this,t,"array-contains-any",n)||this}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$0),n$jscomp$0.prototype.matches=function(t$jscomp$0){var e=this;t$jscomp$0=t$jscomp$0.field(this.field);return!(!Mt(t$jscomp$0)||!t$jscomp$0.arrayValue.values)&&t$jscomp$0.arrayValue.values.some(function(t){return kt(e.value.arrayValue,t)})},n$jscomp$0}(In),
Ln=function(t,e){this.position=t;this.before=e},Vn=function(t,e){void 0===e&&(e="asc");this.field=t;this.dir=e},qn=function(){function t$jscomp$1(t,e,n,r){this.batchId=t;this.Tn=e;this.baseMutations=n;this.mutations=r}return t$jscomp$1.prototype.En=function(t,e,n){n=n.In;for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Fe(o,e,n[i]))}return e},t$jscomp$1.prototype.mn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=
Ge(i,e,e,this.Tn))}n=e;r=0;for(i=this.mutations;r<i.length;r++){var a=i[r];a.key.isEqual(t)&&(e=Ge(a,e,n,this.Tn))}return e},t$jscomp$1.prototype.An=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.mn(r.key,t.get(r.key));i&&(n=n.st(r.key,i))}),n},t$jscomp$1.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},ht())},t$jscomp$1.prototype.isEqual=function(t$jscomp$0){return this.batchId===t$jscomp$0.batchId&&b(this.mutations,t$jscomp$0.mutations,
function(t,e){return Be(t,e)})&&b(this.baseMutations,t$jscomp$0.baseMutations,function(t,e){return Be(t,e)})},t$jscomp$1}(),Mn=function(){function t$jscomp$0(t,e,n,r){this.batch=t;this.Rn=e;this.In=n;this.Pn=r}return t$jscomp$0.from=function(e,n,r){e.mutations.length===r.length||d$jscomp$0();for(var i=at,o=e.mutations,s=0;s<o.length;s++)i=i.st(o[s].key,r[s].version);return new t$jscomp$0(e,n,r,i)},t$jscomp$0}(),Fn=function(){function t$jscomp$1(t$jscomp$0){var e=this;this.Vn=this.gn=null;this.error=
this.result=void 0;this.pn=this.yn=!1;t$jscomp$0(function(t){e.yn=!0;e.result=t;e.gn&&e.gn(t)},function(t){e.yn=!0;e.error=t;e.Vn&&e.Vn(t)})}return t$jscomp$1.prototype.catch=function(t){return this.next(void 0,t)},t$jscomp$1.prototype.next=function(e$jscomp$0,n$jscomp$0){var r=this;return this.pn&&d$jscomp$0(),this.pn=!0,this.yn?this.error?this.bn(n$jscomp$0,this.error):this.vn(e$jscomp$0,this.result):new t$jscomp$1(function(t,i){r.gn=function(n){r.vn(e$jscomp$0,n).next(t,i)};r.Vn=function(e){r.bn(n$jscomp$0,
e).next(t,i)}})},t$jscomp$1.prototype.Sn=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t$jscomp$1.prototype.Dn=function(e){try{var n=e();return n instanceof t$jscomp$1?n:t$jscomp$1.resolve(n)}catch(e$23){return t$jscomp$1.reject(e$23)}},t$jscomp$1.prototype.vn=function(e,n){return e?this.Dn(function(){return e(n)}):t$jscomp$1.resolve(n)},t$jscomp$1.prototype.bn=function(e,n){return e?this.Dn(function(){return e(n)}):t$jscomp$1.reject(n)},t$jscomp$1.resolve=function(e){return new t$jscomp$1(function(t,
n){t(e)})},t$jscomp$1.reject=function(e){return new t$jscomp$1(function(t,n){n(e)})},t$jscomp$1.Cn=function(e$jscomp$0){return new t$jscomp$1(function(t$jscomp$0,n){var r=0,i=0,o=!1;e$jscomp$0.forEach(function(e){++r;e.next(function(){++i;o&&i===r&&t$jscomp$0()},function(t){return n(t)})});o=!0;i===r&&t$jscomp$0()})},t$jscomp$1.Nn=function(e$jscomp$0){for(var n$jscomp$0=t$jscomp$1.resolve(!1),r=function(e){n$jscomp$0=n$jscomp$0.next(function(n){return n?t$jscomp$1.resolve(n):e()})},i=0;i<e$jscomp$0.length;i++)r(e$jscomp$0[i]);
return n$jscomp$0},t$jscomp$1.forEach=function(t$jscomp$0,e){var n=this,r=[];return t$jscomp$0.forEach(function(t,i){r.push(e.call(n,t,i))}),this.Cn(r)},t$jscomp$1}(),Gn=function(){function t$jscomp$0(){this.Fn=new S(function(t){return t.toString()},function(t,e){return t.isEqual(e)});this.kn=!1}return Object.defineProperty(t$jscomp$0.prototype,"readTime",{get:function(){return this.$n},set:function(t){this.$n=t},enumerable:!1,configurable:!0}),t$jscomp$0.prototype.xn=function(t,e){this.On();this.readTime=
e;this.Fn.set(t.key,t)},t$jscomp$0.prototype.Mn=function(t,e){this.On();e&&(this.readTime=e);this.Fn.set(t,null)},t$jscomp$0.prototype.Ln=function(t,e){this.On();var n=this.Fn.get(e);return void 0!==n?Fn.resolve(n):this.qn(t,e)},t$jscomp$0.prototype.getEntries=function(t,e){return this.Bn(t,e)},t$jscomp$0.prototype.apply=function(t){return this.On(),this.kn=!0,this.Un(t)},t$jscomp$0.prototype.On=function(){},t$jscomp$0}(),Bn=function(){function t$jscomp$0(){this.Qn=[]}return t$jscomp$0.prototype.Wn=
function(t){this.Qn.push(t)},t$jscomp$0.prototype.jn=function(){this.Qn.forEach(function(t){return t()})},t$jscomp$0}(),zn=function(){function t$jscomp$2(t,e,n){this.Kn=t;this.Gn=e;this.zn=n}return t$jscomp$2.prototype.Hn=function(t,e){var n=this;return this.Gn.Yn(t,e).next(function(r){return n.Jn(t,e,r)})},t$jscomp$2.prototype.Jn=function(t$jscomp$0,e,n){return this.Kn.Ln(t$jscomp$0,e).next(function(t){for(var r=0;r<n.length;r++)t=n[r].mn(e,t);return t})},t$jscomp$2.prototype.Xn=function(t$jscomp$0,
e$jscomp$0,n){var r=rt;return e$jscomp$0.forEach(function(t,e){for(var i=0;i<n.length;i++)e=n[i].mn(t,e);r=r.st(t,e)}),r},t$jscomp$2.prototype.Zn=function(t,e$jscomp$0){var n=this;return this.Kn.getEntries(t,e$jscomp$0).next(function(e){return n.ts(t,e)})},t$jscomp$2.prototype.ts=function(t$jscomp$0,e$jscomp$0){var n=this;return this.Gn.es(t$jscomp$0,e$jscomp$0).next(function(r){r=n.Xn(t$jscomp$0,e$jscomp$0,r);var o=rt;return r.forEach(function(t,e){e||(e=new on(t,L.min()));o=o.st(t,e)}),o})},t$jscomp$2.prototype.ns=
function(t,e,n){return U.j(e.path)&&null===e.collectionGroup&&0===e.filters.length?this.ss(t,e.path):null!==e.collectionGroup?this.rs(t,e,n):this.os(t,e,n)},t$jscomp$2.prototype.ss=function(t$jscomp$0,e$jscomp$0){return this.Hn(t$jscomp$0,new U(e$jscomp$0)).next(function(t){var e=st;return t instanceof rn&&(e=e.st(t.key,t)),e})},t$jscomp$2.prototype.rs=function(t$jscomp$1,e$jscomp$0,n){var r=this,i=e$jscomp$0.collectionGroup,o=st;return this.zn.hs(t$jscomp$1,i).next(function(s$jscomp$0){return Fn.forEach(s$jscomp$0,
function(s){s=e$jscomp$0.on(s.child(i));return r.os(t$jscomp$1,s,n).next(function(t$jscomp$0){t$jscomp$0.forEach(function(t,e){o=o.st(t,e)})})}).next(function(){return o})})},t$jscomp$2.prototype.os=function(t$jscomp$0,e$jscomp$0,n$jscomp$0){var r,i,o$jscomp$0=this;return this.Kn.ns(t$jscomp$0,e$jscomp$0,n$jscomp$0).next(function(n){return r=n,o$jscomp$0.Gn.as(t$jscomp$0,e$jscomp$0)}).next(function(e){return i=e,o$jscomp$0.us(t$jscomp$0,i,r).next(function(t){r=t;t=0;for(var n=i;t<n.length;t++)for(var o=
n[t],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c);a=Ge(a,h,h,o.Tn);r=a instanceof rn?r.st(c,a):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){bn(e$jscomp$0,n)||(r=r.remove(t))}),r})},t$jscomp$2.prototype.us=function(t$jscomp$1,e$jscomp$0,n){for(var r=ht(),i=0;i<e$jscomp$0.length;i++)for(var s=0,u=e$jscomp$0[i].mutations;s<u.length;s++){var a=u[s];a instanceof We&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.Kn.getEntries(t$jscomp$1,r).next(function(t$jscomp$0){return t$jscomp$0.forEach(function(t,
e){null!==e&&e instanceof rn&&(c=c.st(t,e))}),c})},t$jscomp$2}(),Qn=function(){function t$jscomp$0(t,e,n,r){this.targetId=t;this.fromCache=e;this.cs=n;this.ls=r}return t$jscomp$0._s=function(e,n){for(var r=ht(),i=ht(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t$jscomp$0(e,n.fromCache,r,i)},t$jscomp$0}(),Wn=function(){function t$jscomp$1(t$jscomp$0,e){var n=this;this.previousValue=t$jscomp$0;e&&(e.fs=function(t){return n.ds(t)},
this.ws=function(t){return e.Ts(t)})}return t$jscomp$1.prototype.ds=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t$jscomp$1.prototype.next=function(){var t=++this.previousValue;return this.ws&&this.ws(t),t},t$jscomp$1}();Wn.Es=-1;var Hn=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e;t.reject=n})},Kn=function(){function t$jscomp$0(t,e,n,r,i){void 0===n&&(n=1E3);void 0===r&&(r=1.5);void 0===i&&(i=6E4);this.Is=t;this.ms=e;this.As=
n;this.Rs=r;this.Ps=i;this.gs=0;this.Vs=null;this.ys=Date.now();this.reset()}return t$jscomp$0.prototype.reset=function(){this.gs=0},t$jscomp$0.prototype.ps=function(){this.gs=this.Ps},t$jscomp$0.prototype.bs=function(t){var e=this;this.cancel();var n=Math.floor(this.gs+this.vs()),r=Math.max(0,Date.now()-this.ys),i=Math.max(0,n-r);0<i&&h$jscomp$0("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.gs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)");this.Vs=this.Is.Ss(this.ms,
i,function(){return e.ys=Date.now(),t()});this.gs*=this.Rs;this.gs<this.As&&(this.gs=this.As);this.gs>this.Ps&&(this.gs=this.Ps)},t$jscomp$0.prototype.Ds=function(){null!==this.Vs&&(this.Vs.Cs(),this.Vs=null)},t$jscomp$0.prototype.cancel=function(){null!==this.Vs&&(this.Vs.cancel(),this.Vs=null)},t$jscomp$0.prototype.vs=function(){return(Math.random()-.5)*this.gs},t$jscomp$0}(),Yn=function(){function e$jscomp$2(t,n,i){this.name=t;this.version=n;this.Ns=i;12.2===e$jscomp$2.Fs(r$jscomp$2.getUA())&&
f$jscomp$0("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e$jscomp$2.delete=function(t){return h$jscomp$0("SimpleDb","Removing database:",t),er(window.indexedDB.deleteDatabase(t)).Sn()},e$jscomp$2.ks=function(){if("undefined"==typeof indexedDB)return!1;if(e$jscomp$2.$s())return!0;var t=r$jscomp$2.getUA(),n=e$jscomp$2.Fs(t);n=0<n&&10>n;var o=e$jscomp$2.xs(t);
o=0<o&&4.5>o;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||o)},e$jscomp$2.$s=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Os)},e$jscomp$2.Ms=function(t,e){return t.store(e)},e$jscomp$2.Fs=function(t){t=(t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i))?t[1].split("_").slice(0,2).join("."):"-1";return Number(t)},e$jscomp$2.xs=function(t){t=(t=t.match(/Android ([\d.]+)/i))?t[1].split(".").slice(0,2).join("."):
"-1";return Number(t)},e$jscomp$2.prototype.Ls=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var e$jscomp$1,n=this;return t$jscomp$4.__generator(this,function(t$jscomp$1){switch(t$jscomp$1.label){case 0:return this.db?[3,2]:(h$jscomp$0("SimpleDb","Opening database:",this.name),e$jscomp$1=this,[4,new Promise(function(t$jscomp$0,e$jscomp$0){var r=indexedDB.open(n.name,n.version);r.onsuccess=function(e){t$jscomp$0(e.target.result)};r.onblocked=function(){e$jscomp$0(new Xn("Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))};
r.onerror=function(t){t=t.target.error;"VersionError"===t.name?e$jscomp$0(new x(D.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):e$jscomp$0(new Xn(t))};r.onupgradeneeded=function(t){h$jscomp$0("SimpleDb",
'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);n.Ns.createOrUpgrade(t.target.result,r.transaction,t.oldVersion,n.version).next(function(){h$jscomp$0("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e$jscomp$1.db=t$jscomp$1.sent(),t$jscomp$1.label=2;case 2:return[2,(this.qs&&(this.db.onversionchange=function(t){return n.qs(t)}),this.db)]}})})},e$jscomp$2.prototype.Bs=function(t){this.qs=t;this.db&&(this.db.onversionchange=function(e){return t(e)})},
e$jscomp$2.prototype.runTransaction=function(e$jscomp$0,n,r){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var i,o,s$jscomp$0,u,a$jscomp$0;return t$jscomp$4.__generator(this,function(c$jscomp$0){switch(c$jscomp$0.label){case 0:i="readonly"===e$jscomp$0,o=0,s$jscomp$0=function(){var e,s,a,c,f;return t$jscomp$4.__generator(this,function(t$jscomp$0){switch(t$jscomp$0.label){case 0:++o,t$jscomp$0.label=1;case 1:return t$jscomp$0.trys.push([1,4,,5]),[4,u.Ls()];case 2:return u.db=t$jscomp$0.sent(),
e=Jn.open(u.db,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Fn.reject(t)}).Sn(),a={},s.catch(function(){}),[4,e.Us];case 3:return[2,(a.value=(t$jscomp$0.sent(),s),a)];case 4:return c=t$jscomp$0.sent(),f="FirebaseError"!==c.name&&3>o,h$jscomp$0("SimpleDb","Transaction failed with error: %s. Retrying: %s.",c.message,f),u.close(),f?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},u=this,c$jscomp$0.label=1;case 1:return[5,s$jscomp$0()];case 2:if("object"==typeof(a$jscomp$0=
c$jscomp$0.sent()))return[2,a$jscomp$0.value];c$jscomp$0.label=3;case 3:return[3,1];case 4:return[2]}})})},e$jscomp$2.prototype.close=function(){this.db&&this.db.close();this.db=void 0},e$jscomp$2}(),Zn=function(){function t$jscomp$0(t){this.Qs=t;this.Ws=!1;this.js=null}return Object.defineProperty(t$jscomp$0.prototype,"yn",{get:function(){return this.Ws},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$0.prototype,"Ks",{get:function(){return this.js},enumerable:!1,configurable:!0}),
Object.defineProperty(t$jscomp$0.prototype,"cursor",{set:function(t){this.Qs=t},enumerable:!1,configurable:!0}),t$jscomp$0.prototype.done=function(){this.Ws=!0},t$jscomp$0.prototype.Gs=function(t){this.js=t},t$jscomp$0.prototype.delete=function(){return er(this.Qs.delete())},t$jscomp$0}(),Xn=function(e){function n$jscomp$0(t){var n=this;return(n=e.call(this,D.UNAVAILABLE,"IndexedDB transaction failed: "+t)||this).name="IndexedDbTransactionError",n}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0}(x),
Jn=function(){function t$jscomp$1(t$jscomp$0){var e=this;this.transaction=t$jscomp$0;this.aborted=!1;this.zs=new Hn;this.transaction.oncomplete=function(){e.zs.resolve()};this.transaction.onabort=function(){t$jscomp$0.error?e.zs.reject(new Xn(t$jscomp$0.error)):e.zs.resolve()};this.transaction.onerror=function(t){t=rr(t.target.error);e.zs.reject(new Xn(t))}}return t$jscomp$1.open=function(e,n,r){try{return new t$jscomp$1(e.transaction(r,n))}catch(e$24){throw new Xn(e$24);}},Object.defineProperty(t$jscomp$1.prototype,
"Us",{get:function(){return this.zs.promise},enumerable:!1,configurable:!0}),t$jscomp$1.prototype.abort=function(t){t&&this.zs.reject(t);this.aborted||(h$jscomp$0("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t$jscomp$1.prototype.store=function(t){t=this.transaction.objectStore(t);return new tr(t)},t$jscomp$1}(),tr=function(){function t$jscomp$2(t){this.store=t}return t$jscomp$2.prototype.put=function(t,e){var n;return void 0!==
e?(h$jscomp$0("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(h$jscomp$0("SimpleDb","PUT",this.store.name,"\x3cauto-key\x3e",t),n=this.store.put(t)),er(n)},t$jscomp$2.prototype.add=function(t){return h$jscomp$0("SimpleDb","ADD",this.store.name,t,t),er(this.store.add(t))},t$jscomp$2.prototype.get=function(t){var e=this;return er(this.store.get(t)).next(function(n){return void 0===n&&(n=null),h$jscomp$0("SimpleDb","GET",e.store.name,t,n),n})},t$jscomp$2.prototype.delete=function(t){return h$jscomp$0("SimpleDb",
"DELETE",this.store.name,t),er(this.store.delete(t))},t$jscomp$2.prototype.count=function(){return h$jscomp$0("SimpleDb","COUNT",this.store.name),er(this.store.count())},t$jscomp$2.prototype.Hs=function(t$jscomp$0,e$jscomp$0){t$jscomp$0=this.cursor(this.options(t$jscomp$0,e$jscomp$0));var r=[];return this.Ys(t$jscomp$0,function(t,e){r.push(e)}).next(function(){return r})},t$jscomp$2.prototype.Js=function(t$jscomp$0,e$jscomp$0){h$jscomp$0("SimpleDb","DELETE ALL",this.store.name);t$jscomp$0=this.options(t$jscomp$0,
e$jscomp$0);t$jscomp$0.Xs=!1;t$jscomp$0=this.cursor(t$jscomp$0);return this.Ys(t$jscomp$0,function(t,e,n){return n.delete()})},t$jscomp$2.prototype.Zs=function(t,e){var n;e?n=t:(n={},e=t);t=this.cursor(n);return this.Ys(t,e)},t$jscomp$2.prototype.ti=function(t$jscomp$0){var e$jscomp$0=this.cursor({});return new Fn(function(n,r$jscomp$0){e$jscomp$0.onerror=function(t){t=rr(t.target.error);r$jscomp$0(t)};e$jscomp$0.onsuccess=function(e){var r=e.target.result;r?t$jscomp$0(r.primaryKey,r.value).next(function(t){t?
r.continue():n()}):n()}})},t$jscomp$2.prototype.Ys=function(t$jscomp$1,e){var n=[];return(new Fn(function(r,i){t$jscomp$1.onerror=function(t){i(t.target.error)};t$jscomp$1.onsuccess=function(t$jscomp$0){if(t$jscomp$0=t$jscomp$0.target.result){var o=new Zn(t$jscomp$0),s=e(t$jscomp$0.primaryKey,t$jscomp$0.value,o);s instanceof Fn&&(s=s.catch(function(t){return o.done(),Fn.reject(t)}),n.push(s));o.yn?r():null===o.Ks?t$jscomp$0.continue():t$jscomp$0.continue(o.Ks)}else r()}})).next(function(){return Fn.Cn(n)})},
t$jscomp$2.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t$jscomp$2.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Xs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t$jscomp$2}(),nr=!1,sr=function(){function t$jscomp$1(t$jscomp$0,e,n,r,i){this.ei=t$jscomp$0;this.ms=e;this.ni=n;this.op=r;this.si=i;this.ii=new Hn;this.then=
this.ii.promise.then.bind(this.ii.promise);this.ii.promise.catch(function(t){})}return t$jscomp$1.ri=function(e,n,r,i,o){e=new t$jscomp$1(e,n,Date.now()+r,i,o);return e.start(r),e},t$jscomp$1.prototype.start=function(t){var e=this;this.oi=setTimeout(function(){return e.hi()},t)},t$jscomp$1.prototype.Cs=function(){return this.hi()},t$jscomp$1.prototype.cancel=function(t){null!==this.oi&&(this.clearTimeout(),this.ii.reject(new x(D.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t$jscomp$1.prototype.hi=
function(){var t=this;this.ei.ai(function(){return null!==t.oi?(t.clearTimeout(),t.op().then(function(e){return t.ii.resolve(e)})):Promise.resolve()})},t$jscomp$1.prototype.clearTimeout=function(){null!==this.oi&&(this.si(this),clearTimeout(this.oi),this.oi=null)},t$jscomp$1}(),ur=function(){function e$jscomp$1(){var t=this;this.ui=Promise.resolve();this.ci=[];this.li=!1;this._i=[];this.fi=null;this.di=!1;this.wi=[];this.Ti=new Kn(this,"async_queue_retry");this.Ei=function(){var e=or();e&&h$jscomp$0("AsyncQueue",
"Visibility state changed to  ",e.visibilityState);t.Ti.Ds()};var e$jscomp$0=or();e$jscomp$0&&"function"==typeof e$jscomp$0.addEventListener&&e$jscomp$0.addEventListener("visibilitychange",this.Ei)}return Object.defineProperty(e$jscomp$1.prototype,"Ii",{get:function(){return this.li},enumerable:!1,configurable:!0}),e$jscomp$1.prototype.ai=function(t){this.enqueue(t)},e$jscomp$1.prototype.mi=function(t){this.Ai();this.Ri(t)},e$jscomp$1.prototype.Pi=function(){if(!this.li){this.li=!0;var t=or();t&&
"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ei)}},e$jscomp$1.prototype.enqueue=function(t$jscomp$0){return this.Ai(),this.li?new Promise(function(t){}):this.Ri(t$jscomp$0)},e$jscomp$1.prototype.gi=function(t){var e=this;this.ci.push(t);this.ai(function(){return e.Vi()})},e$jscomp$1.prototype.Vi=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var e,n=this;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:if(0===this.ci.length)return[3,
5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.ci[0]()];case 2:return t.sent(),this.ci.shift(),this.Ti.reset(),[3,4];case 3:if(!$n(e=t.sent()))throw e;return h$jscomp$0("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.ci.length&&this.Ti.bs(function(){return n.Vi()}),t.label=5;case 5:return[2]}})})},e$jscomp$1.prototype.Ri=function(t$jscomp$0){var e$jscomp$0=this,n=this.ui.then(function(){return e$jscomp$0.di=!0,t$jscomp$0().catch(function(t){e$jscomp$0.fi=t;
e$jscomp$0.di=!1;var e=t.message||"";var JSCompiler_inline_result=(t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e);throw f$jscomp$0("INTERNAL UNHANDLED ERROR: ",JSCompiler_inline_result),t;}).then(function(t){return e$jscomp$0.di=!1,t})});return this.ui=n,n},e$jscomp$1.prototype.Ss=function(t$jscomp$0,e,n){var r=this;this.Ai();-1<this.wi.indexOf(t$jscomp$0)&&(e=0);t$jscomp$0=sr.ri(this,t$jscomp$0,e,n,function(t){return r.yi(t)});return this._i.push(t$jscomp$0),t$jscomp$0},
e$jscomp$1.prototype.Ai=function(){this.fi&&d$jscomp$0()},e$jscomp$1.prototype.pi=function(){},e$jscomp$1.prototype.bi=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var e;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return[4,e=this.ui];case 1:t.sent(),t.label=2;case 2:if(e!==this.ui)return[3,0];t.label=3;case 3:return[2]}})})},e$jscomp$1.prototype.vi=function(t){for(var e=0,n=this._i;e<n.length;e++)if(n[e].ms===t)return!0;return!1},e$jscomp$1.prototype.Si=
function(t$jscomp$0){var e$jscomp$0=this;return this.bi().then(function(){e$jscomp$0._i.sort(function(t,e){return t.ni-e.ni});for(var n=0,r=e$jscomp$0._i;n<r.length;n++){var i=r[n];if(i.Cs(),"all"!==t$jscomp$0&&i.ms===t$jscomp$0)break}return e$jscomp$0.bi()})},e$jscomp$1.prototype.Di=function(t){this.wi.push(t)},e$jscomp$1.prototype.yi=function(t){t=this._i.indexOf(t);this._i.splice(t,1)},e$jscomp$1}(),hr=function(){function t$jscomp$0(t){this.Ci=t;this.buffer=new et(cr);this.Ni=0}return t$jscomp$0.prototype.Fi=
function(){return++this.Ni},t$jscomp$0.prototype.ki=function(t){t=[t,this.Fi()];if(this.buffer.size<this.Ci)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();0>cr(t,n)&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(t$jscomp$0.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t$jscomp$0}(),fr={$i:!1,xi:0,Oi:0,Mi:0},lr=function(){function t$jscomp$0(t,e,n){this.Li=t;this.qi=e;this.Bi=n}return t$jscomp$0.Ui=function(e){return new t$jscomp$0(e,
t$jscomp$0.Qi,t$jscomp$0.Wi)},t$jscomp$0}();lr.ji=-1;lr.Ki=1048576;lr.Gi=41943040;lr.Qi=10;lr.Wi=1E3;lr.zi=new lr(lr.Gi,lr.Qi,lr.Wi);lr.Hi=new lr(lr.ji,0,0);var pr=function(){function e$jscomp$0(t,e){this.Yi=t;this.ei=e;this.Ji=!1;this.Xi=null}return e$jscomp$0.prototype.start=function(t){this.Yi.params.Li!==lr.ji&&this.Zi(t)},e$jscomp$0.prototype.stop=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},Object.defineProperty(e$jscomp$0.prototype,"tr",{get:function(){return null!==this.Xi},enumerable:!1,
configurable:!0}),e$jscomp$0.prototype.Zi=function(e){var n$jscomp$0=this,r=this.Ji?3E5:6E4;h$jscomp$0("LruGarbageCollector","Garbage collection scheduled in "+r+"ms");this.Xi=this.ei.Ss("lru_garbage_collection",r,function(){return t$jscomp$4.__awaiter(n$jscomp$0,void 0,void 0,function(){var n;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:this.Xi=null,this.Ji=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,e.er(this.Yi)];case 2:return t.sent(),[3,7];case 3:return $n(n=
t.sent())?(h$jscomp$0("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n),[3,6]):[3,4];case 4:return[4,xi(n)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.Zi(e)];case 8:return t.sent(),[2]}})})})},e$jscomp$0}(),dr=function(){function t$jscomp$1(t,e){this.nr=t;this.params=e}return t$jscomp$1.prototype.sr=function(t$jscomp$0,e){return this.nr.ir(t$jscomp$0).next(function(t){return Math.floor(e/100*t)})},t$jscomp$1.prototype.rr=function(t$jscomp$0,e){var n=
this;if(0===e)return Fn.resolve(Wn.Es);var r=new hr(e);return this.nr.be(t$jscomp$0,function(t){return r.ki(t.sequenceNumber)}).next(function(){return n.nr.or(t$jscomp$0,function(t){return r.ki(t)})}).next(function(){return r.maxValue})},t$jscomp$1.prototype.hr=function(t,e,n){return this.nr.hr(t,e,n)},t$jscomp$1.prototype.ar=function(t,e){return this.nr.ar(t,e)},t$jscomp$1.prototype.ur=function(t,e){var n=this;return this.params.Li===lr.ji?(h$jscomp$0("LruGarbageCollector","Garbage collection skipped; disabled"),
Fn.resolve(fr)):this.cr(t).next(function(r){return r<n.params.Li?(h$jscomp$0("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Li),fr):n.lr(t,e)})},t$jscomp$1.prototype.cr=function(t){return this.nr.cr(t)},t$jscomp$1.prototype.lr=function(t$jscomp$0,e$jscomp$0){var r,i,o,s,u,a,f,l=this,p=Date.now();return this.sr(t$jscomp$0,this.params.qi).next(function(e){return e>l.params.Bi?(h$jscomp$0("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+
l.params.Bi+" from "+e),i=l.params.Bi):i=e,s=Date.now(),l.rr(t$jscomp$0,i)}).next(function(n){return r=n,u=Date.now(),l.hr(t$jscomp$0,r,e$jscomp$0)}).next(function(e){return o=e,a=Date.now(),l.ar(t$jscomp$0,r)}).next(function(t){return f=Date.now(),a$jscomp$1.logLevel<=n$jscomp$2.LogLevel.DEBUG&&h$jscomp$0("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-p)+"ms\n\tDetermined least recently used "+i+" in "+(u-s)+"ms\n\tRemoved "+o+" targets in "+(a-u)+"ms\n\tRemoved "+t+" documents in "+
(f-a)+"ms\nTotal Duration: "+(f-p)+"ms"),Fn.resolve({$i:!0,xi:i,Oi:o,Mi:t})})},t$jscomp$1}(),wr=function(t){this._r=t},xr=function(){function t$jscomp$2(t,e,n,r){this.userId=t;this.serializer=e;this.zn=n;this.dr=r;this.wr={}}return t$jscomp$2.Tr=function(e,n,r,i){""!==e.uid||d$jscomp$0();return new t$jscomp$2(e.Er()?e.uid:"",n,r,i)},t$jscomp$2.prototype.Ir=function(t$jscomp$0){var e=!0,n$jscomp$0=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rr(t$jscomp$0).Zs({index:Wr.userMutationsIndex,
range:n$jscomp$0},function(t,n,r){e=!1;r.done()}).next(function(){return e})},t$jscomp$2.prototype.mr=function(t$jscomp$0,e$jscomp$1,n$jscomp$0,r$jscomp$0){var i$jscomp$0=this,o=Pr(t$jscomp$0),s=Rr(t$jscomp$0);return s.add({}).next(function(u){"number"==typeof u||d$jscomp$0();for(var a=new qn(u,e$jscomp$1,n$jscomp$0,r$jscomp$0),c=function(t,e$jscomp$0,n){var r=n.baseMutations.map(function(e){return ae(t._r,e)}),i=n.mutations.map(function(e){return ae(t._r,e)});return new Wr(e$jscomp$0,n.batchId,n.Tn.toMillis(),
r,i)}(i$jscomp$0.serializer,i$jscomp$0.userId,a),h=[],f=new et(function(t,e){return w(t.F(),e.F())}),l=0;l<r$jscomp$0.length;l++){var d=r$jscomp$0[l],v=Hr.key(i$jscomp$0.userId,d.key.path,u);f=f.add(d.key.path.p());h.push(s.put(c));h.push(o.put(v,Hr.PLACEHOLDER))}return f.forEach(function(e){h.push(i$jscomp$0.zn.Ar(t$jscomp$0,e))}),t$jscomp$0.Wn(function(){i$jscomp$0.wr[u]=a.keys()}),Fn.Cn(h).next(function(){return a})})},t$jscomp$2.prototype.Rr=function(t$jscomp$0,e){var n=this;return Rr(t$jscomp$0).get(e).next(function(t){t?
(t.userId===n.userId||d$jscomp$0(),t=Ar(n.serializer,t)):t=null;return t})},t$jscomp$2.prototype.Pr=function(t$jscomp$0,e){var n=this;return this.wr[e]?Fn.resolve(this.wr[e]):this.Rr(t$jscomp$0,e).next(function(t){return t?(t=t.keys(),n.wr[e]=t,t):null})},t$jscomp$2.prototype.gr=function(t$jscomp$0,e$jscomp$0){var n=this,r=e$jscomp$0+1;e$jscomp$0=IDBKeyRange.lowerBound([this.userId,r]);var o=null;return Rr(t$jscomp$0).Zs({index:Wr.userMutationsIndex,range:e$jscomp$0},function(t,e,i){e.userId===n.userId&&
(e.batchId>=r||d$jscomp$0(),o=Ar(n.serializer,e));i.done()}).next(function(){return o})},t$jscomp$2.prototype.Vr=function(t$jscomp$0){var e$jscomp$0=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Rr(t$jscomp$0).Zs({index:Wr.userMutationsIndex,range:e$jscomp$0,reverse:!0},function(t,e,r){n=e.batchId;r.done()}).next(function(){return n})},t$jscomp$2.prototype.yr=function(t$jscomp$1){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rr(t$jscomp$1).Hs(Wr.userMutationsIndex,
n).next(function(t$jscomp$0){return t$jscomp$0.map(function(t){return Ar(e.serializer,t)})})},t$jscomp$2.prototype.Yn=function(t$jscomp$0,e){var n=this,r$jscomp$0=Hr.prefixForPath(this.userId,e.path);r$jscomp$0=IDBKeyRange.lowerBound(r$jscomp$0);var o=[];return Pr(t$jscomp$0).Zs({range:r$jscomp$0},function(r,i,s){i=r[0];var c=r[2];r=mr(r[1]);if(i===n.userId&&e.path.isEqual(r))return Rr(t$jscomp$0).get(c).next(function(t){if(!t)throw d$jscomp$0();t.userId===n.userId||d$jscomp$0();o.push(Ar(n.serializer,
t))});s.done()}).next(function(){return o})},t$jscomp$2.prototype.es=function(t$jscomp$0,e$jscomp$0){var n=this,r=new et(w),i$jscomp$0=[];return e$jscomp$0.forEach(function(e){var o$jscomp$0=Hr.prefixForPath(n.userId,e.path);o$jscomp$0=IDBKeyRange.lowerBound(o$jscomp$0);o$jscomp$0=Pr(t$jscomp$0).Zs({range:o$jscomp$0},function(t,i,o){i=t[0];var a=t[2];t=mr(t[1]);i===n.userId&&e.path.isEqual(t)?r=r.add(a):o.done()});i$jscomp$0.push(o$jscomp$0)}),Fn.Cn(i$jscomp$0).next(function(){return n.pr(t$jscomp$0,
r)})},t$jscomp$2.prototype.as=function(t$jscomp$0,e$jscomp$0){var n=this,r=e$jscomp$0.path,i=r.length+1;e$jscomp$0=Hr.prefixForPath(this.userId,r);e$jscomp$0=IDBKeyRange.lowerBound(e$jscomp$0);var u=new et(w);return Pr(t$jscomp$0).Zs({range:e$jscomp$0},function(t,e,o){e=t[0];var c=t[2];t=mr(t[1]);e===n.userId&&r.D(t)?t.length===i&&(u=u.add(c)):o.done()}).next(function(){return n.pr(t$jscomp$0,u)})},t$jscomp$2.prototype.pr=function(t$jscomp$0,e$jscomp$0){var n=this,r=[],i=[];return e$jscomp$0.forEach(function(e){i.push(Rr(t$jscomp$0).get(e).next(function(t){if(null===
t)throw d$jscomp$0();t.userId===n.userId||d$jscomp$0();r.push(Ar(n.serializer,t))}))}),Fn.Cn(i).next(function(){return r})},t$jscomp$2.prototype.br=function(t,e$jscomp$0){var n=this;return Lr(t.vr,this.userId,e$jscomp$0).next(function(r){return t.Wn(function(){n.Sr(e$jscomp$0.batchId)}),Fn.forEach(r,function(e){return n.dr.Dr(t,e)})})},t$jscomp$2.prototype.Sr=function(t){delete this.wr[t]},t$jscomp$2.prototype.Cr=function(t$jscomp$0){var e=this;return this.Ir(t$jscomp$0).next(function(n$jscomp$0){if(!n$jscomp$0)return Fn.resolve();
n$jscomp$0=IDBKeyRange.lowerBound(Hr.prefixForUser(e.userId));var i=[];return Pr(t$jscomp$0).Zs({range:n$jscomp$0},function(t,n,r){t[0]===e.userId?(t=mr(t[1]),i.push(t)):r.done()}).next(function(){0===i.length||d$jscomp$0()})})},t$jscomp$2.prototype.Nr=function(t,e){return kr(t,this.userId,e)},t$jscomp$2.prototype.Fr=function(t$jscomp$0){var e=this;return di.Ms(t$jscomp$0,Qr.store).get(this.userId).next(function(t){return t||new Qr(e.userId,-1,"")})},t$jscomp$2}(),Vr=function(){function t$jscomp$1(t,
e){this.serializer=t;this.zn=e}return t$jscomp$1.prototype.xn=function(t,e,n){return Cr(t).put(e.path.N(),n)},t$jscomp$1.prototype.Mn=function(t,e){t=Cr(t);e=e.path.N();return t.delete(e)},t$jscomp$1.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.kr(t,r)})},t$jscomp$1.prototype.Ln=function(t$jscomp$0,e){var n=this;return Cr(t$jscomp$0).get(e.path.N()).next(function(t){return n.$r(t)})},t$jscomp$1.prototype.xr=function(t$jscomp$0,
e$jscomp$0){var n=this;return Cr(t$jscomp$0).get(e$jscomp$0.path.N()).next(function(t){var e=n.$r(t);return e?{Or:e,size:Mr(t)}:null})},t$jscomp$1.prototype.getEntries=function(t$jscomp$0,e$jscomp$0){var n=this,r=rt;return this.Mr(t$jscomp$0,e$jscomp$0,function(t,e){e=n.$r(e);r=r.st(t,e)}).next(function(){return r})},t$jscomp$1.prototype.Lr=function(t$jscomp$0,e$jscomp$0){var n=this,r=rt,i=new $(U.P);return this.Mr(t$jscomp$0,e$jscomp$0,function(t,e){var o=n.$r(e);o?(r=r.st(t,o),i=i.st(t,Mr(e))):
(r=r.st(t,null),i=i.st(t,0))}).next(function(){return{qr:r,Br:i}})},t$jscomp$1.prototype.Mr=function(t$jscomp$0,e$jscomp$0,n){if(e$jscomp$0._())return Fn.resolve();var r$jscomp$0=IDBKeyRange.bound(e$jscomp$0.first().path.N(),e$jscomp$0.last().path.N()),i=e$jscomp$0.ut(),o=i.wt();return Cr(t$jscomp$0).Zs({range:r$jscomp$0},function(t,e,r){for(t=U.K(t);o&&0>U.P(o,t);)n(o,null),o=i.wt();o&&o.isEqual(t)&&(n(o,e),o=i.Tt()?i.wt():null);o?r.Gs(o.path.N()):r.done()}).next(function(){for(;o;)n(o,null),o=i.Tt()?
i.wt():null})},t$jscomp$1.prototype.ns=function(t$jscomp$0,e,n$jscomp$0){var r=this,i=st,o=e.path.length+1,s$jscomp$0={};if(n$jscomp$0.isEqual(L.min())){var u=e.path.N();s$jscomp$0.range=IDBKeyRange.lowerBound(u)}else u=e.path.N(),n$jscomp$0=Ir(n$jscomp$0),s$jscomp$0.range=IDBKeyRange.lowerBound([u,n$jscomp$0],!0),s$jscomp$0.index=Zr.collectionReadTimeIndex;return Cr(t$jscomp$0).Zs(s$jscomp$0,function(t,n,s){t.length===o&&(t=br(r.serializer,n),e.path.D(t.key.path)?t instanceof rn&&bn(e,t)&&(i=i.st(t.key,
t)):s.done())}).next(function(){return i})},t$jscomp$1.prototype.Ur=function(t$jscomp$0,e$jscomp$0){var n=this,r=rt,i=Ir(e$jscomp$0);t$jscomp$0=Cr(t$jscomp$0);e$jscomp$0=IDBKeyRange.lowerBound(i,!0);return t$jscomp$0.Zs({index:Zr.readTimeIndex,range:e$jscomp$0},function(t,e){t=br(n.serializer,e);r=r.st(t.key,t);i=e.readTime}).next(function(){return{Qr:r,readTime:Er(i)}})},t$jscomp$1.prototype.Wr=function(t$jscomp$0){t$jscomp$0=Cr(t$jscomp$0);var n=L.min();return t$jscomp$0.Zs({index:Zr.readTimeIndex,
reverse:!0},function(t,e,r){e.readTime&&(n=Er(e.readTime));r.done()}).next(function(){return n})},t$jscomp$1.prototype.jr=function(e){return new t$jscomp$1.Kr(this,!!e&&e.Gr)},t$jscomp$1.prototype.zr=function(t$jscomp$0){return this.getMetadata(t$jscomp$0).next(function(t){return t.byteSize})},t$jscomp$1.prototype.getMetadata=function(t$jscomp$0){return di.Ms(t$jscomp$0,Xr.store).get(Xr.key).next(function(t){t||d$jscomp$0();return t})},t$jscomp$1.prototype.kr=function(t,e){return di.Ms(t,Xr.store).put(Xr.key,
e)},t$jscomp$1.prototype.$r=function(t){return t?(t=br(this.serializer,t),t instanceof on&&t.version.isEqual(L.min())?null:t):null},t$jscomp$1}();Vr.Kr=function(e$jscomp$2){function n$jscomp$0(t$jscomp$0,n){var r=this;return(r=e$jscomp$2.call(this)||this).Hr=t$jscomp$0,r.Gr=n,r.Yr=new S(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$2),n$jscomp$0.prototype.Un=function(t$jscomp$0){var e$jscomp$0=this,n=[],r$jscomp$0=0,i=new et(function(t,
e){return w(t.F(),e.F())});return this.Fn.forEach(function(o,s){var u=e$jscomp$0.Yr.get(o);if(s){s=_r(e$jscomp$0.Hr.serializer,s,e$jscomp$0.readTime);i=i.add(o.path.p());var c=Mr(s);r$jscomp$0+=c-u;n.push(e$jscomp$0.Hr.xn(t$jscomp$0,o,s))}else(r$jscomp$0-=u,e$jscomp$0.Gr)?(u=_r(e$jscomp$0.Hr.serializer,new on(o,L.min()),e$jscomp$0.readTime),n.push(e$jscomp$0.Hr.xn(t$jscomp$0,o,u))):n.push(e$jscomp$0.Hr.Mn(t$jscomp$0,o))}),i.forEach(function(r){n.push(e$jscomp$0.Hr.zn.Ar(t$jscomp$0,r))}),n.push(this.Hr.updateMetadata(t$jscomp$0,
r$jscomp$0)),Fn.Cn(n)},n$jscomp$0.prototype.qn=function(t$jscomp$0,e){var n=this;return this.Hr.xr(t$jscomp$0,e).next(function(t){return null===t?(n.Yr.set(e,0),null):(n.Yr.set(e,t.size),t.Or)})},n$jscomp$0.prototype.Bn=function(t$jscomp$1,e$jscomp$1){var n=this;return this.Hr.Lr(t$jscomp$1,e$jscomp$1).next(function(t$jscomp$0){var e$jscomp$0=t$jscomp$0.qr;return t$jscomp$0.Br.forEach(function(t,e){n.Yr.set(t,e)}),e$jscomp$0})},n$jscomp$0}(Gn);var Fr=function(){function t$jscomp$0(){this.Jr=new Gr}
return t$jscomp$0.prototype.Ar=function(t,e){return this.Jr.add(e),Fn.resolve()},t$jscomp$0.prototype.hs=function(t,e){return Fn.resolve(this.Jr.getEntries(e))},t$jscomp$0}(),Gr=function(){function t$jscomp$0(){this.index={}}return t$jscomp$0.prototype.add=function(t){var e=t.S();t=t.p();var r=this.index[e]||new et(P.P),i=!r.has(t);return this.index[e]=r.add(t),i},t$jscomp$0.prototype.has=function(t){var e=t.S();t=t.p();return(e=this.index[e])&&e.has(t)},t$jscomp$0.prototype.getEntries=function(t){return(this.index[t]||
new et(P.P)).N()},t$jscomp$0}(),jr=function(){function t$jscomp$2(t){this.serializer=t}return t$jscomp$2.prototype.createOrUpgrade=function(t$jscomp$1,e$jscomp$0,n$jscomp$0,r$jscomp$0){var i=this;n$jscomp$0<r$jscomp$0&&0<=n$jscomp$0&&10>=r$jscomp$0||d$jscomp$0();var o=new Jn(e$jscomp$0);1>n$jscomp$0&&1<=r$jscomp$0&&(t$jscomp$1.createObjectStore(zr.store),function(t){t.createObjectStore(Qr.store,{keyPath:Qr.keyPath});t.createObjectStore(Wr.store,{keyPath:Wr.keyPath,autoIncrement:!0}).createIndex(Wr.userMutationsIndex,
Wr.userMutationsKeyPath,{unique:!0});t.createObjectStore(Hr.store)}(t$jscomp$1),ni(t$jscomp$1),t$jscomp$1.createObjectStore(Zr.store));var s=Fn.resolve();return 3>n$jscomp$0&&3<=r$jscomp$0&&(0!==n$jscomp$0&&(function(t){t.deleteObjectStore(Jr.store);t.deleteObjectStore($r.store);t.deleteObjectStore(ti.store)}(t$jscomp$1),ni(t$jscomp$1)),s=s.next(function(){var e=o.store(ti.store),n=new ti(0,0,L.min().A(),0);return e.put(ti.key,n)})),4>n$jscomp$0&&4<=r$jscomp$0&&(0!==n$jscomp$0&&(s=s.next(function(){return function(t$jscomp$0,
e){return e.store(Wr.store).Hs().next(function(n){t$jscomp$0.deleteObjectStore(Wr.store);t$jscomp$0.createObjectStore(Wr.store,{keyPath:Wr.keyPath,autoIncrement:!0}).createIndex(Wr.userMutationsIndex,Wr.userMutationsKeyPath,{unique:!0});var r=e.store(Wr.store);n=n.map(function(t){return r.put(t)});return Fn.Cn(n)})}(t$jscomp$1,o)})),s=s.next(function(){t$jscomp$1.createObjectStore(ri.store,{keyPath:ri.keyPath});!0})),5>n$jscomp$0&&5<=r$jscomp$0&&(s=s.next(function(){return i.removeAcknowledgedMutations(o)})),
6>n$jscomp$0&&6<=r$jscomp$0&&(s=s.next(function(){t$jscomp$1.createObjectStore(Xr.store);return i.addDocumentGlobal(o)})),7>n$jscomp$0&&7<=r$jscomp$0&&(s=s.next(function(){return i.ensureSequenceNumbers(o)})),8>n$jscomp$0&&8<=r$jscomp$0&&(s=s.next(function(){return i.createCollectionParentIndex(t$jscomp$1,o)})),9>n$jscomp$0&&9<=r$jscomp$0&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t$jscomp$1);(function(t){t=
t.objectStore(Zr.store);t.createIndex(Zr.readTimeIndex,Zr.readTimeIndexPath,{unique:!1});t.createIndex(Zr.collectionReadTimeIndex,Zr.collectionReadTimeIndexPath,{unique:!1})})(e$jscomp$0)})),10>n$jscomp$0&&10<=r$jscomp$0&&(s=s.next(function(){return i.rewriteCanonicalIds(o)})),s},t$jscomp$2.prototype.addDocumentGlobal=function(t$jscomp$0){var e=0;return t$jscomp$0.store(Zr.store).Zs(function(t,n){e+=Mr(n)}).next(function(){var n=new Xr(e);return t$jscomp$0.store(Xr.store).put(Xr.key,n)})},t$jscomp$2.prototype.removeAcknowledgedMutations=
function(t){var e=this,n$jscomp$1=t.store(Qr.store),r$jscomp$1=t.store(Wr.store);return n$jscomp$1.Hs().next(function(n$jscomp$0){return Fn.forEach(n$jscomp$0,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r$jscomp$1.Hs(Wr.userMutationsIndex,i).next(function(r$jscomp$0){return Fn.forEach(r$jscomp$0,function(r){r.userId===n.userId||d$jscomp$0();r=Ar(e.serializer,r);return Lr(t,n.userId,r).next(function(){})})})})})},t$jscomp$2.prototype.ensureSequenceNumbers=
function(t$jscomp$0){var e=t$jscomp$0.store(Jr.store),n$jscomp$1=t$jscomp$0.store(Zr.store);return t$jscomp$0.store(ti.store).get(ti.key).next(function(t){var r=[];return n$jscomp$1.Zs(function(n$jscomp$0,i){var o=new P(n$jscomp$0);n$jscomp$0=[0,yr(o)];r.push(e.get(n$jscomp$0).next(function(n){return n?Fn.resolve():e.put(new Jr(0,yr(o),t.highestListenSequenceNumber))}))}).next(function(){return Fn.Cn(r)})})},t$jscomp$2.prototype.createCollectionParentIndex=function(t$jscomp$0,e$jscomp$0){t$jscomp$0.createObjectStore(ei.store,
{keyPath:ei.keyPath});var n=e$jscomp$0.store(ei.store),r=new Gr,i=function(t){if(r.add(t)){var e=t.S();t=t.p();return n.put({collectionId:e,parent:yr(t)})}};return e$jscomp$0.store(Zr.store).Zs({Xs:!0},function(t,e){t=new P(t);return i(t.p())}).next(function(){return e$jscomp$0.store(Hr.store).Zs({Xs:!0},function(t,e){t[0];e=t[1];t=(t[2],mr(e));return i(t.p())})})},t$jscomp$2.prototype.rewriteCanonicalIds=function(t$jscomp$0){var e=this,n=t$jscomp$0.store($r.store);return n.Zs(function(t,r){t=Sr(r);
t=Dr(e.serializer,t);return n.put(t)})},t$jscomp$2}(),Br=function(t,e){this.seconds=t;this.nanoseconds=e},zr=function(t,e,n){this.ownerId=t;this.allowTabSynchronization=e;this.leaseTimestampMs=n};zr.store="owner";zr.key="owner";var Qr=function(t,e,n){this.userId=t;this.lastAcknowledgedBatchId=e;this.lastStreamToken=n};Qr.store="mutationQueues";Qr.keyPath="userId";var Wr=function(t,e,n,r,i){this.userId=t;this.batchId=e;this.localWriteTimeMs=n;this.baseMutations=r;this.mutations=i};Wr.store="mutations";
Wr.keyPath="batchId";Wr.userMutationsIndex="userMutationsIndex";Wr.userMutationsKeyPath=["userId","batchId"];var Hr=function(){function t$jscomp$0(){}return t$jscomp$0.prefixForUser=function(t){return[t]},t$jscomp$0.prefixForPath=function(t,e){return[t,yr(e)]},t$jscomp$0.key=function(t,e,n){return[t,yr(e),n]},t$jscomp$0}();Hr.store="documentMutations";Hr.PLACEHOLDER=new Hr;var Kr=function(t,e){this.path=t;this.readTime=e},Yr=function(t,e){this.path=t;this.version=e},Zr=function(t,e,n,r,i,o){this.unknownDocument=
t;this.noDocument=e;this.document=n;this.hasCommittedMutations=r;this.readTime=i;this.parentPath=o};Zr.store="remoteDocuments";Zr.readTimeIndex="readTimeIndex";Zr.readTimeIndexPath="readTime";Zr.collectionReadTimeIndex="collectionReadTimeIndex";Zr.collectionReadTimeIndexPath=["parentPath","readTime"];var Xr=function(t){this.byteSize=t};Xr.store="remoteDocumentGlobal";Xr.key="remoteDocumentGlobalKey";var $r=function(t,e,n,r,i,o,s){this.targetId=t;this.canonicalId=e;this.readTime=n;this.resumeToken=
r;this.lastListenSequenceNumber=i;this.lastLimboFreeSnapshotVersion=o;this.query=s};$r.store="targets";$r.keyPath="targetId";$r.queryTargetsIndexName="queryTargetsIndex";$r.queryTargetsKeyPath=["canonicalId","targetId"];var Jr=function(t,e,n){this.targetId=t;this.path=e;this.sequenceNumber=n};Jr.store="targetDocuments";Jr.keyPath=["targetId","path"];Jr.documentTargetsIndex="documentTargetsIndex";Jr.documentTargetsKeyPath=["path","targetId"];var ti=function(t,e,n,r){this.highestTargetId=t;this.highestListenSequenceNumber=
e;this.lastRemoteSnapshotVersion=n;this.targetCount=r};ti.key="targetGlobalKey";ti.store="targetGlobal";var ei=function(t,e){this.collectionId=t;this.parent=e};ei.store="collectionParents";ei.keyPath=["collectionId","parent"];var ri=function(t,e,n,r){this.clientId=t;this.updateTimeMs=e;this.networkEnabled=n;this.inForeground=r};ri.store="clientMetadata";ri.keyPath="clientId";var ii=t$jscomp$4.__spreadArrays(t$jscomp$4.__spreadArrays(t$jscomp$4.__spreadArrays([Qr.store,Wr.store,Hr.store,Zr.store,$r.store,
zr.store,ti.store,Jr.store],[ri.store]),[Xr.store]),[ei.store]),oi=function(){function t$jscomp$1(){this.Xr=new Gr}return t$jscomp$1.prototype.Ar=function(t,e){var n=this;if(!this.Xr.has(e)){var r=e.S(),i=e.p();t.Wn(function(){n.Xr.add(e)});r={collectionId:r,parent:yr(i)};return di.Ms(t,ei.store).put(r)}return Fn.resolve()},t$jscomp$1.prototype.hs=function(t$jscomp$0,e){var n=[],r$jscomp$0=IDBKeyRange.bound([e,""],[e+"\x00",""],!1,!0);return di.Ms(t$jscomp$0,ei.store).Hs(r$jscomp$0).next(function(t){for(var r=
0;r<t.length;r++){var o=t[r];if(o.collectionId!==e)break;n.push(mr(o.parent))}return n})},t$jscomp$1}(),ui=function(){function t$jscomp$0(t){this.Zr=t}return t$jscomp$0.prototype.next=function(){return this.Zr+=2,this.Zr},t$jscomp$0.to=function(){return new t$jscomp$0(0)},t$jscomp$0.eo=function(){return new t$jscomp$0(-1)},t$jscomp$0}(),ai=function(){function t$jscomp$1(t,e){this.dr=t;this.serializer=e}return t$jscomp$1.prototype.no=function(t){var e=this;return this.so(t).next(function(n){var r=
new ui(n.highestTargetId);return n.highestTargetId=r.next(),e.io(t,n).next(function(){return n.highestTargetId})})},t$jscomp$1.prototype.ro=function(t$jscomp$0){return this.so(t$jscomp$0).next(function(t){return L.I(new k(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t$jscomp$1.prototype.oo=function(t$jscomp$0){return this.so(t$jscomp$0).next(function(t){return t.highestListenSequenceNumber})},t$jscomp$1.prototype.ho=function(t,e,n){var r=this;return this.so(t).next(function(i){return i.highestListenSequenceNumber=
e,n&&(i.lastRemoteSnapshotVersion=n.A()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.io(t,i)})},t$jscomp$1.prototype.ao=function(t,e){var n=this;return this.uo(t,e).next(function(){return n.so(t).next(function(r){return r.targetCount+=1,n.co(e,r),n.io(t,r)})})},t$jscomp$1.prototype.lo=function(t,e){return this.uo(t,e)},t$jscomp$1.prototype._o=function(t,e$jscomp$0){var n=this;return this.fo(t,e$jscomp$0.targetId).next(function(){return ci(t).delete(e$jscomp$0.targetId)}).next(function(){return n.so(t)}).next(function(e){0<
e.targetCount||d$jscomp$0();return--e.targetCount,n.io(t,e)})},t$jscomp$1.prototype.hr=function(t,e,n){var r=this,i=0,o=[];return ci(t).Zs(function(s,u){s=Sr(u);s.sequenceNumber<=e&&null===n.get(s.targetId)&&(i++,o.push(r._o(t,s)))}).next(function(){return Fn.Cn(o)}).next(function(){return i})},t$jscomp$1.prototype.be=function(t$jscomp$0,e){return ci(t$jscomp$0).Zs(function(t,n){t=Sr(n);e(t)})},t$jscomp$1.prototype.so=function(t$jscomp$0){return di.Ms(t$jscomp$0,ti.store).get(ti.key).next(function(t){null!==
t||d$jscomp$0();return t})},t$jscomp$1.prototype.io=function(t,e){return di.Ms(t,ti.store).put(ti.key,e)},t$jscomp$1.prototype.uo=function(t,e){return ci(t).put(Dr(this.serializer,e))},t$jscomp$1.prototype.co=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t$jscomp$1.prototype.do=function(t$jscomp$0){return this.so(t$jscomp$0).next(function(t){return t.targetCount})},
t$jscomp$1.prototype.wo=function(t$jscomp$0,e){var n$jscomp$0=j(e);n$jscomp$0=IDBKeyRange.bound([n$jscomp$0,Number.NEGATIVE_INFINITY],[n$jscomp$0,Number.POSITIVE_INFINITY]);var i=null;return ci(t$jscomp$0).Zs({range:n$jscomp$0,index:$r.queryTargetsIndexName},function(t,n,r){t=Sr(n);B(e,t.target)&&(i=t,r.done())}).next(function(){return i})},t$jscomp$1.prototype.To=function(t,e$jscomp$0,n){var r=this,i=[],o=fi(t);return e$jscomp$0.forEach(function(e){var s=yr(e.path);i.push(o.put(new Jr(n,s)));i.push(r.dr.Eo(t,
n,e))}),Fn.Cn(i)},t$jscomp$1.prototype.Io=function(t,e$jscomp$0,n){var r=this,i=fi(t);return Fn.forEach(e$jscomp$0,function(e){var o=yr(e.path);return Fn.Cn([i.delete([n,o]),r.dr.mo(t,n,e)])})},t$jscomp$1.prototype.fo=function(t,e){t=fi(t);e=IDBKeyRange.bound([e],[e+1],!1,!0);return t.delete(e)},t$jscomp$1.prototype.Ao=function(t$jscomp$0,e$jscomp$0){e$jscomp$0=IDBKeyRange.bound([e$jscomp$0],[e$jscomp$0+1],!1,!0);t$jscomp$0=fi(t$jscomp$0);var i=ht();return t$jscomp$0.Zs({range:e$jscomp$0,Xs:!0},function(t,
e,n){t=mr(t[1]);t=new U(t);i=i.add(t)}).next(function(){return i})},t$jscomp$1.prototype.Nr=function(t$jscomp$0,e$jscomp$0){e$jscomp$0=yr(e$jscomp$0.path);e$jscomp$0=IDBKeyRange.bound([e$jscomp$0],[e$jscomp$0+"\x00"],!1,!0);var i=0;return fi(t$jscomp$0).Zs({index:Jr.documentTargetsIndex,Xs:!0,range:e$jscomp$0},function(t,e,n){e=t[0];t[1];0!==e&&(i++,n.done())}).next(function(){return 0<i})},t$jscomp$1.prototype.Me=function(t$jscomp$0,e){return ci(t$jscomp$0).get(e).next(function(t){return t?Sr(t):
null})},t$jscomp$1}(),pi=function(e){function n$jscomp$0(t,n){var r=this;return(r=e.call(this)||this).vr=t,r.Ro=n,r}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0}(Bn),di=function(){function e$jscomp$1(t$jscomp$0,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=t$jscomp$0,this.persistenceKey=n,this.clientId=r,this.Is=o,this.window=s,this.document=u,this.Po=c,this.Vo=h,this.yo=null,this.po=!1,this.isPrimary=!1,this.networkEnabled=!0,this.bo=null,this.inForeground=!1,this.vo=null,this.So=null,
this.Do=Number.NEGATIVE_INFINITY,this.Co=function(t){return Promise.resolve()},!e$jscomp$1.ks())throw new x(D.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.dr=new gi(this,i);this.No=n+"main";this.serializer=new wr(a);this.Fo=new Yn(this.No,10,new jr(this.serializer));this.ko=new ai(this.dr,this.serializer);this.zn=new oi;this.Kn=new Vr(this.serializer,this.zn);this.window&&this.window.localStorage?
this.$o=this.window.localStorage:(this.$o=null,!1===h&&f$jscomp$0("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e$jscomp$1.Ms=function(t,e){if(t instanceof pi)return Yn.Ms(t.vr,e);throw d$jscomp$0();},e$jscomp$1.prototype.start=function(){var t=this;return this.xo().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new x(D.FAILED_PRECONDITION,
"Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.");return t.Oo(),t.Mo(),t.Lo(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.ko.oo(e)})}).then(function(e){t.yo=new Wn(e,t.Po)}).then(function(){t.po=!0}).catch(function(e){return t.Fo&&
t.Fo.close(),Promise.reject(e)})},e$jscomp$1.prototype.qo=function(e){var n=this;return this.Co=function(r){return t$jscomp$4.__awaiter(n,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){return this.tr?[2,e(r)]:[2]})})},e(this.isPrimary)},e$jscomp$1.prototype.Bo=function(e){var n=this;this.Fo.Bs(function(r){return t$jscomp$4.__awaiter(n,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return null===r.newVersion?[4,e()]:[3,2];case 1:t.sent(),
t.label=2;case 2:return[2]}})})})},e$jscomp$1.prototype.Uo=function(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Is.ai(function(){return t$jscomp$4.__awaiter(n,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return this.tr?[4,this.xo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},e$jscomp$1.prototype.xo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e$jscomp$0){return di.Ms(e$jscomp$0,
ri.store).put(new ri(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Qo(e$jscomp$0).next(function(e){e||(t.isPrimary=!1,t.Is.gi(function(){return t.Co(!1)}))})}).next(function(){return t.Wo(e$jscomp$0)}).next(function(n){return t.isPrimary&&!n?t.jo(e$jscomp$0).next(function(){return!1}):!!n&&t.Ko(e$jscomp$0).next(function(){return!0})})}).catch(function(e){if($n(e))return h$jscomp$0("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;
if(!t.allowTabSynchronization)throw e;return h$jscomp$0("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Is.gi(function(){return t.Co(e)});t.isPrimary=e})},e$jscomp$1.prototype.Qo=function(t$jscomp$0){var e=this;return yi(t$jscomp$0).get(zr.key).next(function(t){return Fn.resolve(e.Go(t))})},e$jscomp$1.prototype.zo=function(t){return di.Ms(t,ri.store).delete(this.clientId)},e$jscomp$1.prototype.Ho=function(){return t$jscomp$4.__awaiter(this,
void 0,void 0,function(){var n$jscomp$0,r$jscomp$0,i,o,s=this;return t$jscomp$4.__generator(this,function(t$jscomp$2){switch(t$jscomp$2.label){case 0:return!this.isPrimary||this.Yo(this.Do,18E5)?[3,2]:(this.Do=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t$jscomp$1){var n=e$jscomp$1.Ms(t$jscomp$1,ri.store);return n.Hs().next(function(t$jscomp$0){var e=s.Jo(t$jscomp$0,18E5),r=t$jscomp$0.filter(function(t){return-1===e.indexOf(t)});return Fn.forEach(r,
function(t){return n.delete(t.clientId)}).next(function(){return r})})}).catch(function(){return[]})]);case 1:if(n$jscomp$0=t$jscomp$2.sent(),this.$o)for(r$jscomp$0=0,i=n$jscomp$0;r$jscomp$0<i.length;r$jscomp$0++)o=i[r$jscomp$0],this.$o.removeItem(this.Xo(o.clientId));t$jscomp$2.label=2;case 2:return[2]}})})},e$jscomp$1.prototype.Lo=function(){var t=this;this.So=this.Is.Ss("client_metadata_refresh",4E3,function(){return t.xo().then(function(){return t.Ho()}).then(function(){return t.Lo()})})},e$jscomp$1.prototype.Go=
function(t){return!!t&&t.ownerId===this.clientId},e$jscomp$1.prototype.Wo=function(t$jscomp$1){var e=this;return this.Vo?Fn.resolve(!0):yi(t$jscomp$1).get(zr.key).next(function(n){if(null!==n&&e.Yo(n.leaseTimestampMs,5E3)&&!e.Zo(n.ownerId)){if(e.Go(n)&&e.networkEnabled)return!0;if(!e.Go(n)){if(!n.allowTabSynchronization)throw new x(D.FAILED_PRECONDITION,"Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.");
return!1}}return!(!e.networkEnabled||!e.inForeground)||di.Ms(t$jscomp$1,ri.store).Hs().next(function(t$jscomp$0){return void 0===e.Jo(t$jscomp$0,5E3).find(function(t){if(e.clientId!==t.clientId){var r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(!e.networkEnabled&&t.networkEnabled||r&&i)return!0}return!1})})}).next(function(t){return e.isPrimary!==t&&h$jscomp$0("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},e$jscomp$1.prototype.th=
function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var e=this;return t$jscomp$4.__generator(this,function(t$jscomp$0){switch(t$jscomp$0.label){case 0:return this.po=!1,this.eh(),this.So&&(this.So.cancel(),this.So=null),this.nh(),this.sh(),[4,this.Fo.runTransaction("readwrite",[zr.store,ri.store],function(t){var n=new pi(t,Wn.Es);return e.jo(n).next(function(){return e.zo(n)})})];case 1:return t$jscomp$0.sent(),this.Fo.close(),this.ih(),[2]}})})},e$jscomp$1.prototype.Jo=function(t$jscomp$0,
e){var n=this;return t$jscomp$0.filter(function(t){return n.Yo(t.updateTimeMs,e)&&!n.Zo(t.clientId)})},e$jscomp$1.prototype.rh=function(){var t$jscomp$0=this;return this.runTransaction("getActiveClients","readonly",function(e$jscomp$0){return di.Ms(e$jscomp$0,ri.store).Hs().next(function(e){return t$jscomp$0.Jo(e,18E5).map(function(t){return t.clientId})})})},Object.defineProperty(e$jscomp$1.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),e$jscomp$1.prototype.oh=function(t){return xr.Tr(t,
this.serializer,this.zn,this.dr)},e$jscomp$1.prototype.hh=function(){return this.ko},e$jscomp$1.prototype.ah=function(){return this.Kn},e$jscomp$1.prototype.uh=function(){return this.zn},e$jscomp$1.prototype.runTransaction=function(t$jscomp$0,e$jscomp$0,n){var r=this;h$jscomp$0("IndexedDbPersistence","Starting transaction:",t$jscomp$0);var i;return this.Fo.runTransaction("readonly"===e$jscomp$0?"readonly":"readwrite",ii,function(o){return i=new pi(o,r.yo?r.yo.next():Wn.Es),"readwrite-primary"===e$jscomp$0?
r.Qo(i).next(function(t){return!!t||r.Wo(i)}).next(function(e){if(!e)throw f$jscomp$0("Failed to obtain primary lease for action '"+t$jscomp$0+"'."),r.isPrimary=!1,r.Is.gi(function(){return r.Co(!1)}),new x(D.FAILED_PRECONDITION,"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.");return n(i)}).next(function(t){return r.Ko(i).next(function(){return t})}):r.lh(i).next(function(){return n(i)})}).then(function(t){return i.jn(),t})},
e$jscomp$1.prototype.lh=function(t$jscomp$0){var e=this;return yi(t$jscomp$0).get(zr.key).next(function(t){if(!(null===t||!e.Yo(t.leaseTimestampMs,5E3)||e.Zo(t.ownerId)||e.Go(t)||e.Vo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new x(D.FAILED_PRECONDITION,"Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.");
})},e$jscomp$1.prototype.Ko=function(t){var e=new zr(this.clientId,this.allowTabSynchronization,Date.now());return yi(t).put(zr.key,e)},e$jscomp$1.ks=function(){return Yn.ks()},e$jscomp$1.prototype.jo=function(t$jscomp$0){var e=this,n=yi(t$jscomp$0);return n.get(zr.key).next(function(t){return e.Go(t)?(h$jscomp$0("IndexedDbPersistence","Releasing primary lease."),n.delete(zr.key)):Fn.resolve()})},e$jscomp$1.prototype.Yo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(f$jscomp$0("Detected an update time that is in the future: "+
t+" \x3e "+n),1))},e$jscomp$1.prototype.Oo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.vo=function(){t.Is.ai(function(){return t.inForeground="visible"===t.document.visibilityState,t.xo()})},this.document.addEventListener("visibilitychange",this.vo),this.inForeground="visible"===this.document.visibilityState)},e$jscomp$1.prototype.nh=function(){this.vo&&(this.document.removeEventListener("visibilitychange",this.vo),this.vo=null)},e$jscomp$1.prototype.Mo=
function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.bo=function(){e.eh();e.Is.ai(function(){return e.th()})},this.window.addEventListener("unload",this.bo))},e$jscomp$1.prototype.sh=function(){this.bo&&(this.window.removeEventListener("unload",this.bo),this.bo=null)},e$jscomp$1.prototype.Zo=function(t){var e;try{var n=null!==(null===(e=this.$o)||void 0===e?void 0:e.getItem(this.Xo(t)));return h$jscomp$0("IndexedDbPersistence","Client '"+
t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t$25){return f$jscomp$0("IndexedDbPersistence","Failed to get zombied client id.",t$25),!1}},e$jscomp$1.prototype.eh=function(){if(this.$o)try{this.$o.setItem(this.Xo(this.clientId),String(Date.now()))}catch(t$26){f$jscomp$0("Failed to set zombie client id.",t$26)}},e$jscomp$1.prototype.ih=function(){if(this.$o)try{this.$o.removeItem(this.Xo(this.clientId))}catch(t$27){}},e$jscomp$1.prototype.Xo=function(t){return"firestore_zombie_"+this.persistenceKey+
"_"+t},e$jscomp$1}(),gi=function(){function t$jscomp$2(t,e){this.db=t;this.Yi=new dr(this,e)}return t$jscomp$2.prototype.ir=function(t$jscomp$0){var e$jscomp$0=this._h(t$jscomp$0);return this.db.hh().do(t$jscomp$0).next(function(t){return e$jscomp$0.next(function(e){return t+e})})},t$jscomp$2.prototype._h=function(t$jscomp$0){var e=0;return this.or(t$jscomp$0,function(t){e++}).next(function(){return e})},t$jscomp$2.prototype.be=function(t,e){return this.db.hh().be(t,e)},t$jscomp$2.prototype.or=function(t$jscomp$0,
e){return this.fh(t$jscomp$0,function(t,n){return e(n)})},t$jscomp$2.prototype.Eo=function(t,e,n){return mi(t,n)},t$jscomp$2.prototype.mo=function(t,e,n){return mi(t,n)},t$jscomp$2.prototype.hr=function(t,e,n){return this.db.hh().hr(t,e,n)},t$jscomp$2.prototype.Dr=function(t,e){return mi(t,e)},t$jscomp$2.prototype.dh=function(t$jscomp$1,e$jscomp$0){return function(t$jscomp$0,e){var n=!1;return di.Ms(t$jscomp$0,Qr.store).ti(function(r){return kr(t$jscomp$0,r,e).next(function(t){return t&&(n=!0),Fn.resolve(!t)})}).next(function(){return n})}(t$jscomp$1,
e$jscomp$0)},t$jscomp$2.prototype.ar=function(t,e$jscomp$0){var n=this,r=this.db.ah().jr(),i=[],o=0;return this.fh(t,function(s,u){u<=e$jscomp$0&&(u=n.dh(t,s).next(function(e){if(!e)return o++,r.Ln(t,s).next(function(){return r.Mn(s),fi(t).delete([0,yr(s.path)])})}),i.push(u))}).next(function(){return Fn.Cn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t$jscomp$2.prototype.removeTarget=function(t,e){e=e.tt(t.Ro);return this.db.hh().lo(t,e)},t$jscomp$2.prototype.wh=function(t,
e){return mi(t,e)},t$jscomp$2.prototype.fh=function(t$jscomp$0,e){var n;t$jscomp$0=fi(t$jscomp$0);var i=Wn.Es;return t$jscomp$0.Zs({index:Jr.documentTargetsIndex},function(t,r){var o=t[0];t=(t[1],r.path);r=r.sequenceNumber;0===o?(i!==Wn.Es&&e(new U(mr(n)),i),i=r,n=t):i=Wn.Es}).next(function(){i!==Wn.Es&&e(new U(mr(n)),i)})},t$jscomp$2.prototype.cr=function(t){return this.db.ah().zr(t)},t$jscomp$2}(),bi=function(){function t$jscomp$1(t$jscomp$0,e,n){this.persistence=t$jscomp$0;this.Th=e;this.Eh=new $(w);
this.Ih=new S(function(t){return j(t)},B);this.mh=L.min();this.Gn=t$jscomp$0.oh(n);this.Ah=t$jscomp$0.ah();this.ko=t$jscomp$0.hh();this.Rh=new zn(this.Ah,this.Gn,this.persistence.uh());this.Th.Ph(this.Rh)}return t$jscomp$1.prototype.er=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.ur(n,e.Eh)})},t$jscomp$1}(),ki=function(){function t$jscomp$1(){this.Vh=new et(Li.yh);this.ph=new et(Li.bh)}return t$jscomp$1.prototype._=function(){return this.Vh._()},
t$jscomp$1.prototype.Eo=function(t,e){t=new Li(t,e);this.Vh=this.Vh.add(t);this.ph=this.ph.add(t)},t$jscomp$1.prototype.vh=function(t$jscomp$0,e){var n=this;t$jscomp$0.forEach(function(t){return n.Eo(t,e)})},t$jscomp$1.prototype.mo=function(t,e){this.Sh(new Li(t,e))},t$jscomp$1.prototype.Dh=function(t$jscomp$0,e){var n=this;t$jscomp$0.forEach(function(t){return n.mo(t,e)})},t$jscomp$1.prototype.Ch=function(t$jscomp$0){var e=this,n=new U(new P([])),r=new Li(n,t$jscomp$0);t$jscomp$0=new Li(n,t$jscomp$0+
1);var o=[];return this.ph.St([r,t$jscomp$0],function(t){e.Sh(t);o.push(t.key)}),o},t$jscomp$1.prototype.Nh=function(){var t=this;this.Vh.forEach(function(e){return t.Sh(e)})},t$jscomp$1.prototype.Sh=function(t){this.Vh=this.Vh.delete(t);this.ph=this.ph.delete(t)},t$jscomp$1.prototype.Fh=function(t$jscomp$0){var e=new U(new P([])),n=new Li(e,t$jscomp$0);t$jscomp$0=new Li(e,t$jscomp$0+1);var i=ht();return this.ph.St([n,t$jscomp$0],function(t){i=i.add(t.key)}),i},t$jscomp$1.prototype.Nr=function(t){var e=
new Li(t,0);e=this.Vh.Ct(e);return null!==e&&t.isEqual(e.key)},t$jscomp$1}(),Li=function(){function t$jscomp$0(t,e){this.key=t;this.kh=e}return t$jscomp$0.yh=function(t,e){return U.P(t.key,e.key)||w(t.kh,e.kh)},t$jscomp$0.bh=function(t,e){return w(t.kh,e.kh)||U.P(t.key,e.key)},t$jscomp$0}(),Ri=function(){function t$jscomp$0(t){this.uid=t}return t$jscomp$0.prototype.Er=function(){return null!=this.uid},t$jscomp$0.prototype.$h=function(){return this.Er()?"uid:"+this.uid:"anonymous-user"},t$jscomp$0.prototype.isEqual=
function(t){return t.uid===this.uid},t$jscomp$0}();Ri.UNAUTHENTICATED=new Ri(null);Ri.xh=new Ri("google-credentials-uid");Ri.Oh=new Ri("first-party-uid");var Pi=function(t,e){this.user=e;this.type="OAuth";this.Mh={};this.Mh.Authorization="Bearer "+t},Oi=function(){function t$jscomp$0(){this.Lh=null}return t$jscomp$0.prototype.getToken=function(){return Promise.resolve(null)},t$jscomp$0.prototype.qh=function(){},t$jscomp$0.prototype.Bh=function(t){this.Lh=t;t(Ri.UNAUTHENTICATED)},t$jscomp$0.prototype.Uh=
function(){this.Lh=null},t$jscomp$0}(),Vi=function(){function t$jscomp$1(t$jscomp$0){var e=this;this.Qh=null;this.currentUser=Ri.UNAUTHENTICATED;this.Wh=!1;this.jh=0;this.Lh=null;this.forceRefresh=!1;this.Qh=function(){e.jh++;e.currentUser=e.Kh();e.Wh=!0;e.Lh&&e.Lh(e.currentUser)};this.jh=0;(this.auth=t$jscomp$0.getImmediate({optional:!0}))?this.auth.addAuthTokenListener(this.Qh):(this.Qh(null),t$jscomp$0.get().then(function(t){e.auth=t;e.Qh&&e.auth.addAuthTokenListener(e.Qh)},function(){}))}return t$jscomp$1.prototype.getToken=
function(){var t=this,e=this.jh,n$jscomp$0=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n$jscomp$0).then(function(n){t.jh!==e?n=(h$jscomp$0("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?("string"==typeof n.accessToken||d$jscomp$0(),n=new Pi(n.accessToken,t.currentUser)):n=null;return n}):Promise.resolve(null)},t$jscomp$1.prototype.qh=function(){this.forceRefresh=!0},t$jscomp$1.prototype.Bh=function(t){this.Lh=t;this.Wh&&t(this.currentUser)},
t$jscomp$1.prototype.Uh=function(){this.auth&&this.auth.removeAuthTokenListener(this.Qh);this.Lh=this.Qh=null},t$jscomp$1.prototype.Kh=function(){var t=this.auth&&this.auth.getUid();null===t||"string"==typeof t||d$jscomp$0();return new Ri(t)},t$jscomp$1}(),Ui=function(){function t$jscomp$0(t,e){this.Gh=t;this.zh=e;this.type="FirstParty";this.user=Ri.Oh}return Object.defineProperty(t$jscomp$0.prototype,"Mh",{get:function(){var t={"X-Goog-AuthUser":this.zh},e=this.Gh.auth.Hh([]);return e&&(t.Authorization=
e),t},enumerable:!1,configurable:!0}),t$jscomp$0}(),Ci=function(){function t$jscomp$0(t,e){this.Gh=t;this.zh=e}return t$jscomp$0.prototype.getToken=function(){return Promise.resolve(new Ui(this.Gh,this.zh))},t$jscomp$0.prototype.Bh=function(t){t(Ri.Oh)},t$jscomp$0.prototype.Uh=function(){},t$jscomp$0.prototype.qh=function(){},t$jscomp$0}(),qi=function(){function e$jscomp$1(t,e,n,r,i,o){this.Is=t;this.Yh=n;this.Jh=r;this.Xh=i;this.listener=o;this.Zh=this.state=0;this.stream=this.ta=null;this.Ti=new Kn(t,
e)}return e$jscomp$1.prototype.ea=function(){return 1===this.state||2===this.state||4===this.state},e$jscomp$1.prototype.na=function(){return 2===this.state},e$jscomp$1.prototype.start=function(){3!==this.state?this.auth():this.sa()},e$jscomp$1.prototype.stop=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return this.ea()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e$jscomp$1.prototype.ia=
function(){this.state=0;this.Ti.reset()},e$jscomp$1.prototype.ra=function(){var t=this;this.na()&&null===this.ta&&(this.ta=this.Is.Ss(this.Yh,6E4,function(){return t.oa()}))},e$jscomp$1.prototype.ha=function(t){this.aa();this.stream.send(t)},e$jscomp$1.prototype.oa=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){return this.na()?[2,this.close(0)]:[2]})})},e$jscomp$1.prototype.aa=function(){this.ta&&(this.ta.cancel(),this.ta=null)},
e$jscomp$1.prototype.close=function(e,n){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return this.aa(),this.Ti.cancel(),this.Zh++,3!==e?this.Ti.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(f$jscomp$0(n.toString()),f$jscomp$0("Using maximum backoff delay to prevent overloading the backend."),this.Ti.ps()):n&&n.code===D.UNAUTHENTICATED&&this.Xh.qh(),null!==this.stream&&(this.ua(),this.stream.close(),this.stream=null),this.state=
e,[4,this.listener.ca(n)];case 1:return t.sent(),[2]}})})},e$jscomp$1.prototype.ua=function(){},e$jscomp$1.prototype.auth=function(){var t=this;this.state=1;var e$jscomp$0=this.la(this.Zh),n$jscomp$0=this.Zh;this.Xh.getToken().then(function(e){t.Zh===n$jscomp$0&&t._a(e)},function(n){e$jscomp$0(function(){var e=new x(D.UNKNOWN,"Fetching auth token failed: "+n.message);return t.fa(e)})})},e$jscomp$1.prototype._a=function(t$jscomp$0){var e=this,n=this.la(this.Zh);this.stream=this.da(t$jscomp$0);this.stream.wa(function(){n(function(){return e.state=
2,e.listener.wa()})});this.stream.ca(function(t){n(function(){return e.fa(t)})});this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},e$jscomp$1.prototype.sa=function(){var e=this;this.state=4;this.Ti.bs(function(){return t$jscomp$4.__awaiter(e,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){return this.state=0,this.start(),[2]})})})},e$jscomp$1.prototype.fa=function(t){return h$jscomp$0("PersistentStream","close with error: "+t),this.stream=null,this.close(3,
t)},e$jscomp$1.prototype.la=function(t){var e=this;return function(n){e.Is.ai(function(){return e.Zh===t?n():(h$jscomp$0("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e$jscomp$1}(),Mi=function(e$jscomp$2){function n$jscomp$0(t,n,r,i,o){var s=this;return(s=e$jscomp$2.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$2),n$jscomp$0.prototype.da=function(t){return this.Jh.Ta("Listen",
t)},n$jscomp$0.prototype.onMessage=function(t$jscomp$1){this.Ti.reset();var e$jscomp$1=function(t$jscomp$0,e$jscomp$0){if("targetChange"in e$jscomp$0){e$jscomp$0.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:d$jscomp$0()}(e$jscomp$0.targetChange.targetChangeType||"NO_CHANGE"),i=e$jscomp$0.targetChange.targetIds||[];t$jscomp$0=function(t,e){t.Le?(void 0===e||"string"==typeof e||d$jscomp$0(),t=Q.fromBase64String(e||"")):(void 0===e||
e instanceof Uint8Array||d$jscomp$0(),t=Q.fromUint8Array(e||new Uint8Array));return t}(t$jscomp$0,e$jscomp$0.targetChange.resumeToken);e$jscomp$0=(e$jscomp$0=e$jscomp$0.targetChange.cause)&&function(t){var e=void 0===t.code?D.UNKNOWN:X(t.code);return new x(e,t.message||"")}(e$jscomp$0);t$jscomp$0=new bt(r,i,t$jscomp$0,e$jscomp$0||null)}else if("documentChange"in e$jscomp$0)e$jscomp$0.documentChange,r=e$jscomp$0.documentChange,r.document,r.document.name,r.document.updateTime,t$jscomp$0=ne(t$jscomp$0,
r.document.name),i=$t(r.document.updateTime),e$jscomp$0=new Je({mapValue:{fields:r.document.fields}}),t$jscomp$0=new rn(t$jscomp$0,i,e$jscomp$0,{}),t$jscomp$0=new mt(r.targetIds||[],r.removedTargetIds||[],t$jscomp$0.key,t$jscomp$0);else if("documentDelete"in e$jscomp$0)e$jscomp$0.documentDelete,r=e$jscomp$0.documentDelete,r.document,t$jscomp$0=ne(t$jscomp$0,r.document),i=r.readTime?$t(r.readTime):L.min(),t$jscomp$0=new on(t$jscomp$0,i),t$jscomp$0=new mt([],r.removedTargetIds||[],t$jscomp$0.key,t$jscomp$0);
else if("documentRemove"in e$jscomp$0)e$jscomp$0.documentRemove,r=e$jscomp$0.documentRemove,r.document,t$jscomp$0=ne(t$jscomp$0,r.document),t$jscomp$0=new mt([],r.removedTargetIds||[],t$jscomp$0,null);else{if(!("filter"in e$jscomp$0))return d$jscomp$0();e$jscomp$0.filter;t$jscomp$0=e$jscomp$0.filter;t$jscomp$0.targetId;r=new Y(t$jscomp$0.count||0);t$jscomp$0=new wt(t$jscomp$0.targetId,r)}return t$jscomp$0}(this.serializer,t$jscomp$1);t$jscomp$1=function(t){if(!("targetChange"in t))return L.min();
t=t.targetChange;return t.targetIds&&t.targetIds.length?L.min():t.readTime?$t(t.readTime):L.min()}(t$jscomp$1);return this.listener.Ea(e$jscomp$1,t$jscomp$1)},n$jscomp$0.prototype.Ia=function(t$jscomp$1){var e$jscomp$1={};e$jscomp$1.database=oe(this.serializer);e$jscomp$1.addTarget=function(t,e){var n,r=e.target;return(n=z(r)?{documents:{documents:[re(t,r.path)]}}:{query:fe(t,r)}).targetId=e.targetId,0<e.resumeToken.Y()&&(n.resumeToken=Zt(t,e.resumeToken)),n}(this.serializer,t$jscomp$1);(t$jscomp$1=
function(t$jscomp$0,e$jscomp$0){t$jscomp$0=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return d$jscomp$0()}}(0,e$jscomp$0.X);return null==t$jscomp$0?null:{"goog-listen-tags":t$jscomp$0}}(this.serializer,t$jscomp$1))&&(e$jscomp$1.labels=t$jscomp$1);this.ha(e$jscomp$1)},n$jscomp$0.prototype.ma=function(t){var e={};e.database=oe(this.serializer);e.removeTarget=t;this.ha(e)},n$jscomp$0}(qi),Fi=function(e$jscomp$1){function n$jscomp$0(t,
n,r,i,o){var s=this;return(s=e$jscomp$1.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Aa=!1,s}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$1),Object.defineProperty(n$jscomp$0.prototype,"Ra",{get:function(){return this.Aa},enumerable:!1,configurable:!0}),n$jscomp$0.prototype.start=function(){this.Aa=!1;this.lastStreamToken=void 0;e$jscomp$1.prototype.start.call(this)},n$jscomp$0.prototype.ua=function(){this.Aa&&this.Pa([])},n$jscomp$0.prototype.da=
function(t){return this.Jh.Ta("Write",t)},n$jscomp$0.prototype.onMessage=function(t$jscomp$1){t$jscomp$1.streamToken||d$jscomp$0();if(this.lastStreamToken=t$jscomp$1.streamToken,this.Aa){this.Ti.reset();var e$jscomp$0=function(t$jscomp$0,e){t$jscomp$0&&0<t$jscomp$0.length?(void 0!==e||d$jscomp$0(),t$jscomp$0=t$jscomp$0.map(function(t){var n=t.updateTime?$t(t.updateTime):$t(e);n.isEqual(L.min())&&(n=$t(e));var r=null;return t.transformResults&&0<t.transformResults.length&&(r=t.transformResults),new Ue(n,
r)})):t$jscomp$0=[];return t$jscomp$0}(t$jscomp$1.writeResults,t$jscomp$1.commitTime);t$jscomp$1=$t(t$jscomp$1.commitTime);return this.listener.ga(t$jscomp$1,e$jscomp$0)}!t$jscomp$1.writeResults||0===t$jscomp$1.writeResults.length||d$jscomp$0();return this.Aa=!0,this.listener.Va()},n$jscomp$0.prototype.ya=function(){var t={};t.database=oe(this.serializer);this.ha(t)},n$jscomp$0.prototype.Pa=function(t$jscomp$0){var e=this;t$jscomp$0={streamToken:this.lastStreamToken,writes:t$jscomp$0.map(function(t){return ae(e.serializer,
t)})};this.ha(t$jscomp$0)},n$jscomp$0}(qi),Gi=function(e$jscomp$0){function n$jscomp$0(t,n,r){var i=this;return(i=e$jscomp$0.call(this)||this).credentials=t,i.Jh=n,i.serializer=r,i.pa=!1,i}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$0),n$jscomp$0.prototype.ba=function(){if(this.pa)throw new x(D.FAILED_PRECONDITION,"The client has already been terminated.");},n$jscomp$0.prototype.va=function(t$jscomp$0,e,n){var r=this;return this.ba(),this.credentials.getToken().then(function(i){return r.Jh.va(t$jscomp$0,
e,n,i)}).catch(function(t){throw t.code===D.UNAUTHENTICATED&&r.credentials.qh(),t;})},n$jscomp$0.prototype.Sa=function(t$jscomp$0,e,n){var r=this;return this.ba(),this.credentials.getToken().then(function(i){return r.Jh.Sa(t$jscomp$0,e,n,i)}).catch(function(t){throw t.code===D.UNAUTHENTICATED&&r.credentials.qh(),t;})},n$jscomp$0.prototype.terminate=function(){this.pa=!1},n$jscomp$0}(function(){}),ji=function(){function t$jscomp$0(t,e){this.ei=t;this.Da=e;this.state="Unknown";this.Ca=0;this.Na=null;
this.Fa=!0}return t$jscomp$0.prototype.ka=function(){var t=this;0===this.Ca&&(this.$a("Unknown"),this.Na=this.ei.Ss("online_state_timeout",1E4,function(){return t.Na=null,t.xa("Backend didn't respond within 10 seconds."),t.$a("Offline"),Promise.resolve()}))},t$jscomp$0.prototype.Oa=function(t){"Online"===this.state?this.$a("Unknown"):(this.Ca++,1<=this.Ca&&(this.Ma(),this.xa("Connection failed 1 times. Most recent error: "+t.toString()),this.$a("Offline")))},t$jscomp$0.prototype.set=function(t){this.Ma();
this.Ca=0;"Online"===t&&(this.Fa=!1);this.$a(t)},t$jscomp$0.prototype.$a=function(t){t!==this.state&&(this.state=t,this.Da(t))},t$jscomp$0.prototype.xa=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fa?(f$jscomp$0(t),this.Fa=!1):h$jscomp$0("OnlineStateTracker",t)},t$jscomp$0.prototype.Ma=
function(){null!==this.Na&&(this.Na.cancel(),this.Na=null)},t$jscomp$0}(),Bi=function(){function e$jscomp$1(e$jscomp$0,n$jscomp$0,r,i,o){var s=this;this.La=e$jscomp$0;this.qa=n$jscomp$0;this.ei=r;this.Ba=[];this.Ua=new Map;this.Qa=null;this.Wa=new Set;this.ja=o;this.ja.Ka(function(e){r.ai(function(){return t$jscomp$4.__awaiter(s,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return this.Ga()?(h$jscomp$0("RemoteStore","Restarting streams for network reachability change."),
[4,this.za()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})});this.Ha=new ji(r,i);this.Ya=function(t,e,n){return t.ba(),new Mi(e,t.Jh,t.credentials,t.serializer,n)}(this.qa,r,{wa:this.Ja.bind(this),ca:this.Xa.bind(this),Ea:this.Za.bind(this)});this.tu=function(t,e,n){return t.ba(),new Fi(e,t.Jh,t.credentials,t.serializer,n)}(this.qa,r,{wa:this.eu.bind(this),ca:this.nu.bind(this),Va:this.su.bind(this),ga:this.ga.bind(this)})}return e$jscomp$1.prototype.start=function(){return this.enableNetwork()},
e$jscomp$1.prototype.enableNetwork=function(){return this.Wa.delete(0),this.iu()},e$jscomp$1.prototype.iu=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return this.Ga()?(this.ru()?this.ou():this.Ha.set("Unknown"),[4,this.hu()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e$jscomp$1.prototype.disableNetwork=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,
function(t){switch(t.label){case 0:return this.Wa.add(0),[4,this.au()];case 1:return t.sent(),this.Ha.set("Offline"),[2]}})})},e$jscomp$1.prototype.au=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return[4,this.tu.stop()];case 1:return t.sent(),[4,this.Ya.stop()];case 2:return t.sent(),0<this.Ba.length&&(h$jscomp$0("RemoteStore","Stopping write stream with "+this.Ba.length+" pending writes"),this.Ba=[]),this.uu(),
[2]}})})},e$jscomp$1.prototype.th=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return h$jscomp$0("RemoteStore","RemoteStore shutting down."),this.Wa.add(5),[4,this.au()];case 1:return t.sent(),this.ja.th(),this.Ha.set("Unknown"),[2]}})})},e$jscomp$1.prototype.listen=function(t){this.Ua.has(t.targetId)||(this.Ua.set(t.targetId,t),this.ru()?this.ou():this.Ya.na()&&this.cu(t))},e$jscomp$1.prototype.lu=function(t){this.Ua.delete(t);
this.Ya.na()&&this._u(t);0===this.Ua.size&&(this.Ya.na()?this.Ya.ra():this.Ga()&&this.Ha.set("Unknown"))},e$jscomp$1.prototype.Me=function(t){return this.Ua.get(t)||null},e$jscomp$1.prototype.Oe=function(t){return this.fu.Oe(t)},e$jscomp$1.prototype.cu=function(t){this.Qa.we(t.targetId);this.Ya.Ia(t)},e$jscomp$1.prototype._u=function(t){this.Qa.we(t);this.Ya.ma(t)},e$jscomp$1.prototype.ou=function(){this.Qa=new It(this);this.Ya.start();this.Ha.ka()},e$jscomp$1.prototype.ru=function(){return this.Ga()&&
!this.Ya.ea()&&0<this.Ua.size},e$jscomp$1.prototype.Ga=function(){return 0===this.Wa.size},e$jscomp$1.prototype.uu=function(){this.Qa=null},e$jscomp$1.prototype.Ja=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var e=this;return t$jscomp$4.__generator(this,function(t$jscomp$0){return this.Ua.forEach(function(t,n){e.cu(t)}),[2]})})},e$jscomp$1.prototype.Xa=function(e){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){return this.uu(),
this.ru()?(this.Ha.Oa(e),this.ou()):this.Ha.set("Unknown"),[2]})})},e$jscomp$1.prototype.Za=function(e,n){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r,i,o;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:if(this.Ha.set("Online"),!(e instanceof bt&&2===e.state&&e.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,this.du(e)];case 2:return t.sent(),[3,5];case 3:return r=t.sent(),h$jscomp$0("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),
r),[4,this.wu(r)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof mt?this.Qa.ge(e):e instanceof wt?this.Qa.Ce(e):this.Qa.pe(e),n.isEqual(L.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,Ii(this.La)];case 8:return i=t.sent(),0<=n.o(i)?[4,this.Tu(n)]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return h$jscomp$0("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,this.wu(o)];case 12:return t.sent(),[3,13];case 13:return[2]}})})},
e$jscomp$1.prototype.wu=function(e,n){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r=this;return t$jscomp$4.__generator(this,function(i){switch(i.label){case 0:if(!$n(e))throw e;return this.Wa.add(1),[4,this.au()];case 1:return i.sent(),this.Ha.set("Offline"),n||(n=function(){return Ii(r.La)}),this.ei.gi(function(){return t$jscomp$4.__awaiter(r,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return h$jscomp$0("RemoteStore","Retrying IndexedDB access"),
[4,n()];case 1:return t.sent(),this.Wa.delete(1),[4,this.iu()];case 2:return t.sent(),[2]}})})}),[2]}})})},e$jscomp$1.prototype.Eu=function(t){var e=this;return t().catch(function(n){return e.wu(n,t)})},e$jscomp$1.prototype.Tu=function(t$jscomp$0){var e=this,n$jscomp$0=this.Qa.ke(t$jscomp$0);return n$jscomp$0.Wt.forEach(function(n,r){if(0<n.resumeToken.Y()){var i=e.Ua.get(r);i&&e.Ua.set(r,i.et(n.resumeToken,t$jscomp$0))}}),n$jscomp$0.jt.forEach(function(t){var n=e.Ua.get(t);n&&(e.Ua.set(t,n.et(Q.J,
n.Z)),e._u(t),t=new K(n.target,t,1,n.sequenceNumber),e.cu(t))}),this.fu.Iu(n$jscomp$0)},e$jscomp$1.prototype.du=function(e){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var n,r,i,o;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:n=e.cause,r=0,i=e.targetIds,t.label=1;case 1:return r<i.length?(o=i[r],this.Ua.has(o)?[4,this.fu.mu(o,n)]:[3,3]):[3,5];case 2:t.sent(),this.Ua.delete(o),this.Qa.removeTarget(o),t.label=3;case 3:t.label=4;case 4:return r++,[3,1];case 5:return[2]}})})},
e$jscomp$1.prototype.hu=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var e,n,r;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:e=0<this.Ba.length?this.Ba[this.Ba.length-1].batchId:-1,t.label=1;case 1:if(!this.Au())return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,Ti(this.La,e)];case 3:return null===(n=t.sent())?(0===this.Ba.length&&this.tu.ra(),[3,7]):(e=n.batchId,this.Ru(n),[3,6]);case 4:return r=t.sent(),[4,this.wu(r)];case 5:return t.sent(),
[3,6];case 6:return[3,1];case 7:return this.Pu()&&this.gu(),[2]}})})},e$jscomp$1.prototype.Au=function(){return this.Ga()&&10>this.Ba.length},e$jscomp$1.prototype.Vu=function(){return this.Ba.length},e$jscomp$1.prototype.Ru=function(t){this.Ba.push(t);this.tu.na()&&this.tu.Ra&&this.tu.Pa(t.mutations)},e$jscomp$1.prototype.Pu=function(){return this.Ga()&&!this.tu.ea()&&0<this.Ba.length},e$jscomp$1.prototype.gu=function(){this.tu.start()},e$jscomp$1.prototype.eu=function(){return t$jscomp$4.__awaiter(this,
void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){return this.tu.ya(),[2]})})},e$jscomp$1.prototype.su=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var e,n,r;return t$jscomp$4.__generator(this,function(t){e=0;for(n=this.Ba;e<n.length;e++)r=n[e],this.tu.Pa(r.mutations);return[2]})})},e$jscomp$1.prototype.ga=function(e,n){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r,i,o=this;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return r=
this.Ba.shift(),i=Mn.from(r,e,n),[4,this.Eu(function(){return o.fu.yu(i)})];case 1:return t.sent(),[4,this.hu()];case 2:return t.sent(),[2]}})})},e$jscomp$1.prototype.nu=function(e){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return e&&this.tu.Ra?[4,this.pu(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.Pu()&&this.gu(),[2]}})})},e$jscomp$1.prototype.pu=function(e){return t$jscomp$4.__awaiter(this,void 0,void 0,
function(){var n,r,i=this;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return Z(r=e.code)&&r!==D.ABORTED?(n=this.Ba.shift(),this.tu.ia(),[4,this.Eu(function(){return i.fu.bu(n.batchId,e)})]):[3,3];case 1:return t.sent(),[4,this.hu()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e$jscomp$1.prototype.za=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return this.Wa.add(4),[4,this.au()];
case 1:return t.sent(),this.Ha.set("Unknown"),this.tu.ia(),this.Ya.ia(),this.Wa.delete(4),[4,this.iu()];case 2:return t.sent(),[2]}})})},e$jscomp$1.prototype.vu=function(e){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return this.ei.pi(),h$jscomp$0("RemoteStore","RemoteStore received new credentials"),this.Wa.add(3),[4,this.au()];case 1:return t.sent(),this.Ha.set("Unknown"),[4,this.fu.vu(e)];case 2:return t.sent(),
this.Wa.delete(3),[4,this.iu()];case 3:return t.sent(),[2]}})})},e$jscomp$1.prototype.Su=function(e){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var n;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return e?(this.Wa.delete(2),[4,this.iu()]):[3,2];case 1:return t.sent(),[3,5];case 2:return(n=e)?[3,4]:(this.Wa.add(2),[4,this.au()]);case 3:t.sent(),n=this.Ha.set("Unknown"),t.label=4;case 4:n,t.label=5;case 5:return[2]}})})},e$jscomp$1}(),Hi=function(){function t$jscomp$0(t,
e,n,r){this.user=t;this.batchId=e;this.state=n;this.error=r}return t$jscomp$0.Du=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new x(i.error.code,i.error.message)),o?new t$jscomp$0(e,n,i.state,s):(f$jscomp$0("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},
t$jscomp$0.prototype.Cu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t$jscomp$0}(),Ki=function(){function t$jscomp$0(t,e,n){this.targetId=t;this.state=e;this.error=n}return t$jscomp$0.Du=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==
typeof r.error.message&&"string"==typeof r.error.code)&&(o=new x(r.error.code,r.error.message)),i?new t$jscomp$0(e,r.state,o):(f$jscomp$0("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t$jscomp$0.prototype.Cu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t$jscomp$0}(),Yi=function(){function t$jscomp$0(t,e){this.clientId=t;this.activeTargetIds=e}return t$jscomp$0.Du=
function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ft,s=0;i&&s<r.activeTargetIds.length;++s)i=M(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t$jscomp$0(e,o):(f$jscomp$0("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t$jscomp$0}(),Zi=function(){function t$jscomp$0(t,e){this.clientId=t;this.onlineState=e}return t$jscomp$0.Du=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown",
"Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t$jscomp$0(n.clientId,n.onlineState):(f$jscomp$0("SharedClientState","Failed to parse online state: "+e),null)},t$jscomp$0}(),Xi=function(){function t$jscomp$0(){this.activeTargetIds=ft}return t$jscomp$0.prototype.Nu=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t$jscomp$0.prototype.Fu=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t$jscomp$0.prototype.Cu=function(){var t={activeTargetIds:this.activeTargetIds.N(),
updateTimeMs:Date.now()};return JSON.stringify(t)},t$jscomp$0}(),$i=function(){function e$jscomp$2(t,e,n,r,i){this.window=t;this.Is=e;this.persistenceKey=n;this.ku=r;this.fs=this.Da=this.fu=null;this.$u=this.xu.bind(this);this.Ou=new $(w);this.tr=!1;this.Mu=[];t=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26");this.storage=this.window.localStorage;this.currentUser=i;this.Lu="firestore_clients_"+this.persistenceKey+"_"+this.ku;this.qu="firestore_sequence_number_"+this.persistenceKey;this.Ou=this.Ou.st(this.ku,
new Xi);this.Bu=new RegExp("^firestore_clients_"+t+"_([^_]*)$");this.Uu=new RegExp("^firestore_mutations_"+t+"_(\\d+)(?:_(.*))?$");this.Qu=new RegExp("^firestore_targets_"+t+"_(\\d+)$");this.Wu="firestore_online_state_"+this.persistenceKey;this.window.addEventListener("storage",this.$u)}return e$jscomp$2.ks=function(t){return!(!t||!t.localStorage)},e$jscomp$2.prototype.start=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,u,a,c,h,f,l=this;return t$jscomp$4.__generator(this,
function(t){switch(t.label){case 0:return[4,this.fu.rh()];case 1:e=t.sent();n=0;for(r=e;n<r.length;n++)(i=r[n])!==this.ku&&(o=this.getItem("firestore_clients_"+this.persistenceKey+"_"+i))&&(s=Yi.Du(i,o))&&(this.Ou=this.Ou.st(s.clientId,s));this.ju();(u=this.storage.getItem(this.Wu))&&(a=this.Ku(u))&&this.Gu(a);c=0;for(h=this.Mu;c<h.length;c++)f=h[c],this.xu(f);return this.Mu=[],this.window.addEventListener("unload",function(){return l.th()}),this.tr=!0,[2]}})})},e$jscomp$2.prototype.Ts=function(t){this.setItem(this.qu,
JSON.stringify(t))},e$jscomp$2.prototype.zu=function(){return this.Hu(this.Ou)},e$jscomp$2.prototype.Yu=function(t){var e=!1;return this.Ou.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},e$jscomp$2.prototype.Ju=function(t){this.Xu(t,"pending")},e$jscomp$2.prototype.Zu=function(t,e,n){this.Xu(t,e,n);this.tc(t)},e$jscomp$2.prototype.ec=function(t){var e="not-current";if(this.Yu(t)){var n=this.storage.getItem(Wi(this.persistenceKey,t));n&&(n=Ki.Du(t,n))&&(e=n.state)}return this.nc.Nu(t),
this.ju(),e},e$jscomp$2.prototype.sc=function(t){this.nc.Fu(t);this.ju()},e$jscomp$2.prototype.ic=function(t){return this.nc.activeTargetIds.has(t)},e$jscomp$2.prototype.rc=function(t){this.removeItem(Wi(this.persistenceKey,t))},e$jscomp$2.prototype.oc=function(t,e,n){this.hc(t,e,n)},e$jscomp$2.prototype.ac=function(t$jscomp$0,e,n){var r=this;e.forEach(function(t){r.tc(t)});this.currentUser=t$jscomp$0;n.forEach(function(t){r.Ju(t)})},e$jscomp$2.prototype.uc=function(t){this.cc(t)},e$jscomp$2.prototype.th=
function(){this.tr&&(this.window.removeEventListener("storage",this.$u),this.removeItem(this.Lu),this.tr=!1)},e$jscomp$2.prototype.getItem=function(t){var e=this.storage.getItem(t);return h$jscomp$0("SharedClientState","READ",t,e),e},e$jscomp$2.prototype.setItem=function(t,e){h$jscomp$0("SharedClientState","SET",t,e);this.storage.setItem(t,e)},e$jscomp$2.prototype.removeItem=function(t){h$jscomp$0("SharedClientState","REMOVE",t);this.storage.removeItem(t)},e$jscomp$2.prototype.xu=function(e$jscomp$1){var n$jscomp$1=
this;if(e$jscomp$1.storageArea===this.storage){if(h$jscomp$0("SharedClientState","EVENT",e$jscomp$1.key,e$jscomp$1.newValue),e$jscomp$1.key===this.Lu)return void f$jscomp$0("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Is.gi(function(){return t$jscomp$4.__awaiter(n$jscomp$1,void 0,void 0,function(){var e$jscomp$0,n$jscomp$0,i,o,s,u;return t$jscomp$4.__generator(this,function(t){if(this.tr){if(null!==e$jscomp$1.key)if(this.Bu.test(e$jscomp$1.key)){if(null==
e$jscomp$1.newValue)return e$jscomp$0=this.lc(e$jscomp$1.key),[2,this._c(e$jscomp$0,null)];if(n$jscomp$0=this.fc(e$jscomp$1.key,e$jscomp$1.newValue))return[2,this._c(n$jscomp$0.clientId,n$jscomp$0)]}else if(this.Uu.test(e$jscomp$1.key)){if(null!==e$jscomp$1.newValue&&(i=this.dc(e$jscomp$1.key,e$jscomp$1.newValue)))return[2,this.wc(i)]}else if(this.Qu.test(e$jscomp$1.key)){if(null!==e$jscomp$1.newValue&&(o=this.Tc(e$jscomp$1.key,e$jscomp$1.newValue)))return[2,this.Ec(o)]}else if(e$jscomp$1.key===this.Wu){if(null!==
e$jscomp$1.newValue&&(s=this.Ku(e$jscomp$1.newValue)))return[2,this.Gu(s)]}else{if(t=e$jscomp$1.key===this.qu){t=e$jscomp$1.newValue;var e=Wn.Es;if(null!=t)try{var n=JSON.parse(t);"number"==typeof n||d$jscomp$0();e=n}catch(t$28){f$jscomp$0("SharedClientState","Failed to read sequence number from WebStorage",t$28)}t=(u=e)!==Wn.Es}t&&this.fs(u)}}else this.Mu.push(e$jscomp$1);return[2]})})})}},Object.defineProperty(e$jscomp$2.prototype,"nc",{get:function(){return this.Ou.get(this.ku)},enumerable:!1,
configurable:!0}),e$jscomp$2.prototype.ju=function(){this.setItem(this.Lu,this.nc.Cu())},e$jscomp$2.prototype.Xu=function(t,e,n){e=new Hi(this.currentUser,t,e,n);t=Qi(this.persistenceKey,this.currentUser,t);this.setItem(t,e.Cu())},e$jscomp$2.prototype.tc=function(t){t=Qi(this.persistenceKey,this.currentUser,t);this.removeItem(t)},e$jscomp$2.prototype.cc=function(t){this.storage.setItem(this.Wu,JSON.stringify({clientId:this.ku,onlineState:t}))},e$jscomp$2.prototype.hc=function(t,e,n){var r=Wi(this.persistenceKey,
t);t=new Ki(t,e,n);this.setItem(r,t.Cu())},e$jscomp$2.prototype.lc=function(t){return(t=this.Bu.exec(t))?t[1]:null},e$jscomp$2.prototype.fc=function(t,e){t=this.lc(t);return Yi.Du(t,e)},e$jscomp$2.prototype.dc=function(t,e){t=this.Uu.exec(t);var r=Number(t[1]);return Hi.Du(new Ri(void 0!==t[2]?t[2]:null),r,e)},e$jscomp$2.prototype.Tc=function(t,e){t=this.Qu.exec(t);return Ki.Du(Number(t[1]),e)},e$jscomp$2.prototype.Ku=function(t){return Zi.Du(t)},e$jscomp$2.prototype.wc=function(e){return t$jscomp$4.__awaiter(this,
void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.fu.Ic(e.batchId,e.state,e.error)]:(h$jscomp$0("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},e$jscomp$2.prototype.Ec=function(t){return this.fu.mc(t.targetId,t.state,t.error)},e$jscomp$2.prototype._c=function(t$jscomp$0,e){var n=this,r=e?this.Ou.st(t$jscomp$0,e):this.Ou.remove(t$jscomp$0),i=this.Hu(this.Ou),o=this.Hu(r),s=[],u=[];return o.forEach(function(t){i.has(t)||
s.push(t)}),i.forEach(function(t){o.has(t)||u.push(t)}),this.fu.Ac(s,u).then(function(){n.Ou=r})},e$jscomp$2.prototype.Gu=function(t){this.Ou.get(t.clientId)&&this.Da(t.onlineState)},e$jscomp$2.prototype.Hu=function(t$jscomp$0){var e=ft;return t$jscomp$0.forEach(function(t,n){e=e.Nt(n.activeTargetIds)}),e},e$jscomp$2}(),Ji=function(){function t$jscomp$0(){this.Rc=new Xi;this.Pc={};this.fs=this.Da=null}return t$jscomp$0.prototype.Ju=function(t){},t$jscomp$0.prototype.Zu=function(t,e,n){},t$jscomp$0.prototype.ec=
function(t){return this.Rc.Nu(t),this.Pc[t]||"not-current"},t$jscomp$0.prototype.oc=function(t,e,n){this.Pc[t]=e},t$jscomp$0.prototype.sc=function(t){this.Rc.Fu(t)},t$jscomp$0.prototype.ic=function(t){return this.Rc.activeTargetIds.has(t)},t$jscomp$0.prototype.rc=function(t){delete this.Pc[t]},t$jscomp$0.prototype.zu=function(){return this.Rc.activeTargetIds},t$jscomp$0.prototype.Yu=function(t){return this.Rc.activeTargetIds.has(t)},t$jscomp$0.prototype.start=function(){return this.Rc=new Xi,Promise.resolve()},
t$jscomp$0.prototype.ac=function(t,e,n){},t$jscomp$0.prototype.uc=function(t){},t$jscomp$0.prototype.th=function(){},t$jscomp$0.prototype.Ts=function(t){},t$jscomp$0}(),to=function(t){this.key=t},eo=function(t){this.key=t},no=function(){function t$jscomp$3(t,e){this.query=t;this.gc=e;this.Vc=null;this.Yt=!1;this.yc=ht();this.qt=ht();this.pc=_n(t);this.bc=new pt(this.pc)}return Object.defineProperty(t$jscomp$3.prototype,"vc",{get:function(){return this.gc},enumerable:!1,configurable:!0}),t$jscomp$3.prototype.Sc=
function(t$jscomp$0,e$jscomp$0){var n=this,r=e$jscomp$0?e$jscomp$0.Dc:new dt,i=e$jscomp$0?e$jscomp$0.bc:this.bc,o=e$jscomp$0?e$jscomp$0.qt:this.qt,s=i,u=!1,a=this.query.an()&&i.size===this.query.limit?i.last():null,c=this.query.un()&&i.size===this.query.limit?i.first():null;if(t$jscomp$0.ht(function(t,e){var h=i.get(t);(e=e instanceof rn?e:null)&&(e=bn(n.query,e)?e:null);var l=!!h&&n.qt.has(h.key),p=!!e&&(e.Ge||n.qt.has(e.key)&&e.hasCommittedMutations),d=!1;h&&e?h.data().isEqual(e.data())?l!==p&&
(r.track({type:3,doc:e}),d=!0):n.Cc(h,e)||(r.track({type:2,doc:e}),d=!0,(a&&0<n.pc(e,a)||c&&0>n.pc(e,c))&&(u=!0)):!h&&e?(r.track({type:0,doc:e}),d=!0):h&&!e&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0));d&&(e?(s=s.add(e),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),this.query.an()||this.query.un())for(;s.size>this.query.limit;)t$jscomp$0=this.query.an()?s.last():s.first(),s=s.delete(t$jscomp$0.key),o=o.delete(t$jscomp$0.key),r.track({type:1,doc:t$jscomp$0});return{bc:s,Dc:r,Nc:u,qt:o}},
t$jscomp$3.prototype.Cc=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},t$jscomp$3.prototype.Un=function(t$jscomp$2,e$jscomp$1,n$jscomp$0){var r=this,i=this.bc;this.bc=t$jscomp$2.bc;this.qt=t$jscomp$2.qt;var o=t$jscomp$2.Dc.Mt();o.sort(function(t$jscomp$1,e$jscomp$0){return function(t$jscomp$0,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return d$jscomp$0()}};return n(t$jscomp$0)-n(e)}(t$jscomp$1.type,e$jscomp$0.type)||r.pc(t$jscomp$1.doc,
e$jscomp$0.doc)});this.Fc(n$jscomp$0);e$jscomp$1=e$jscomp$1?this.kc():[];n$jscomp$0=0===this.yc.size&&this.Yt?1:0;var a=n$jscomp$0!==this.Vc;return this.Vc=n$jscomp$0,0!==o.length||a?{snapshot:new yt(this.query,t$jscomp$2.bc,i,o,t$jscomp$2.qt,0===n$jscomp$0,a,!1),$c:e$jscomp$1}:{$c:e$jscomp$1}},t$jscomp$3.prototype.xc=function(t){return this.Yt&&"Offline"===t?(this.Yt=!1,this.Un({bc:this.bc,Dc:new dt,qt:this.qt,Nc:!1},!1)):{$c:[]}},t$jscomp$3.prototype.Oc=function(t){return!this.gc.has(t)&&!!this.bc.has(t)&&
!this.bc.get(t).Ge},t$jscomp$3.prototype.Fc=function(t$jscomp$0){var e=this;t$jscomp$0&&(t$jscomp$0.Jt.forEach(function(t){return e.gc=e.gc.add(t)}),t$jscomp$0.Xt.forEach(function(t){}),t$jscomp$0.Zt.forEach(function(t){return e.gc=e.gc.delete(t)}),this.Yt=t$jscomp$0.Yt)},t$jscomp$3.prototype.kc=function(){var t$jscomp$0=this;if(!this.Yt)return[];var e$jscomp$0=this.yc;this.yc=ht();this.bc.forEach(function(e){t$jscomp$0.Oc(e.key)&&(t$jscomp$0.yc=t$jscomp$0.yc.add(e.key))});var n=[];return e$jscomp$0.forEach(function(e){t$jscomp$0.yc.has(e)||
n.push(new eo(e))}),this.yc.forEach(function(t){e$jscomp$0.has(t)||n.push(new to(t))}),n},t$jscomp$3.prototype.Mc=function(t){this.gc=t.gh;this.yc=ht();t=this.Sc(t.documents);return this.Un(t,!0)},t$jscomp$3.prototype.Lc=function(){return yt.Qt(this.query,this.bc,this.qt,0===this.Vc)},t$jscomp$3}(),ro=function(t,e,n){this.query=t;this.targetId=e;this.view=n},io=function(t){this.key=t;this.qc=!1},oo=function(){function e$jscomp$2(t$jscomp$0,e,n,r,i,o){this.La=t$jscomp$0;this.Bc=e;this.qa=n;this.Uc=
r;this.currentUser=i;this.Qc=o;this.Wc=null;this.jc=new S(function(t){return mn(t)},gn);this.Kc=new Map;this.Gc=[];this.zc=new $(U.P);this.Hc=new Map;this.Yc=new ki;this.Jc={};this.Xc=new Map;this.Zc=ui.eo();this.onlineState="Unknown";this.tl=void 0}return Object.defineProperty(e$jscomp$2.prototype,"el",{get:function(){return!0===this.tl},enumerable:!1,configurable:!0}),e$jscomp$2.prototype.subscribe=function(t){this.Wc=t},e$jscomp$2.prototype.listen=function(e){return t$jscomp$4.__awaiter(this,void 0,
void 0,function(){var n,r,i,o,s;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return this.nl("listen()"),(i=this.jc.get(e))?(n=i.targetId,this.Uc.ec(n),r=i.view.Lc(),[3,4]):[3,1];case 1:return[4,Ni(this.La,pn(e))];case 2:return o=t.sent(),s=this.Uc.ec(o.targetId),n=o.targetId,[4,this.sl(e,n,"current"===s)];case 3:r=t.sent(),this.el&&this.Bc.listen(o),t.label=4;case 4:return[2,r]}})})},e$jscomp$2.prototype.sl=function(e,n,r){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var i,
o,s,u,a,c;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return[4,Si(this.La,e,!0)];case 1:return i=t.sent(),o=new no(e,i.gh),s=o.Sc(i.documents),u=gt.Ht(n,r&&"Offline"!==this.onlineState),a=o.Un(s,this.el,u),this.il(n,a.$c),c=new ro(e,n,o),[2,(this.jc.set(e,c),this.Kc.has(n)?this.Kc.get(n).push(e):this.Kc.set(n,[e]),a.snapshot)]}})})},e$jscomp$2.prototype.lu=function(e){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var n,r,i=this;return t$jscomp$4.__generator(this,
function(t$jscomp$0){switch(t$jscomp$0.label){case 0:return this.nl("unlisten()"),n=this.jc.get(e),1<(r=this.Kc.get(n.targetId)).length?[2,(this.Kc.set(n.targetId,r.filter(function(t){return!gn(t,e)})),void this.jc.delete(e))]:this.el?(this.Uc.sc(n.targetId),this.Uc.Yu(n.targetId)?[3,2]:[4,Ai(this.La,n.targetId,!1).then(function(){i.Uc.rc(n.targetId);i.Bc.lu(n.targetId);i.rl(n.targetId)}).catch(xi)]):[3,3];case 1:t$jscomp$0.sent(),t$jscomp$0.label=2;case 2:return[3,5];case 3:return this.rl(n.targetId),
[4,Ai(this.La,n.targetId,!0)];case 4:t$jscomp$0.sent(),t$jscomp$0.label=5;case 5:return[2]}})})},e$jscomp$2.prototype.write=function(e$jscomp$1,n$jscomp$1){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r$jscomp$0,i$jscomp$1,o$jscomp$2;return t$jscomp$4.__generator(this,function(t$jscomp$1){switch(t$jscomp$1.label){case 0:this.nl("write()"),t$jscomp$1.label=1;case 1:return t$jscomp$1.trys.push([1,5,,6]),[4,function(t$jscomp$0,e$jscomp$0){var n$jscomp$0,i$jscomp$0=k.now(),o$jscomp$1=
e$jscomp$0.reduce(function(t,e){return t.add(e.key)},ht());return t$jscomp$0.persistence.runTransaction("Locally write mutations","readwrite",function(t){return t$jscomp$0.Rh.Zn(t,o$jscomp$1).next(function(o$jscomp$0){n$jscomp$0=o$jscomp$0;o$jscomp$0=[];for(var u=0;u<e$jscomp$0.length;u++){var c=e$jscomp$0[u];var h=n$jscomp$0.get(c.key);if(c instanceof Ke){for(var n=null,r=0,i=c.fieldTransforms;r<i.length;r++){var o=i[r],s=h instanceof rn?h.field(o.field):void 0;s=Ne(o.transform,s||null);null!=s&&
(n=null==n?(new tn).set(o.field,s):n.set(o.field,s))}h=n?n.ze():null}else h=null;null!=h&&o$jscomp$0.push(new We(c.key,h,en(h.proto.mapValue),Ce.exists(!0)))}return t$jscomp$0.Gn.mr(t,i$jscomp$0,o$jscomp$0,e$jscomp$0)})}).then(function(t){var e=t.An(n$jscomp$0);return{batchId:t.batchId,Fn:e}})}(this.La,e$jscomp$1)];case 2:return r$jscomp$0=t$jscomp$1.sent(),this.Uc.Ju(r$jscomp$0.batchId),this.ol(r$jscomp$0.batchId,n$jscomp$1),[4,this.hl(r$jscomp$0.Fn)];case 3:return t$jscomp$1.sent(),[4,this.Bc.hu()];
case 4:return t$jscomp$1.sent(),[3,6];case 5:return i$jscomp$1=t$jscomp$1.sent(),o$jscomp$2=ar(i$jscomp$1,"Failed to persist write"),n$jscomp$1.reject(o$jscomp$2),[3,6];case 6:return[2]}})})},e$jscomp$2.prototype.Iu=function(e$jscomp$0){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var n,r=this;return t$jscomp$4.__generator(this,function(t$jscomp$0){switch(t$jscomp$0.label){case 0:this.nl("applyRemoteEvent()"),t$jscomp$0.label=1;case 1:return t$jscomp$0.trys.push([1,4,,6]),[4,Ei(this.La,
e$jscomp$0)];case 2:return n=t$jscomp$0.sent(),e$jscomp$0.Wt.forEach(function(t,e){if(e=r.Hc.get(e))1>=t.Jt.size+t.Xt.size+t.Zt.size||d$jscomp$0(),0<t.Jt.size?e.qc=!0:0<t.Xt.size?e.qc||d$jscomp$0():0<t.Zt.size&&(e.qc||d$jscomp$0(),e.qc=!1)}),[4,this.hl(n,e$jscomp$0)];case 3:return t$jscomp$0.sent(),[3,6];case 4:return[4,xi(t$jscomp$0.sent())];case 5:return t$jscomp$0.sent(),[3,6];case 6:return[2]}})})},e$jscomp$2.prototype.xc=function(t,e$jscomp$0){if(this.el&&0===e$jscomp$0||!this.el&&1===e$jscomp$0){this.nl("applyOnlineStateChange()");
var n=[];this.jc.forEach(function(e,r){e=r.view.xc(t);e.snapshot&&n.push(e.snapshot)});this.Wc.al(t);this.Wc.Ea(n);this.onlineState=t;this.el&&this.Uc.uc(t)}},e$jscomp$2.prototype.mu=function(e,n){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r,i,o,s,u,a=this;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return this.nl("rejectListens()"),this.Uc.oc(e,"rejected",n),r=this.Hc.get(e),(i=r&&r.key)?(o=(o=new $(U.P)).st(i,new on(i,L.min())),s=ht().add(i),u=new vt(L.min(),
new Map,new et(w),o,s),[4,this.Iu(u)]):[3,2];case 1:return t.sent(),this.zc=this.zc.remove(i),this.Hc.delete(e),this.ul(),[3,4];case 2:return[4,Ai(this.La,e,!1).then(function(){return a.rl(e,n)}).catch(xi)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},e$jscomp$2.prototype.yu=function(e){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var n,r;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:this.nl("applySuccessfulWrite()"),n=e.batch.batchId,t.label=1;case 1:return t.trys.push([1,
4,,6]),[4,_i(this.La,e)];case 2:return r=t.sent(),this.cl(n,null),this.ll(n),this.Uc.Zu(n,"acknowledged"),[4,this.hl(r)];case 3:return t.sent(),[3,6];case 4:return[4,xi(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},e$jscomp$2.prototype.bu=function(e$jscomp$1,n){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r$jscomp$0;return t$jscomp$4.__generator(this,function(t$jscomp$1){switch(t$jscomp$1.label){case 0:this.nl("rejectFailedWrite()"),t$jscomp$1.label=1;case 1:return t$jscomp$1.trys.push([1,
4,,6]),[4,function(t$jscomp$0,e$jscomp$0){return t$jscomp$0.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return t$jscomp$0.Gn.Rr(t,e$jscomp$0).next(function(e){null!==e||d$jscomp$0();return r=e.keys(),t$jscomp$0.Gn.br(t,e)}).next(function(){return t$jscomp$0.Gn.Cr(t)}).next(function(){return t$jscomp$0.Rh.Zn(t,r)})})}(this.La,e$jscomp$1)];case 2:return r$jscomp$0=t$jscomp$1.sent(),this.cl(e$jscomp$1,n),this.ll(e$jscomp$1),this.Uc.Zu(e$jscomp$1,"rejected",n),[4,this.hl(r$jscomp$0)];
case 3:return t$jscomp$1.sent(),[3,6];case 4:return[4,xi(t$jscomp$1.sent())];case 5:return t$jscomp$1.sent(),[3,6];case 6:return[2]}})})},e$jscomp$2.prototype._l=function(e){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var n,r,i,o;return t$jscomp$4.__generator(this,function(t$jscomp$1){switch(t$jscomp$1.label){case 0:this.Bc.Ga()||h$jscomp$0("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t$jscomp$1.label=
1;case 1:return t$jscomp$1.trys.push([1,3,,4]),[4,function(t$jscomp$0){return t$jscomp$0.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return t$jscomp$0.Gn.Vr(t)})}(this.La)];case 2:return-1===(n=t$jscomp$1.sent())?[2,void e.resolve()]:((r=this.Xc.get(n)||[]).push(e),this.Xc.set(n,r),[3,4]);case 3:return i=t$jscomp$1.sent(),o=ar(i,"Initialization of waitForPendingWrites() operation failed"),e.reject(o),[3,4];case 4:return[2]}})})},e$jscomp$2.prototype.ll=
function(t$jscomp$0){(this.Xc.get(t$jscomp$0)||[]).forEach(function(t){t.resolve()});this.Xc.delete(t$jscomp$0)},e$jscomp$2.prototype.fl=function(t){this.Xc.forEach(function(e$jscomp$0){e$jscomp$0.forEach(function(e){e.reject(new x(D.CANCELLED,t))})});this.Xc.clear()},e$jscomp$2.prototype.ol=function(t,e){var n=this.Jc[this.currentUser.$h()];n||(n=new $(w));n=n.st(t,e);this.Jc[this.currentUser.$h()]=n},e$jscomp$2.prototype.cl=function(t,e){var n=this.Jc[this.currentUser.$h()];if(n){var r=n.get(t);
r&&(e?r.reject(e):r.resolve(),n=n.remove(t));this.Jc[this.currentUser.$h()]=n}},e$jscomp$2.prototype.rl=function(t$jscomp$0,e){var n=this;void 0===e&&(e=null);this.Uc.sc(t$jscomp$0);for(var r=0,i=this.Kc.get(t$jscomp$0);r<i.length;r++){var o=i[r];this.jc.delete(o);e&&this.Wc.dl(o,e)}this.Kc.delete(t$jscomp$0);this.el&&this.Yc.Ch(t$jscomp$0).forEach(function(t){n.Yc.Nr(t)||n.wl(t)})},e$jscomp$2.prototype.wl=function(t){var e=this.zc.get(t);null!==e&&(this.Bc.lu(e),this.zc=this.zc.remove(t),this.Hc.delete(e),
this.ul())},e$jscomp$2.prototype.il=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i instanceof to?(this.Yc.Eo(i.key,t),this.Tl(i)):i instanceof eo?(h$jscomp$0("SyncEngine","Document no longer in limbo: "+i.key),this.Yc.mo(i.key,t),this.Yc.Nr(i.key)||this.wl(i.key)):d$jscomp$0()}},e$jscomp$2.prototype.Tl=function(t){t=t.key;this.zc.get(t)||(h$jscomp$0("SyncEngine","New document in limbo: "+t),this.Gc.push(t),this.ul())},e$jscomp$2.prototype.ul=function(){for(;0<this.Gc.length&&this.zc.size<
this.Qc;){var t=this.Gc.shift(),e=this.Zc.next();this.Hc.set(e,new io(t));this.zc=this.zc.st(t,e);this.Bc.listen(new K(pn(new an(t.path)),e,2,Wn.Es))}},e$jscomp$2.prototype.El=function(){return this.zc},e$jscomp$2.prototype.Il=function(){return this.Gc},e$jscomp$2.prototype.hl=function(e$jscomp$1,n$jscomp$1){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r$jscomp$0,i$jscomp$0,o$jscomp$0,s$jscomp$0=this;return t$jscomp$4.__generator(this,function(u$jscomp$0){switch(u$jscomp$0.label){case 0:return r$jscomp$0=
[],i$jscomp$0=[],o$jscomp$0=[],this.jc.forEach(function(t$jscomp$0,u){o$jscomp$0.push(Promise.resolve().then(function(){var t=u.view.Sc(e$jscomp$1);return t.Nc?Si(s$jscomp$0.La,u.query,!1).then(function(e){return u.view.Sc(e.documents,t)}):t}).then(function(t){var e=n$jscomp$1&&n$jscomp$1.Wt.get(u.targetId);t=u.view.Un(t,s$jscomp$0.el,e);if(s$jscomp$0.il(u.targetId,t.$c),t.snapshot)s$jscomp$0.el&&s$jscomp$0.Uc.oc(u.targetId,t.snapshot.fromCache?"not-current":"current"),r$jscomp$0.push(t.snapshot),
t=Qn._s(u.targetId,t.snapshot),i$jscomp$0.push(t)}))}),[4,Promise.all(o$jscomp$0)];case 1:return u$jscomp$0.sent(),this.Wc.Ea(r$jscomp$0),[4,function(e$jscomp$0,n$jscomp$0){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r,i,o,s,u,a,c,f,l;return t$jscomp$4.__generator(this,function(t$jscomp$0){switch(t$jscomp$0.label){case 0:r=e$jscomp$0,t$jscomp$0.label=1;case 1:return t$jscomp$0.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Fn.forEach(n$jscomp$0,
function(e){return Fn.forEach(e.cs,function(n){return r.persistence.dr.Eo(t,e.targetId,n)}).next(function(){return Fn.forEach(e.ls,function(n){return r.persistence.dr.mo(t,e.targetId,n)})})})})];case 2:return t$jscomp$0.sent(),[3,4];case 3:if(!$n(i=t$jscomp$0.sent()))throw i;return h$jscomp$0("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:o=0;for(s=n$jscomp$0;o<s.length;o++)u=s[o],a=u.targetId,u.fromCache||(c=r.Eh.get(a),f=c.Z,l=c.nt(f),r.Eh=r.Eh.st(a,l));return[2]}})})}(this.La,
i$jscomp$0)];case 2:return u$jscomp$0.sent(),[2]}})})},e$jscomp$2.prototype.nl=function(t){},e$jscomp$2.prototype.vu=function(e$jscomp$1){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var n$jscomp$1;return t$jscomp$4.__generator(this,function(r$jscomp$1){switch(r$jscomp$1.label){case 0:return this.currentUser.isEqual(e$jscomp$1)?[3,3]:(h$jscomp$0("SyncEngine","User change. New user:",e$jscomp$1.$h()),[4,function(e$jscomp$0,n$jscomp$0){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r$jscomp$0,
i$jscomp$0,o,s$jscomp$0;return t$jscomp$4.__generator(this,function(t$jscomp$1){switch(t$jscomp$1.label){case 0:return r$jscomp$0=e$jscomp$0,i$jscomp$0=r$jscomp$0.Gn,o=r$jscomp$0.Rh,[4,r$jscomp$0.persistence.runTransaction("Handle user change","readonly",function(t$jscomp$0){var e;return r$jscomp$0.Gn.yr(t$jscomp$0).next(function(s){return e=s,i$jscomp$0=r$jscomp$0.persistence.oh(n$jscomp$0),o=new zn(r$jscomp$0.Ah,i$jscomp$0,r$jscomp$0.persistence.uh()),i$jscomp$0.yr(t$jscomp$0)}).next(function(n){for(var r=
[],i=[],s=ht(),u=0,a=e;u<a.length;u++){var c=a[u];r.push(c.batchId);var h=0;for(c=c.mutations;h<c.length;h++)s=s.add(c[h].key)}for(u=0;u<n.length;u++)for(h=n[u],i.push(h.batchId),a=0,h=h.mutations;a<h.length;a++)s=s.add(h[a].key);return o.Zn(t$jscomp$0,s).next(function(t){return{ml:t,Al:r,Rl:i}})})})];case 1:return s$jscomp$0=t$jscomp$1.sent(),[2,(r$jscomp$0.Gn=i$jscomp$0,r$jscomp$0.Rh=o,r$jscomp$0.Th.Ph(r$jscomp$0.Rh),s$jscomp$0)]}})})}(this.La,e$jscomp$1)]);case 1:return n$jscomp$1=r$jscomp$1.sent(),
this.currentUser=e$jscomp$1,this.fl("'waitForPendingWrites' promise is rejected due to a user change."),this.Uc.ac(e$jscomp$1,n$jscomp$1.Al,n$jscomp$1.Rl),[4,this.hl(n$jscomp$1.ml)];case 2:r$jscomp$1.sent(),r$jscomp$1.label=3;case 3:return[2]}})})},e$jscomp$2.prototype.Oe=function(t){var e=this.Hc.get(t);if(e&&e.qc)return ht().add(e.key);e=ht();t=this.Kc.get(t);if(!t)return e;for(var i=0;i<t.length;i++){var u=this.jc.get(t[i]);e=e.Nt(u.view.vc)}return e},e$jscomp$2}(),yo=function(){this.Pl=void 0;
this.listeners=[]},vo=function(){function e$jscomp$0(t$jscomp$0){this.fu=t$jscomp$0;this.gl=new S(function(t){return mn(t)},gn);this.onlineState="Unknown";this.Vl=new Set;this.fu.subscribe(this)}return e$jscomp$0.prototype.listen=function(e){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,u;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:if(n=e.query,r=!1,(i=this.gl.get(n))||(r=!0,i=new yo),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),
o=i,[4,this.fu.listen(n)];case 2:return o.Pl=t.sent(),[3,4];case 3:return s=t.sent(),u=ar(s,"Initialization of query '"+wn(e.query)+"' failed"),[2,void e.onError(u)];case 4:return this.gl.set(n,i),i.listeners.push(e),e.xc(this.onlineState),i.Pl&&e.yl(i.Pl)&&this.pl(),[2]}})})},e$jscomp$0.prototype.lu=function(e){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var n,r,i,o;return t$jscomp$4.__generator(this,function(t){return n=e.query,r=!1,(i=this.gl.get(n))&&0<=(o=i.listeners.indexOf(e))&&
(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(this.gl.delete(n),this.fu.lu(n))]:[2]})})},e$jscomp$0.prototype.Ea=function(t){for(var e=!1,n=0;n<t.length;n++){var i=t[n],s=this.gl.get(i.query);if(s){for(var u=0,a=s.listeners;u<a.length;u++)a[u].yl(i)&&(e=!0);s.Pl=i}}e&&this.pl()},e$jscomp$0.prototype.dl=function(t,e){var n=this.gl.get(t);if(n){var r=0;for(n=n.listeners;r<n.length;r++)n[r].onError(e)}this.gl.delete(t)},e$jscomp$0.prototype.al=function(t){this.onlineState=t;var e=!1;this.gl.forEach(function(n,
r){n=0;for(r=r.listeners;n<r.length;n++)r[n].xc(t)&&(e=!0)});e&&this.pl()},e$jscomp$0.prototype.bl=function(t){this.Vl.add(t);t.next()},e$jscomp$0.prototype.vl=function(t){this.Vl.delete(t)},e$jscomp$0.prototype.pl=function(){this.Vl.forEach(function(t){t.next()})},e$jscomp$0}(),go=function(){function t$jscomp$0(t,e,n){this.query=t;this.Sl=e;this.Dl=!1;this.Cl=null;this.onlineState="Unknown";this.options=n||{}}return t$jscomp$0.prototype.yl=function(t){if(!this.options.includeMetadataChanges){for(var e=
[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new yt(t.query,t.docs,t.Lt,e,t.qt,t.fromCache,t.Bt,!0)}e=!1;return this.Dl?this.Nl(t)&&(this.Sl.next(t),e=!0):this.Fl(t,this.onlineState)&&(this.kl(t),e=!0),this.Cl=t,e},t$jscomp$0.prototype.onError=function(t){this.Sl.error(t)},t$jscomp$0.prototype.xc=function(t){this.onlineState=t;var e=!1;return this.Cl&&!this.Dl&&this.Fl(this.Cl,t)&&(this.kl(this.Cl),e=!0),e},t$jscomp$0.prototype.Fl=function(t,e){return t.fromCache?!(this.options.$l&&
"Offline"!==e||t.docs._()&&"Offline"!==e):!0},t$jscomp$0.prototype.Nl=function(t){if(0<t.docChanges.length)return!0;var e=this.Cl&&this.Cl.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},t$jscomp$0.prototype.kl=function(t){t=yt.Qt(t.query,t.docs,t.qt,t.fromCache);this.Dl=!0;this.Sl.next(t)},t$jscomp$0}(),mo=function(){function t$jscomp$1(){}return t$jscomp$1.prototype.Ph=function(t){this.xl=t},t$jscomp$1.prototype.ns=function(t$jscomp$0,e$jscomp$0,
r,i){var o=this;return e$jscomp$0.hn()||r.isEqual(L.min())?this.Ol(t$jscomp$0,e$jscomp$0):this.xl.Zn(t$jscomp$0,i).next(function(s){var u=o.Ml(e$jscomp$0,s);return(e$jscomp$0.an()||e$jscomp$0.un())&&o.Nc(e$jscomp$0.nn,u,i,r)?o.Ol(t$jscomp$0,e$jscomp$0):(a$jscomp$1.logLevel<=n$jscomp$2.LogLevel.DEBUG&&h$jscomp$0("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wn(e$jscomp$0)),o.xl.ns(t$jscomp$0,e$jscomp$0,r).next(function(t){return u.forEach(function(e){t=
t.st(e.key,e)}),t}))})},t$jscomp$1.prototype.Ml=function(t,e$jscomp$0){var n=new et(_n(t));return e$jscomp$0.forEach(function(e,r){r instanceof rn&&bn(t,r)&&(n=n.add(r))}),n},t$jscomp$1.prototype.Nc=function(t,e,n,r){if(n.size!==e.size)return!0;t="F"===t?e.last():e.first();return!!t&&(t.hasPendingWrites||0<t.version.o(r))},t$jscomp$1.prototype.Ol=function(t,e){return a$jscomp$1.logLevel<=n$jscomp$2.LogLevel.DEBUG&&h$jscomp$0("IndexFreeQueryEngine","Using full collection scan to execute query:",wn(e)),
this.xl.ns(t,e,L.min())},t$jscomp$1}(),wo=function(){function t$jscomp$2(t,e){this.zn=t;this.dr=e;this.Gn=[];this.Ll=1;this.ql=new et(Li.yh)}return t$jscomp$2.prototype.Ir=function(t){return Fn.resolve(0===this.Gn.length)},t$jscomp$2.prototype.mr=function(t,e,n,r){var i=this.Ll;this.Ll++;0<this.Gn.length&&this.Gn[this.Gn.length-1];e=new qn(i,e,n,r);this.Gn.push(e);for(n=0;n<r.length;n++){var a=r[n];this.ql=this.ql.add(new Li(a.key,i));this.zn.Ar(t,a.key.path.p())}return Fn.resolve(e)},t$jscomp$2.prototype.Rr=
function(t,e){return Fn.resolve(this.Bl(e))},t$jscomp$2.prototype.gr=function(t,e){t=this.Ul(e+1);t=0>t?0:t;return Fn.resolve(this.Gn.length>t?this.Gn[t]:null)},t$jscomp$2.prototype.Vr=function(){return Fn.resolve(0===this.Gn.length?-1:this.Ll-1)},t$jscomp$2.prototype.yr=function(t){return Fn.resolve(this.Gn.slice())},t$jscomp$2.prototype.Yn=function(t$jscomp$0,e){var n=this;t$jscomp$0=new Li(e,0);e=new Li(e,Number.POSITIVE_INFINITY);var o=[];return this.ql.St([t$jscomp$0,e],function(t){t=n.Bl(t.kh);
o.push(t)}),Fn.resolve(o)},t$jscomp$2.prototype.es=function(t$jscomp$1,e$jscomp$0){var n=this,r=new et(w);return e$jscomp$0.forEach(function(t$jscomp$0){var e=new Li(t$jscomp$0,0);t$jscomp$0=new Li(t$jscomp$0,Number.POSITIVE_INFINITY);n.ql.St([e,t$jscomp$0],function(t){r=r.add(t.kh)})}),Fn.resolve(this.Ql(r))},t$jscomp$2.prototype.as=function(t$jscomp$0,e$jscomp$0){var n=e$jscomp$0.path,r=n.length+1;t$jscomp$0=n;U.j(t$jscomp$0)||(t$jscomp$0=t$jscomp$0.child(""));t$jscomp$0=new Li(new U(t$jscomp$0),
0);var s=new et(w);return this.ql.Dt(function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(s=s.add(t.kh)),!0)},t$jscomp$0),Fn.resolve(this.Ql(s))},t$jscomp$2.prototype.Ql=function(t$jscomp$0){var e=this,n=[];return t$jscomp$0.forEach(function(t){t=e.Bl(t);null!==t&&n.push(t)}),n},t$jscomp$2.prototype.br=function(t,e){var n=this;y$jscomp$0(0===this.Wl(e.batchId,"removed"));this.Gn.shift();var r=this.ql;return Fn.forEach(e.mutations,function(i){var o=new Li(i.key,e.batchId);return r=r.delete(o),
n.dr.Dr(t,i.key)}).next(function(){n.ql=r})},t$jscomp$2.prototype.Sr=function(t){},t$jscomp$2.prototype.Nr=function(t,e){t=new Li(e,0);t=this.ql.Ct(t);return Fn.resolve(e.isEqual(t&&t.key))},t$jscomp$2.prototype.Cr=function(t){return this.Gn.length,Fn.resolve()},t$jscomp$2.prototype.Wl=function(t,e){return this.Ul(t)},t$jscomp$2.prototype.Ul=function(t){return 0===this.Gn.length?0:t-this.Gn[0].batchId},t$jscomp$2.prototype.Bl=function(t){t=this.Ul(t);return 0>t||t>=this.Gn.length?null:this.Gn[t]},
t$jscomp$2}(),bo=function(){function t$jscomp$1(t,e){this.zn=t;this.jl=e;this.docs=new $(U.P);this.size=0}return t$jscomp$1.prototype.xn=function(t,e,n){var r=e.key,i=this.docs.get(r);i=i?i.size:0;var s=this.jl(e);return this.docs=this.docs.st(r,{Or:e,size:s,readTime:n}),this.size+=s-i,this.zn.Ar(t,r.path.p())},t$jscomp$1.prototype.Mn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t$jscomp$1.prototype.Ln=function(t,e){t=this.docs.get(e);return Fn.resolve(t?
t.Or:null)},t$jscomp$1.prototype.getEntries=function(t$jscomp$0,e$jscomp$0){var n=this,r=rt;return e$jscomp$0.forEach(function(t){var e=n.docs.get(t);r=r.st(t,e?e.Or:null)}),Fn.resolve(r)},t$jscomp$1.prototype.ns=function(t,e,n){t=st;var i=new U(e.path.child(""));for(i=this.docs.ct(i);i.Tt();){var s=i.wt(),a=s.value,c=a.Or;a=a.readTime;if(!e.path.D(s.key.path))break;0>=a.o(n)||c instanceof rn&&bn(e,c)&&(t=t.st(c.key,c))}return Fn.resolve(t)},t$jscomp$1.prototype.Kl=function(t$jscomp$0,e){return Fn.forEach(this.docs,
function(t){return e(t)})},t$jscomp$1.prototype.jr=function(e){return new t$jscomp$1.Kr(this)},t$jscomp$1.prototype.zr=function(t){return Fn.resolve(this.size)},t$jscomp$1}();bo.Kr=function(e$jscomp$0){function n$jscomp$0(t){var n=this;return(n=e$jscomp$0.call(this)||this).Hr=t,n}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$0),n$jscomp$0.prototype.Un=function(t){var e=this,n=[];return this.Fn.forEach(function(r,i){i?n.push(e.Hr.xn(t,i,e.readTime)):e.Hr.Mn(r)}),Fn.Cn(n)},n$jscomp$0.prototype.qn=
function(t,e){return this.Hr.Ln(t,e)},n$jscomp$0.prototype.Bn=function(t,e){return this.Hr.getEntries(t,e)},n$jscomp$0}(Gn);var _o=function(){function t$jscomp$1(t$jscomp$0){this.persistence=t$jscomp$0;this.Gl=new S(function(t){return j(t)},B);this.lastRemoteSnapshotVersion=L.min();this.zl=this.highestTargetId=0;this.Hl=new ki;this.targetCount=0;this.Yl=ui.to()}return t$jscomp$1.prototype.be=function(t$jscomp$0,e){return this.Gl.forEach(function(t,n){return e(n)}),Fn.resolve()},t$jscomp$1.prototype.ro=
function(t){return Fn.resolve(this.lastRemoteSnapshotVersion)},t$jscomp$1.prototype.oo=function(t){return Fn.resolve(this.zl)},t$jscomp$1.prototype.no=function(t){return this.highestTargetId=this.Yl.next(),Fn.resolve(this.highestTargetId)},t$jscomp$1.prototype.ho=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zl&&(this.zl=e),Fn.resolve()},t$jscomp$1.prototype.uo=function(t){this.Gl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yl=new ui(e),this.highestTargetId=
e);t.sequenceNumber>this.zl&&(this.zl=t.sequenceNumber)},t$jscomp$1.prototype.ao=function(t,e){return this.uo(e),this.targetCount+=1,Fn.resolve()},t$jscomp$1.prototype.lo=function(t,e){return this.uo(e),Fn.resolve()},t$jscomp$1.prototype._o=function(t,e){return this.Gl.delete(e.target),this.Hl.Ch(e.targetId),--this.targetCount,Fn.resolve()},t$jscomp$1.prototype.hr=function(t,e,n){var r=this,i=0,o=[];return this.Gl.forEach(function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.Gl.delete(s),
o.push(r.fo(t,u.targetId)),i++)}),Fn.Cn(o).next(function(){return i})},t$jscomp$1.prototype.do=function(t){return Fn.resolve(this.targetCount)},t$jscomp$1.prototype.wo=function(t,e){t=this.Gl.get(e)||null;return Fn.resolve(t)},t$jscomp$1.prototype.To=function(t,e,n){return this.Hl.vh(e,n),Fn.resolve()},t$jscomp$1.prototype.Io=function(t,e$jscomp$0,n){this.Hl.Dh(e$jscomp$0,n);var r=this.persistence.dr,i=[];return r&&e$jscomp$0.forEach(function(e){i.push(r.Dr(t,e))}),Fn.Cn(i)},t$jscomp$1.prototype.fo=
function(t,e){return this.Hl.Ch(e),Fn.resolve()},t$jscomp$1.prototype.Ao=function(t,e){t=this.Hl.Fh(e);return Fn.resolve(t)},t$jscomp$1.prototype.Nr=function(t,e){return Fn.resolve(this.Hl.Nr(e))},t$jscomp$1}(),Io=function(){function t$jscomp$1(t$jscomp$0){var e=this;this.Jl={};this.yo=new Wn(0);this.po=!1;this.po=!0;this.dr=t$jscomp$0(this);this.ko=new _o(this);this.zn=new Fr;this.Kn=new bo(this.zn,function(t){return e.dr.Xl(t)})}return t$jscomp$1.prototype.start=function(){return Promise.resolve()},
t$jscomp$1.prototype.th=function(){return this.po=!1,Promise.resolve()},Object.defineProperty(t$jscomp$1.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),t$jscomp$1.prototype.Bo=function(){},t$jscomp$1.prototype.Uo=function(){},t$jscomp$1.prototype.uh=function(){return this.zn},t$jscomp$1.prototype.oh=function(t){var e=this.Jl[t.$h()];return e||(e=new wo(this.zn,this.dr),this.Jl[t.$h()]=e),e},t$jscomp$1.prototype.hh=function(){return this.ko},t$jscomp$1.prototype.ah=
function(){return this.Kn},t$jscomp$1.prototype.runTransaction=function(t$jscomp$0,e,n){var r=this;h$jscomp$0("MemoryPersistence","Starting transaction:",t$jscomp$0);var i=new Eo(this.yo.next());return this.dr.Zl(),n(i).next(function(t){return r.dr.t_(i).next(function(){return t})}).Sn().then(function(t){return i.jn(),t})},t$jscomp$1.prototype.e_=function(t,e){return Fn.Nn(Object.values(this.Jl).map(function(n){return function(){return n.Nr(t,e)}}))},t$jscomp$1}(),Eo=function(e){function n$jscomp$0(t){var n=
this;return(n=e.call(this)||this).Ro=t,n}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0}(Bn),To=function(){function t$jscomp$2(t){this.persistence=t;this.n_=new ki;this.s_=null}return t$jscomp$2.i_=function(e){return new t$jscomp$2(e)},Object.defineProperty(t$jscomp$2.prototype,"r_",{get:function(){if(this.s_)return this.s_;throw d$jscomp$0();},enumerable:!1,configurable:!0}),t$jscomp$2.prototype.Eo=function(t,e,n){return this.n_.Eo(n,e),this.r_.delete(n.toString()),Fn.resolve()},t$jscomp$2.prototype.mo=
function(t,e,n){return this.n_.mo(n,e),this.r_.add(n.toString()),Fn.resolve()},t$jscomp$2.prototype.Dr=function(t,e){return this.r_.add(e.toString()),Fn.resolve()},t$jscomp$2.prototype.removeTarget=function(t$jscomp$1,e){var n=this;this.n_.Ch(e.targetId).forEach(function(t){return n.r_.add(t.toString())});var r=this.persistence.hh();return r.Ao(t$jscomp$1,e.targetId).next(function(t$jscomp$0){t$jscomp$0.forEach(function(t){return n.r_.add(t.toString())})}).next(function(){return r._o(t$jscomp$1,e)})},
t$jscomp$2.prototype.Zl=function(){this.s_=new Set},t$jscomp$2.prototype.t_=function(t$jscomp$0){var e=this,n=this.persistence.ah().jr();return Fn.forEach(this.r_,function(r){var i=U.B(r);return e.o_(t$jscomp$0,i).next(function(t){t||n.Mn(i)})}).next(function(){return e.s_=null,n.apply(t$jscomp$0)})},t$jscomp$2.prototype.wh=function(t$jscomp$0,e){var n=this;return this.o_(t$jscomp$0,e).next(function(t){t?n.r_.delete(e.toString()):n.r_.add(e.toString())})},t$jscomp$2.prototype.Xl=function(t){return 0},
t$jscomp$2.prototype.o_=function(t,e){var n=this;return Fn.Nn([function(){return Fn.resolve(n.n_.Nr(e))},function(){return n.persistence.hh().Nr(t,e)},function(){return n.persistence.e_(t,e)}])},t$jscomp$2}(),No=function(){function t$jscomp$0(t){this.h_=t.h_;this.a_=t.a_}return t$jscomp$0.prototype.wa=function(t){this.u_=t},t$jscomp$0.prototype.ca=function(t){this.c_=t},t$jscomp$0.prototype.onMessage=function(t){this.l_=t},t$jscomp$0.prototype.close=function(){this.a_()},t$jscomp$0.prototype.send=
function(t){this.h_(t)},t$jscomp$0.prototype.__=function(){this.u_()},t$jscomp$0.prototype.f_=function(t){this.c_(t)},t$jscomp$0.prototype.d_=function(t){this.l_(t)},t$jscomp$0}(),Ao={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},So=function(e$jscomp$2){function n$jscomp$1(t){var n=this;return(n=e$jscomp$2.call(this,t)||this).forceLongPolling=t.forceLongPolling,n}return t$jscomp$4.__extends(n$jscomp$1,e$jscomp$2),n$jscomp$1.prototype.A_=function(t,e$jscomp$1,n$jscomp$0,r$jscomp$0){return new Promise(function(o,
s){var u=new i$jscomp$2.XhrIo;u.listenOnce(i$jscomp$2.EventType.COMPLETE,function(){try{switch(u.getLastErrorCode()){case i$jscomp$2.ErrorCode.NO_ERROR:var e=u.getResponseJson();h$jscomp$0("Connection","XHR received:",JSON.stringify(e));o(e);break;case i$jscomp$2.ErrorCode.TIMEOUT:h$jscomp$0("Connection",'RPC "'+t+'" timed out');s(new x(D.DEADLINE_EXCEEDED,"Request time out"));break;case i$jscomp$2.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(h$jscomp$0("Connection",'RPC "'+t+'" failed with status:',
n,"response text:",u.getResponseText()),0<n){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var e$jscomp$0=r.status.toLowerCase().replace("_","-");var a=0<=Object.values(D).indexOf(e$jscomp$0)?e$jscomp$0:D.UNKNOWN;s(new x(a,r.message))}else s(new x(D.UNKNOWN,"Server responded with status "+u.getStatus()))}else s(new x(D.UNAVAILABLE,"Connection failed."));break;default:d$jscomp$0()}}finally{h$jscomp$0("Connection",'RPC "'+t+'" completed.')}});var a$jscomp$0=JSON.stringify(r$jscomp$0);u.send(e$jscomp$1,
"POST",a$jscomp$0,n$jscomp$0,15)})},n$jscomp$1.prototype.Ta=function(t$jscomp$1,e$jscomp$0){var n$jscomp$0=[this.T_,"/","google.firestore.v1.Firestore","/",t$jscomp$1,"/channel"];t$jscomp$1=i$jscomp$2.createWebChannelTransport();var s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6E5},forceLongPolling:this.forceLongPolling};
this.m_(s.initMessageHeaders,e$jscomp$0);r$jscomp$2.isMobileCordova()||r$jscomp$2.isReactNative()||r$jscomp$2.isElectron()||r$jscomp$2.isIE()||r$jscomp$2.isUWP()||r$jscomp$2.isBrowserExtension()||(s.httpHeadersOverwriteParam="$httpHeaders");e$jscomp$0=n$jscomp$0.join("");h$jscomp$0("Connection","Creating WebChannel: "+e$jscomp$0,s);var a=t$jscomp$1.createWebChannel(e$jscomp$0,s),c=!1,f=!1,p=new No({h_:function(t){f?h$jscomp$0("Connection","Not sending because WebChannel is closed:",t):(c||(h$jscomp$0("Connection",
"Opening WebChannel transport."),a.open(),c=!0),h$jscomp$0("Connection","WebChannel sending:",t),a.send(t))},a_:function(){return a.close()}});e$jscomp$0=function(t$jscomp$0,e){a.listen(t$jscomp$0,function(t){try{e(t)}catch(t$29){setTimeout(function(){throw t$29;},0)}})};return e$jscomp$0(i$jscomp$2.WebChannel.EventType.OPEN,function(){f||h$jscomp$0("Connection","WebChannel transport opened.")}),e$jscomp$0(i$jscomp$2.WebChannel.EventType.CLOSE,function(){f||(f=!0,h$jscomp$0("Connection","WebChannel transport closed"),
p.f_())}),e$jscomp$0(i$jscomp$2.WebChannel.EventType.ERROR,function(t){f||(f=!0,l$jscomp$0("Connection","WebChannel transport errored:",t),p.f_(new x(D.UNAVAILABLE,"The operation could not be completed")))}),e$jscomp$0(i$jscomp$2.WebChannel.EventType.MESSAGE,function(t){var e;if(!f){var n=t.data[0];n||d$jscomp$0();if(t=n.error||(null===(e=n[0])||void 0===e?void 0:e.error)){h$jscomp$0("Connection","WebChannel received error:",t);e=t.status;n=W[e];n=void 0!==n?X(n):void 0;var u=t.message;void 0===n&&
(n=D.INTERNAL,u="Unknown error status: "+e+" with message "+t.message);f=!0;p.f_(new x(n,u));a.close()}else h$jscomp$0("Connection","WebChannel received:",n),p.d_(n)}}),setTimeout(function(){p.__()},0),p},n$jscomp$1}(function(){function t$jscomp$1(t){this.w_=t;this.s=t.s;this.T_=(t.ssl?"https":"http")+"://"+t.host;this.E_="projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents"}return t$jscomp$1.prototype.va=function(t$jscomp$0,e$jscomp$0,n,r){var i=this.I_(t$jscomp$0,e$jscomp$0);h$jscomp$0("RestConnection",
"Sending: ",i,n);e$jscomp$0={};return this.m_(e$jscomp$0,r),this.A_(t$jscomp$0,i,e$jscomp$0,n).then(function(t){return h$jscomp$0("RestConnection","Received: ",t),t},function(e){throw l$jscomp$0("RestConnection",t$jscomp$0+" failed with error: ",e,"url: ",i,"request:",n),e;})},t$jscomp$1.prototype.Sa=function(t,e,n,r){return this.va(t,e,n,r)},t$jscomp$1.prototype.m_=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.19.1",t["Content-Type"]="text/plain",e)for(var n in e.Mh)e.Mh.hasOwnProperty(n)&&
(t[n]=e.Mh[n])},t$jscomp$1.prototype.I_=function(t,e){return this.T_+"/v1/"+e+":"+Ao[t]},t$jscomp$1}()),Do=function(){function t$jscomp$0(){var t=this;this.R_=function(){return t.P_()};this.g_=function(){return t.V_()};this.y_=[];this.p_()}return t$jscomp$0.prototype.Ka=function(t){this.y_.push(t)},t$jscomp$0.prototype.th=function(){window.removeEventListener("online",this.R_);window.removeEventListener("offline",this.g_)},t$jscomp$0.prototype.p_=function(){window.addEventListener("online",this.R_);
window.addEventListener("offline",this.g_)},t$jscomp$0.prototype.P_=function(){h$jscomp$0("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.y_;t<e.length;t++)(0,e[t])(0)},t$jscomp$0.prototype.V_=function(){h$jscomp$0("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.y_;t<e.length;t++)(0,e[t])(1)},t$jscomp$0.ks=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t$jscomp$0}(),
xo=function(){function t$jscomp$0(){}return t$jscomp$0.prototype.Ka=function(t){},t$jscomp$0.prototype.th=function(){},t$jscomp$0}(),Ro=function(){function e$jscomp$0(){}return e$jscomp$0.prototype.initialize=function(e){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return this.Uc=this.b_(e),this.persistence=this.v_(e),[4,this.persistence.start()];case 1:return t.sent(),this.S_=this.D_(e),this.La=this.C_(e),[2]}})})},
e$jscomp$0.prototype.D_=function(t){return null},e$jscomp$0.prototype.C_=function(t){return e=this.persistence,n=new mo,r=t.N_,new bi(e,n,r);var e,n,r},e$jscomp$0.prototype.v_=function(t){if(t.k_.F_)throw new x(D.FAILED_PRECONDITION,"You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.");return new Io(To.i_)},e$jscomp$0.prototype.b_=function(t){return new Ji},e$jscomp$0.prototype.terminate=function(){return t$jscomp$4.__awaiter(this,
void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return this.S_&&this.S_.stop(),[4,this.Uc.th()];case 1:return t.sent(),[4,this.persistence.th()];case 2:return t.sent(),[2]}})})},e$jscomp$0.prototype.clearPersistence=function(t,e){throw new x(D.FAILED_PRECONDITION,"You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.");},e$jscomp$0}(),Po=function(e$jscomp$0){function n$jscomp$0(t){var n=
this;return(n=e$jscomp$0.call(this)||this).x_=t,n}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$0),n$jscomp$0.prototype.initialize=function(n){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r,i=this;return t$jscomp$4.__generator(this,function(o){switch(o.label){case 0:return[4,e$jscomp$0.prototype.initialize.call(this,n)];case 1:return o.sent(),[4,this.x_.initialize(this,n)];case 2:return o.sent(),r=this.x_.fu,this.Uc instanceof $i?(this.Uc.fu={Ic:uo.bind(null,r),mc:lo.bind(null,
r),Ac:po.bind(null,r),rh:fo.bind(null,r)},[4,this.Uc.start()]):[3,4];case 3:o.sent(),o.label=4;case 4:return[4,this.persistence.qo(function(e){return t$jscomp$4.__awaiter(i,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return[4,ao(this.x_.fu,e)];case 1:return t.sent(),this.S_&&(e&&!this.S_.tr?this.S_.start(this.La):e||this.S_.stop()),[2]}})})})];case 5:return o.sent(),[2]}})})},n$jscomp$0.prototype.b_=function(t){if(t.k_.F_&&t.k_.synchronizeTabs){var e=
"undefined"!=typeof window?window:null;if(!$i.ks(e))throw new x(D.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=wi(t.w_.s,t.w_.persistenceKey);return new $i(e,t.ei,n,t.clientId,t.N_)}return new Ji},n$jscomp$0}(function(e$jscomp$1){function n$jscomp$1(){return null!==e$jscomp$1&&e$jscomp$1.apply(this,arguments)||this}return t$jscomp$4.__extends(n$jscomp$1,e$jscomp$1),n$jscomp$1.prototype.initialize=function(n$jscomp$0){return t$jscomp$4.__awaiter(this,
void 0,void 0,function(){return t$jscomp$4.__generator(this,function(r$jscomp$0){switch(r$jscomp$0.label){case 0:return[4,e$jscomp$1.prototype.initialize.call(this,n$jscomp$0)];case 1:return r$jscomp$0.sent(),[4,function(e){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var n,r;return t$jscomp$4.__generator(this,function(t$jscomp$0){return n=e,r=n.Ah,[2,n.persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return r.Wr(t)}).then(function(t){n.mh=
t})]})})}(this.La)];case 2:return r$jscomp$0.sent(),[2]}})})},n$jscomp$1.prototype.D_=function(t){return new pr(this.persistence.dr.Yi,t.ei)},n$jscomp$1.prototype.v_=function(t){var e=wi(t.w_.s,t.w_.persistenceKey),n=new Qt(t.w_.s,!0);return new di(t.k_.synchronizeTabs,e,t.clientId,lr.Ui(t.k_.cacheSizeBytes),t.ei,"undefined"!=typeof window?window:null,or(),n,this.Uc,t.k_.Vo)},n$jscomp$1.prototype.b_=function(t){return new Ji},n$jscomp$1.prototype.clearPersistence=function(e$jscomp$0,n$jscomp$0){return function(e){return t$jscomp$4.__awaiter(this,
void 0,void 0,function(){var n;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return Yn.ks()?(n=e+"main",[4,Yn.delete(n)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(wi(e$jscomp$0,n$jscomp$0))},n$jscomp$1}(Ro)),Oo=function(){function e$jscomp$0(){}return e$jscomp$0.prototype.initialize=function(e,n){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r=this;return t$jscomp$4.__generator(this,function(t$jscomp$0){switch(t$jscomp$0.label){case 0:return this.La?
[3,3]:(this.La=e.La,this.Uc=e.Uc,this.qa=this.O_(n),this.Bc=this.M_(n),this.fu=this.L_(n),this.q_=this.B_(n),this.Uc.Da=function(t){return r.fu.xc(t,1)},this.Bc.fu=this.fu,[4,this.Bc.start()]);case 1:return t$jscomp$0.sent(),[4,this.Bc.Su(this.fu.el)];case 2:t$jscomp$0.sent(),t$jscomp$0.label=3;case 3:return[2]}})})},e$jscomp$0.prototype.B_=function(t){return new vo(this.fu)},e$jscomp$0.prototype.O_=function(t){var e,n=new Qt(t.w_.s,!0),r=(e=t.w_,new So(e));return new Gi(t.credentials,r,n)},e$jscomp$0.prototype.M_=
function(t$jscomp$0){var e=this;return new Bi(this.La,this.qa,t$jscomp$0.ei,function(t){return e.fu.xc(t,0)},Do.ks()?new Do:new xo)},e$jscomp$0.prototype.L_=function(t){var s=!t.k_.F_||!t.k_.synchronizeTabs;t=new oo(this.La,this.Bc,this.qa,this.Uc,t.N_,t.Qc);return s&&(t.tl=!0),t},e$jscomp$0.prototype.terminate=function(){return this.Bc.th()},e$jscomp$0}(),Uo=function(){function t$jscomp$0(t){this.observer=t;this.muted=!1}return t$jscomp$0.prototype.next=function(t){this.observer.next&&this.U_(this.observer.next,
t)},t$jscomp$0.prototype.error=function(t){this.observer.error?this.U_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t$jscomp$0.prototype.Q_=function(){this.muted=!0},t$jscomp$0.prototype.U_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t$jscomp$0}(),is=function(){function t$jscomp$0(t){rs();this.W_=t}return t$jscomp$0.fromBase64String=function(e){qo("Blob.fromBase64String",arguments,1);Go("Blob.fromBase64String","string",1,e);rs();
try{return new t$jscomp$0(Q.fromBase64String(e))}catch(e$30){throw new x(D.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e$30);}},t$jscomp$0.fromUint8Array=function(e){if(qo("Blob.fromUint8Array",arguments,1),ns(),!(e instanceof Uint8Array))throw $o("Blob.fromUint8Array","Uint8Array",1,e);return new t$jscomp$0(Q.fromUint8Array(e))},t$jscomp$0.prototype.toBase64=function(){return qo("Blob.toBase64",arguments,0),rs(),this.W_.toBase64()},t$jscomp$0.prototype.toUint8Array=function(){return qo("Blob.toUint8Array",
arguments,0),ns(),this.W_.toUint8Array()},t$jscomp$0.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t$jscomp$0.prototype.isEqual=function(t){return this.W_.isEqual(t.W_)},t$jscomp$0}(),os=function(t){if(!(t instanceof Array)||1>t.length)throw new x(D.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+es(1,"element")+".");!0;for(var e=0;e<t.length;++e)if(Go("FieldPath","string",e,t[e]),0===t[e].length)throw new x(D.INVALID_ARGUMENT,
"Invalid field name at argument $(i + 1). Field names must not be empty.");this.j_=new V(t)},ss=function(e){function n$jscomp$0(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.call(this,t)||this}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0.documentId=function(){return new n$jscomp$0(V.L().F())},n$jscomp$0.prototype.isEqual=function(t){if(!(t instanceof n$jscomp$0))throw $o("isEqual","FieldPath",1,t);return this.j_.isEqual(t.j_)},n$jscomp$0}(os),us=/[~\*/\[\]]/,as=function(){this.K_=
this},cs=function(e){function n$jscomp$0(t){var n=this;return(n=e.call(this)||this).G_=t,n}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0.prototype.z_=function(t){if(2!==t.H_)throw 1===t.H_?t.Y_(this.G_+"() can only appear at the top level of your update data"):t.Y_(this.G_+"() cannot be used with set() unless you pass {merge:true}");return t.qe.push(t.path),null},n$jscomp$0.prototype.isEqual=function(t){return t instanceof n$jscomp$0},n$jscomp$0}(as),fs=function(e){function n$jscomp$0(t){var n=
this;return(n=e.call(this)||this).G_=t,n}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0.prototype.z_=function(t){return new Ve(t.path,new Ae)},n$jscomp$0.prototype.isEqual=function(t){return t instanceof n$jscomp$0},n$jscomp$0}(as),ls=function(e$jscomp$0){function n$jscomp$0(t,n){var r=this;return(r=e$jscomp$0.call(this)||this).G_=t,r.Z_=n,r}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$0),n$jscomp$0.prototype.z_=function(t$jscomp$0){var e=hs(this,t$jscomp$0,!0),n=this.Z_.map(function(t){return xs(t,
e)});n=new Se(n);return new Ve(t$jscomp$0.path,n)},n$jscomp$0.prototype.isEqual=function(t){return this===t},n$jscomp$0}(as),ps=function(e$jscomp$0){function n$jscomp$0(t,n){var r=this;return(r=e$jscomp$0.call(this)||this).G_=t,r.Z_=n,r}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$0),n$jscomp$0.prototype.z_=function(t$jscomp$0){var e=hs(this,t$jscomp$0,!0),n=this.Z_.map(function(t){return xs(t,e)});n=new xe(n);return new Ve(t$jscomp$0.path,n)},n$jscomp$0.prototype.isEqual=function(t){return this===
t},n$jscomp$0}(as),ds=function(e$jscomp$0){function n$jscomp$0(t,n){var r=this;return(r=e$jscomp$0.call(this)||this).G_=t,r.tf=n,r}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$0),n$jscomp$0.prototype.z_=function(t){var e=new Le(t.serializer,Kt(t.serializer,this.tf));return new Ve(t.path,e)},n$jscomp$0.prototype.isEqual=function(t){return this===t},n$jscomp$0}(as),ys=function(e$jscomp$0){function n(){return e$jscomp$0.call(this)||this}return t$jscomp$4.__extends(n,e$jscomp$0),n.delete=function(){return Co("FieldValue.delete",
arguments),new vs(new cs("FieldValue.delete"))},n.serverTimestamp=function(){return Co("FieldValue.serverTimestamp",arguments),new vs(new fs("FieldValue.serverTimestamp"))},n.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Mo("FieldValue.arrayUnion",arguments,1),new vs(new ls("FieldValue.arrayUnion",t))},n.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Mo("FieldValue.arrayRemove",arguments,1),new vs(new ps("FieldValue.arrayRemove",
t))},n.increment=function(t){return Go("FieldValue.increment","number",1,t),qo("FieldValue.increment",arguments,1),new vs(new ds("FieldValue.increment",t))},n}(as),vs=function(e){function n$jscomp$0(t){var n=this;return(n=e.call(this)||this).K_=t,n.G_=t.G_,n}return t$jscomp$4.__extends(n$jscomp$0,e),n$jscomp$0.prototype.z_=function(t){return this.K_.z_(t)},n$jscomp$0.prototype.isEqual=function(t){return t instanceof n$jscomp$0&&this.K_.isEqual(t.K_)},n$jscomp$0}(ys),gs=function(){function t$jscomp$0(t,
e){if(qo("GeoPoint",arguments,2),Go("GeoPoint","number",1,t),Go("GeoPoint","number",2,e),!isFinite(t)||-90>t||90<t)throw new x(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||-180>e||180<e)throw new x(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.ef=t;this.nf=e}return Object.defineProperty(t$jscomp$0.prototype,"latitude",{get:function(){return this.ef},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$0.prototype,
"longitude",{get:function(){return this.nf},enumerable:!1,configurable:!0}),t$jscomp$0.prototype.isEqual=function(t){return this.ef===t.ef&&this.nf===t.nf},t$jscomp$0.prototype.toJSON=function(){return{latitude:this.ef,longitude:this.nf}},t$jscomp$0.prototype.T=function(t){return w(this.ef,t.ef)||w(this.nf,t.nf)},t$jscomp$0}(),ms=/^__.*__$/,ws=function(t,e,n){this.sf=t;this.if=e;this.rf=n},bs=function(){function t$jscomp$0(t,e,n){this.data=t;this.qe=e;this.fieldTransforms=n}return t$jscomp$0.prototype.hf=
function(t,e){var n=[];return null!==this.qe?n.push(new We(t,this.data,this.qe,e)):n.push(new Qe(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Ke(t,this.fieldTransforms)),n},t$jscomp$0}(),_s=function(){function t$jscomp$0(t,e,n){this.data=t;this.qe=e;this.fieldTransforms=n}return t$jscomp$0.prototype.hf=function(t,e){e=[new We(t,this.data,this.qe,e)];return 0<this.fieldTransforms.length&&e.push(new Ke(t,this.fieldTransforms)),e},t$jscomp$0}(),Es=function(){function t$jscomp$0(t,e,n,r,
i,o){this.settings=t;this.s=e;this.serializer=n;this.ignoreUndefinedProperties=r;void 0===i&&this.af();this.fieldTransforms=i||[];this.qe=o||[]}return Object.defineProperty(t$jscomp$0.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$0.prototype,"H_",{get:function(){return this.settings.H_},enumerable:!1,configurable:!0}),t$jscomp$0.prototype.uf=function(e){return new t$jscomp$0(Object.assign(Object.assign({},this.settings),
e),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.qe)},t$jscomp$0.prototype.cf=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t);e=this.uf({path:n,X_:!1});return e.lf(t),e},t$jscomp$0.prototype._f=function(t){var e;t=null===(e=this.path)||void 0===e?void 0:e.child(t);e=this.uf({path:t,X_:!1});return e.af(),e},t$jscomp$0.prototype.ff=function(t){return this.uf({path:void 0,X_:!0})},t$jscomp$0.prototype.Y_=function(t){return Vs(t,this.settings.methodName,
this.settings.df||!1,this.path,this.settings.J_)},t$jscomp$0.prototype.contains=function(t){return void 0!==this.qe.find(function(e){return t.D(e)})||void 0!==this.fieldTransforms.find(function(e){return t.D(e.field)})},t$jscomp$0.prototype.af=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.lf(this.path.get(t))},t$jscomp$0.prototype.lf=function(t){if(0===t.length)throw this.Y_("Document fields must not be empty");if(Is(this.H_)&&ms.test(t))throw this.Y_('Document fields cannot begin and end with "__"');
},t$jscomp$0}(),Ts=function(){function t$jscomp$0(t,e,n){this.s=t;this.ignoreUndefinedProperties=e;this.serializer=n||new Qt(t,!0)}return t$jscomp$0.prototype.wf=function(t,e,n,r){return void 0===r&&(r=!1),new Es({H_:t,methodName:e,J_:n,path:V.$(),X_:!1,df:r},this.s,this.serializer,this.ignoreUndefinedProperties)},t$jscomp$0}(),Cs=function(){function e$jscomp$3(t){this.qa=t;this.Tf=new Map;this.mutations=[];this.Ef=!1;this.If=null;this.mf=new Set}return e$jscomp$3.prototype.Af=function(e$jscomp$2){return t$jscomp$4.__awaiter(this,
void 0,void 0,function(){var n$jscomp$0,r$jscomp$1=this;return t$jscomp$4.__generator(this,function(i$jscomp$0){switch(i$jscomp$0.label){case 0:if(this.Rf(),0<this.mutations.length)throw new x(D.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e$jscomp$1,n){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r$jscomp$0,i,o,s,u,a;return t$jscomp$4.__generator(this,function(t$jscomp$2){switch(t$jscomp$2.label){case 0:return r$jscomp$0=
e$jscomp$1,i=oe(r$jscomp$0.serializer)+"/documents",o={documents:n.map(function(t){return Jt(r$jscomp$0.serializer.s,t.path)})},[4,r$jscomp$0.Sa("BatchGetDocuments",i,o)];case 1:return s=t$jscomp$2.sent(),u=new Map,s.forEach(function(t$jscomp$1){t$jscomp$1=function(t$jscomp$0,e$jscomp$0){return"found"in e$jscomp$0?function(t,e){e.found||d$jscomp$0();e.found.name;e.found.updateTime;t=ne(t,e.found.name);var r=$t(e.found.updateTime);e=new Je({mapValue:{fields:e.found.fields}});return new rn(t,r,e,{})}(t$jscomp$0,
e$jscomp$0):"missing"in e$jscomp$0?function(t,e){e.missing||d$jscomp$0();e.readTime||d$jscomp$0();t=ne(t,e.missing);e=$t(e.readTime);return new on(t,e)}(t$jscomp$0,e$jscomp$0):d$jscomp$0()}(r$jscomp$0.serializer,t$jscomp$1);u.set(t$jscomp$1.key.toString(),t$jscomp$1)}),a=[],[2,(n.forEach(function(t){(t=u.get(t.toString()))||d$jscomp$0();a.push(t)}),a)]}})})}(this.qa,e$jscomp$2)];case 1:return[2,((n$jscomp$0=i$jscomp$0.sent()).forEach(function(t){t instanceof on||t instanceof rn?r$jscomp$1.Pf(t):d$jscomp$0()}),
n$jscomp$0)]}})})},e$jscomp$3.prototype.set=function(t,e){this.write(e.hf(t,this.Qe(t)));this.mf.add(t.toString())},e$jscomp$3.prototype.update=function(t,e){try{this.write(e.hf(t,this.gf(t)))}catch(t$33){this.If=t$33}this.mf.add(t.toString())},e$jscomp$3.prototype.delete=function(t){this.write([new Xe(t,this.Qe(t))]);this.mf.add(t.toString())},e$jscomp$3.prototype.commit=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var e$jscomp$0,n$jscomp$0=this;return t$jscomp$4.__generator(this,
function(r$jscomp$0){switch(r$jscomp$0.label){case 0:if(this.Rf(),this.If)throw this.If;return e$jscomp$0=this.Tf,this.mutations.forEach(function(t){e$jscomp$0.delete(t.key.toString())}),e$jscomp$0.forEach(function(t,e){t=U.B(e);n$jscomp$0.mutations.push(new $e(t,n$jscomp$0.Qe(t)))}),[4,function(e,n){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var r,i,o;return t$jscomp$4.__generator(this,function(t$jscomp$0){switch(t$jscomp$0.label){case 0:return r=e,i=oe(r.serializer)+"/documents",
o={writes:n.map(function(t){return ae(r.serializer,t)})},[4,r.va("Commit",i,o)];case 1:return t$jscomp$0.sent(),[2]}})})}(this.qa,this.mutations)];case 1:return r$jscomp$0.sent(),this.Ef=!0,[2]}})})},e$jscomp$3.prototype.Pf=function(t){if(t instanceof rn)var e=t.version;else{if(!(t instanceof on))throw d$jscomp$0();e=L.min()}var n=this.Tf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new x(D.ABORTED,"Document version changed between two reads.");}else this.Tf.set(t.key.toString(),e)},e$jscomp$3.prototype.Qe=
function(t){var e=this.Tf.get(t.toString());return!this.mf.has(t.toString())&&e?Ce.updateTime(e):Ce.We()},e$jscomp$3.prototype.gf=function(t){var e=this.Tf.get(t.toString());if(!this.mf.has(t.toString())&&e){if(e.isEqual(L.min()))throw new x(D.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ce.updateTime(e)}return Ce.exists(!0)},e$jscomp$3.prototype.write=function(t){this.Rf();this.mutations=this.mutations.concat(t)},e$jscomp$3.prototype.Rf=function(){},e$jscomp$3}(),qs=function(){function e$jscomp$1(t,
e,n,r){this.ei=t;this.qa=e;this.updateFunction=n;this.ii=r;this.Vf=5;this.Ti=new Kn(this.ei,"transaction_retry")}return e$jscomp$1.prototype.run=function(){this.yf()},e$jscomp$1.prototype.yf=function(){var e$jscomp$0=this;this.Ti.bs(function(){return t$jscomp$4.__awaiter(e$jscomp$0,void 0,void 0,function(){var e,n,r=this;return t$jscomp$4.__generator(this,function(t$jscomp$1){return e=new Cs(this.qa),(n=this.pf(e))&&n.then(function(t$jscomp$0){r.ei.ai(function(){return e.commit().then(function(){r.ii.resolve(t$jscomp$0)}).catch(function(t){r.bf(t)})})}).catch(function(t){r.bf(t)}),
[2]})})})},e$jscomp$1.prototype.pf=function(t){try{var e=this.updateFunction(t);return null!=e&&e.catch&&e.then?e:(this.ii.reject(Error("Transaction callback must return a Promise")),null)}catch(t$34){return this.ii.reject(t$34),null}},e$jscomp$1.prototype.bf=function(t){var e=this;0<this.Vf&&this.vf(t)?(--this.Vf,this.ei.ai(function(){return e.yf(),Promise.resolve()})):this.ii.reject(t)},e$jscomp$1.prototype.vf=function(t){return"FirebaseError"===t.name?(t=t.code,"aborted"===t||"failed-precondition"===
t||!Z(t)):!1},e$jscomp$1}(),Ms=function(){function e$jscomp$3(t,e){this.credentials=t;this.ei=e;this.clientId=m.t();this.Sf=new Hn}return e$jscomp$3.prototype.start=function(t$jscomp$0,e,n,r){var i=this;this.Df();this.w_=t$jscomp$0;var o=new Hn,s=!1;return this.credentials.Bh(function(t){if(!s)return s=!0,h$jscomp$0("FirestoreClient","Initializing. user\x3d",t.uid),i.Cf(e,n,r,t,o).then(i.Sf.resolve,i.Sf.reject);i.ei.gi(function(){return i.Bc.vu(t)})}),this.ei.ai(function(){return i.Sf.promise}),o.promise},
e$jscomp$3.prototype.enableNetwork=function(){var t=this;return this.Df(),this.ei.enqueue(function(){return t.persistence.Uo(!0),t.Bc.enableNetwork()})},e$jscomp$3.prototype.Cf=function(e,n,r,i,o){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var s,u,a=this;return t$jscomp$4.__generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),s={ei:this.ei,w_:this.w_,clientId:this.clientId,credentials:this.credentials,N_:i,Qc:100,k_:r},[4,e.initialize(s)];case 1:return c.sent(),
[4,n.initialize(e,s)];case 2:return c.sent(),this.persistence=e.persistence,this.Uc=e.Uc,this.La=e.La,this.S_=e.S_,this.qa=n.qa,this.Bc=n.Bc,this.fu=n.fu,this.Nf=n.q_,this.persistence.Bo(function(){return t$jscomp$4.__awaiter(a,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),o.resolve(),[3,4];case 3:if(u=c.sent(),o.reject(u),!this.Ff(u))throw u;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+
u),this.Cf(new Ro,new Oo,{F_:!1},i,o))];case 4:return[2]}})})},e$jscomp$3.prototype.Ff=function(t){return"FirebaseError"===t.name?t.code===D.FAILED_PRECONDITION||t.code===D.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},e$jscomp$3.prototype.Df=function(){if(this.ei.Ii)throw new x(D.FAILED_PRECONDITION,"The client has already been terminated.");},e$jscomp$3.prototype.disableNetwork=function(){var t=this;return this.Df(),this.ei.enqueue(function(){return t.persistence.Uo(!1),
t.Bc.disableNetwork()})},e$jscomp$3.prototype.terminate=function(){var e$jscomp$0=this;this.ei.Pi();var n=new Hn;return this.ei.mi(function(){return t$jscomp$4.__awaiter(e$jscomp$0,void 0,void 0,function(){var e,r;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),this.S_&&this.S_.stop(),[4,this.Bc.th()];case 1:return t.sent(),[4,this.Uc.th()];case 2:return t.sent(),[4,this.persistence.th()];case 3:return t.sent(),this.credentials.Uh(),n.resolve(),[3,
5];case 4:return e=t.sent(),r=ar(e,"Failed to shutdown persistence"),n.reject(r),[3,5];case 5:return[2]}})})}),n.promise},e$jscomp$3.prototype.waitForPendingWrites=function(){var t=this;this.Df();var e=new Hn;return this.ei.ai(function(){return t.fu._l(e)}),e.promise},e$jscomp$3.prototype.listen=function(t,e,n){var r=this;this.Df();var i=new Uo(n),o=new go(t,i,e);return this.ei.ai(function(){return r.Nf.listen(o)}),function(){i.Q_();r.ei.ai(function(){return r.Nf.lu(o)})}},e$jscomp$3.prototype.kf=
function(e$jscomp$2){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(n$jscomp$0){switch(n$jscomp$0.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(n$jscomp$0.sent(),function(e$jscomp$1,n,r){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var i,o$jscomp$0=this;return t$jscomp$4.__generator(this,function(s$jscomp$0){switch(s$jscomp$0.label){case 0:return i=new Hn,[4,e$jscomp$1.enqueue(function(){return t$jscomp$4.__awaiter(o$jscomp$0,
void 0,void 0,function(){var e$jscomp$0,o,s;return t$jscomp$4.__generator(this,function(t$jscomp$1){switch(t$jscomp$1.label){case 0:return t$jscomp$1.trys.push([0,2,,3]),[4,function(t$jscomp$0,e){return t$jscomp$0.persistence.runTransaction("read document","readonly",function(t){return t$jscomp$0.Rh.Hn(t,e)})}(n,r)];case 1:return(e$jscomp$0=t$jscomp$1.sent())instanceof rn?i.resolve(e$jscomp$0):e$jscomp$0 instanceof on?i.resolve(null):i.reject(new x(D.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),
[3,3];case 2:return o=t$jscomp$1.sent(),s=ar(o,"Failed to get document '"+r+" from cache"),i.reject(s),[3,3];case 3:return[2]}})})})];case 1:return[2,(s$jscomp$0.sent(),i.promise)]}})})}(this.ei,this.La,e$jscomp$2))]}})})},e$jscomp$3.prototype.$f=function(e$jscomp$1,n$jscomp$0){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t$jscomp$1){switch(t$jscomp$1.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(t$jscomp$1.sent(),function(t$jscomp$0,
e$jscomp$0,n,r){var i=new Hn,o=Fs(t$jscomp$0,e$jscomp$0,new an(n.path),{includeMetadataChanges:!0,$l:!0},{next:function(t){o();var e=t.docs.has(n);!e&&t.fromCache?i.reject(new x(D.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&r&&"server"===r.source?i.reject(new x(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(t)},
error:function(t){return i.reject(t)}});return i.promise}(this.ei,this.Nf,e$jscomp$1,n$jscomp$0))]}})})},e$jscomp$3.prototype.xf=function(e$jscomp$1){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(n$jscomp$0){switch(n$jscomp$0.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(n$jscomp$0.sent(),function(e$jscomp$0,n,r){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var i,o$jscomp$0=this;return t$jscomp$4.__generator(this,
function(s$jscomp$0){switch(s$jscomp$0.label){case 0:return i=new Hn,[4,e$jscomp$0.enqueue(function(){return t$jscomp$4.__awaiter(o$jscomp$0,void 0,void 0,function(){var e,o,s,u,a,c;return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Si(n,r,!0)];case 1:return e=t.sent(),o=new no(r,e.gh),s=o.Sc(e.documents),u=o.Un(s,!1),i.resolve(u.snapshot),[3,3];case 2:return a=t.sent(),c=ar(a,"Failed to execute query '"+r+" against cache"),i.reject(c),[3,3];case 3:return[2]}})})})];
case 1:return[2,(s$jscomp$0.sent(),i.promise)]}})})}(this.ei,this.La,e$jscomp$1))]}})})},e$jscomp$3.prototype.Of=function(e$jscomp$0,n$jscomp$0){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t$jscomp$1){switch(t$jscomp$1.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(t$jscomp$1.sent(),function(t$jscomp$0,e,n,r){var i=new Hn,o=Fs(t$jscomp$0,e,n,{includeMetadataChanges:!0,$l:!0},{next:function(t){o();t.fromCache&&r&&"server"===
r.source?i.reject(new x(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}});return i.promise}(this.ei,this.Nf,e$jscomp$0,n$jscomp$0))]}})})},e$jscomp$3.prototype.write=function(t){var e=this;this.Df();var n=new Hn;return this.ei.ai(function(){return e.fu.write(t,n)}),n.promise},e$jscomp$3.prototype.s=function(){return this.w_.s},
e$jscomp$3.prototype.bl=function(e){var n=this;this.Df();var r=new Uo(e);return this.ei.ai(function(){return t$jscomp$4.__awaiter(n,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){return[2,this.Nf.bl(r)]})})}),function(){r.Q_();n.ei.ai(function(){return t$jscomp$4.__awaiter(n,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){return[2,this.Nf.vl(r)]})})})}},Object.defineProperty(e$jscomp$3.prototype,"Mf",{get:function(){return this.ei.Ii},enumerable:!1,
configurable:!0}),e$jscomp$3.prototype.transaction=function(t){var e=this;this.Df();var n=new Hn;return this.ei.ai(function(){return(new qs(e.ei,e.qa,t,n)).run(),Promise.resolve()}),n.promise},e$jscomp$3}(),Gs=function(){function t$jscomp$1(t,e,n,r){this.s=t;this.timestampsInSnapshots=e;this.Lf=n;this.qf=r}return t$jscomp$1.prototype.Bf=function(t){switch(Dt(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vt(t.integerValue||t.doubleValue);case 3:return this.Uf(t.timestampValue);
case 4:return this.Qf(t);case 5:return t.stringValue;case 6:return new is(Ut(t.bytesValue));case 7:return this.Wf(t.referenceValue);case 8:return this.jf(t.geoPointValue);case 9:return this.Kf(t.arrayValue);case 10:return this.Gf(t.mapValue);default:throw d$jscomp$0();}},t$jscomp$1.prototype.Gf=function(t$jscomp$0){var e=this,n={};return N(t$jscomp$0.fields||{},function(t,r){n[t]=e.Bf(r)}),n},t$jscomp$1.prototype.jf=function(t){return new gs(Vt(t.latitude),Vt(t.longitude))},t$jscomp$1.prototype.Kf=
function(t$jscomp$0){var e=this;return(t$jscomp$0.values||[]).map(function(t){return e.Bf(t)})},t$jscomp$1.prototype.Qf=function(t$jscomp$0){switch(this.Lf){case "previous":return t$jscomp$0=function t(e){e=e.mapValue.fields.__previous_value__;return Nt(e)?t(e):e}(t$jscomp$0),null==t$jscomp$0?null:this.Bf(t$jscomp$0);case "estimate":return this.Uf(At(t$jscomp$0));default:return null}},t$jscomp$1.prototype.Uf=function(t){t=Ot(t);t=new k(t.seconds,t.nanos);return this.timestampsInSnapshots?t:t.toDate()},
t$jscomp$1.prototype.Wf=function(t){var e=P.k(t);_e(e)||d$jscomp$0();t=new E(e.get(1),e.get(3));e=new U(e.V(5));return t.isEqual(this.s)||f$jscomp$0("Document "+e+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.qf(e)},t$jscomp$1}(),js=lr.ji,Bs=function(){function t$jscomp$0(t){var e,n,r,i;if(void 0===t.host){if(void 0!==
t.ssl)throw new x(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com";this.ssl=!0}else Ho("settings","non-empty string","host option",t.host),this.host=t.host,zo("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Xo("settings",t,"host ssl credentials timestampsInSnapshots cacheSizeBytes experimentalForceLongPolling ignoreUndefinedProperties".split(" ")),zo("settings","object","credentials",t.credentials),this.credentials=
t.credentials,zo("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),zo("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?f$jscomp$0("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&f$jscomp$0("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||
void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,zo("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=lr.Gi;else{if(t.cacheSizeBytes!==js&&t.cacheSizeBytes<lr.Ki)throw new x(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+lr.Ki);this.cacheSizeBytes=t.cacheSizeBytes}zo("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling);this.experimentalForceLongPolling=null!==
(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t$jscomp$0.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t$jscomp$0}(),zs=function(){function e$jscomp$1(n,r,i,o){var s=this;if(void 0===i&&(i=new Ro),void 0===
o&&(o=new Oo),this.zf=i,this.Hf=o,this.Yf=null,this.Jf=new ur,this.INTERNAL={delete:function(){return t$jscomp$4.__awaiter(s,void 0,void 0,function(){return t$jscomp$4.__generator(this,function(t){switch(t.label){case 0:return this.Xf(),[4,this.Zf.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof n.options)this.Yf=n,this.sf=e$jscomp$1.td(n),this.ed=n.name,this.nd=new Vi(r);else{if(!n.projectId)throw new x(D.INVALID_ARGUMENT,"Must provide projectId");this.sf=new E(n.projectId,n.database);
this.ed="[DEFAULT]";this.nd=new Oi}this.sd=new Bs({})}return Object.defineProperty(e$jscomp$1.prototype,"rd",{get:function(){return this.od||(this.od=new Ts(this.sf,this.sd.ignoreUndefinedProperties)),this.od},enumerable:!1,configurable:!0}),e$jscomp$1.prototype.settings=function(t){qo("Firestore.settings",arguments,1);Go("Firestore.settings","object",1,t);t.merge&&delete (t=Object.assign(Object.assign({},this.sd),t)).merge;var e=new Bs(t);if(this.Zf&&!this.sd.isEqual(e))throw new x(D.FAILED_PRECONDITION,
"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.sd=e;if(void 0!==e.credentials){a:if(e=e.credentials)switch(e.type){case "gapi":var e$jscomp$0=e.hd;"object"==typeof e$jscomp$0&&null!==e$jscomp$0&&e$jscomp$0.auth&&e$jscomp$0.auth.getAuthHeaderValueForFirstParty||d$jscomp$0();e=new Ci(e$jscomp$0,e.zh||"0");break a;case "provider":e=e.hd;break a;default:throw new x(D.INVALID_ARGUMENT,
"makeCredentialsProvider failed due to invalid credential type");}else e=new Oi;this.nd=e}},e$jscomp$1.prototype.enableNetwork=function(){return this.Xf(),this.Zf.enableNetwork()},e$jscomp$1.prototype.disableNetwork=function(){return this.Xf(),this.Zf.disableNetwork()},e$jscomp$1.prototype.enablePersistence=function(t){var e,n;if(this.Zf)throw new x(D.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");
var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&f$jscomp$0("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new x(D.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.ad(this.zf,this.Hf,{F_:!0,cacheSizeBytes:this.sd.cacheSizeBytes,
synchronizeTabs:r,Vo:i})},e$jscomp$1.prototype.clearPersistence=function(){return t$jscomp$4.__awaiter(this,void 0,void 0,function(){var e,n$jscomp$0=this;return t$jscomp$4.__generator(this,function(r){if(void 0!==this.Zf&&!this.Zf.Mf)throw new x(D.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return e=new Hn,[2,(this.Jf.mi(function(){return t$jscomp$4.__awaiter(n$jscomp$0,void 0,void 0,function(){var n;return t$jscomp$4.__generator(this,
function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.zf.clearPersistence(this.sf,this.ed)];case 1:return t.sent(),e.resolve(),[3,3];case 2:return n=t.sent(),e.reject(n),[3,3];case 3:return[2]}})})}),e.promise)]})})},e$jscomp$1.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e$jscomp$1.prototype,"ud",{get:function(){return this.Xf(),this.Zf.Mf},enumerable:!1,configurable:!0}),e$jscomp$1.prototype.waitForPendingWrites=
function(){return this.Xf(),this.Zf.waitForPendingWrites()},e$jscomp$1.prototype.onSnapshotsInSync=function(t){if(this.Xf(),Vo(t))return this.Zf.bl(t);Go("Firestore.onSnapshotsInSync","function",1,t);return this.Zf.bl({next:t})},e$jscomp$1.prototype.Xf=function(){return this.Zf||this.ad(new Ro,new Oo,{F_:!1}),this.Zf},e$jscomp$1.prototype.ld=function(){return new I(this.sf,this.ed,this.sd.host,this.sd.ssl,this.sd.experimentalForceLongPolling)},e$jscomp$1.prototype.ad=function(t,e,n){var r=this.ld();
return this.Zf=new Ms(this.nd,this.Jf),this.Zf.start(r,t,e,n)},e$jscomp$1.td=function(t){if(e=t.options,"projectId",!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new x(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e;t=t.options.projectId;if(!t||"string"!=typeof t)throw new x(D.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new E(t)},Object.defineProperty(e$jscomp$1.prototype,"app",{get:function(){if(!this.Yf)throw new x(D.FAILED_PRECONDITION,
"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Yf},enumerable:!1,configurable:!0}),e$jscomp$1.prototype.collection=function(t){return qo("Firestore.collection",arguments,1),Go("Firestore.collection","non-empty string",1,t),this.Xf(),new ou(P.k(t),this,null)},e$jscomp$1.prototype.doc=function(t){return qo("Firestore.doc",arguments,1),Go("Firestore.doc","non-empty string",1,t),this.Xf(),Hs._d(P.k(t),this,null)},e$jscomp$1.prototype.collectionGroup=function(t){if(qo("Firestore.collectionGroup",
arguments,1),Go("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new x(D.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");this.Xf();var JSCompiler_temp_const=ru;var JSCompiler_inline_result=t;JSCompiler_inline_result=new an(P.$(),JSCompiler_inline_result);return new JSCompiler_temp_const(JSCompiler_inline_result,this,null)},e$jscomp$1.prototype.runTransaction=function(t){var e=this;return qo("Firestore.runTransaction",
arguments,1),Go("Firestore.runTransaction","function",1,t),this.Xf().transaction(function(n){return t(new Qs(e,n))})},e$jscomp$1.prototype.batch=function(){return this.Xf(),new Ws(this)},Object.defineProperty(e$jscomp$1,"logLevel",{get:function(){switch(a$jscomp$1.logLevel){case n$jscomp$2.LogLevel.DEBUG:return"debug";case n$jscomp$2.LogLevel.ERROR:return"error";case n$jscomp$2.LogLevel.SILENT:return"silent";case n$jscomp$2.LogLevel.WARN:return"warn";case n$jscomp$2.LogLevel.INFO:return"info";case n$jscomp$2.LogLevel.VERBOSE:return"verbose";
default:return"error"}},enumerable:!1,configurable:!0}),e$jscomp$1.setLogLevel=function(t){qo("Firestore.setLogLevel",arguments,1);Wo("setLogLevel","debug error silent warn info verbose".split(" "),1,t);a$jscomp$1.setLogLevel(t)},e$jscomp$1.prototype.fd=function(){return this.sd.timestampsInSnapshots},e$jscomp$1.prototype.dd=function(){return this.sd},e$jscomp$1}(),Qs=function(){function t$jscomp$1(t,e){this.wd=t;this.Td=e}return t$jscomp$1.prototype.get=function(t$jscomp$0){var e=this;qo("Transaction.get",
arguments,1);var n=cu("Transaction.get",t$jscomp$0,this.wd);return this.Td.Af([n.if]).then(function(t){if(!t||1!==t.length)return d$jscomp$0();t=t[0];if(t instanceof on)return new Ys(e.wd,n.if,null,!1,!1,n.rf);if(t instanceof rn)return new Ys(e.wd,n.if,t,!1,!1,n.rf);throw d$jscomp$0();})},t$jscomp$1.prototype.set=function(t,e,n){Fo("Transaction.set",arguments,2,3);var r=cu("Transaction.set",t,this.wd);n=su("Transaction.set",n);var i=fu(r.rf,e,n);i=Ns(this.wd.rd,"Transaction.set",r.if,i,null!==r.rf,
n);return this.Td.set(r.if,i),this},t$jscomp$1.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof ss?(Mo("Transaction.update",arguments,3),r=cu("Transaction.update",t,this.wd),i=Ss(this.wd.rd,"Transaction.update",r.if,e,n,o)):(qo("Transaction.update",arguments,2),r=cu("Transaction.update",t,this.wd),i=As(this.wd.rd,"Transaction.update",r.if,e)),this.Td.update(r.if,i),this},t$jscomp$1.prototype.delete=function(t){qo("Transaction.delete",
arguments,1);var e=cu("Transaction.delete",t,this.wd);return this.Td.delete(e.if),this},t$jscomp$1}(),Ws=function(){function t$jscomp$0(t){this.wd=t;this.Ed=[];this.Id=!1}return t$jscomp$0.prototype.set=function(t,e,n){Fo("WriteBatch.set",arguments,2,3);this.md();var r=cu("WriteBatch.set",t,this.wd);n=su("WriteBatch.set",n);var i=fu(r.rf,e,n);i=Ns(this.wd.rd,"WriteBatch.set",r.if,i,null!==r.rf,n);return this.Ed=this.Ed.concat(i.hf(r.if,Ce.We())),this},t$jscomp$0.prototype.update=function(t,e,n){for(var r,
i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.md(),"string"==typeof e||e instanceof ss?(Mo("WriteBatch.update",arguments,3),r=cu("WriteBatch.update",t,this.wd),i=Ss(this.wd.rd,"WriteBatch.update",r.if,e,n,o)):(qo("WriteBatch.update",arguments,2),r=cu("WriteBatch.update",t,this.wd),i=As(this.wd.rd,"WriteBatch.update",r.if,e)),this.Ed=this.Ed.concat(i.hf(r.if,Ce.exists(!0))),this},t$jscomp$0.prototype.delete=function(t){qo("WriteBatch.delete",arguments,1);this.md();var e=cu("WriteBatch.delete",
t,this.wd);return this.Ed=this.Ed.concat(new Xe(e.if,Ce.We())),this},t$jscomp$0.prototype.commit=function(){return this.md(),this.Id=!0,0<this.Ed.length?this.wd.Xf().write(this.Ed):Promise.resolve()},t$jscomp$0.prototype.md=function(){if(this.Id)throw new x(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.");},t$jscomp$0}(),Hs=function(e$jscomp$0){function n$jscomp$0(t,n,r){var i=this;return(i=e$jscomp$0.call(this,n.sf,t,r)||this).if=t,i.firestore=n,i.rf=r,
i.Zf=i.firestore.Xf(),i}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$0),n$jscomp$0._d=function(t,e,r){if(0!=t.length%2)throw new x(D.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.F()+" has "+t.length);return new n$jscomp$0(new U(t),e,r)},Object.defineProperty(n$jscomp$0.prototype,"id",{get:function(){return this.if.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(n$jscomp$0.prototype,"parent",{get:function(){return new ou(this.if.path.p(),
this.firestore,this.rf)},enumerable:!1,configurable:!0}),Object.defineProperty(n$jscomp$0.prototype,"path",{get:function(){return this.if.path.F()},enumerable:!1,configurable:!0}),n$jscomp$0.prototype.collection=function(t){if(qo("DocumentReference.collection",arguments,1),Go("DocumentReference.collection","non-empty string",1,t),!t)throw new x(D.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=P.k(t);return new ou(this.if.path.child(e),this.firestore,null)},n$jscomp$0.prototype.isEqual=
function(t){if(!(t instanceof n$jscomp$0))throw $o("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.if.isEqual(t.if)&&this.rf===t.rf},n$jscomp$0.prototype.set=function(t,e){Fo("DocumentReference.set",arguments,1,2);e=su("DocumentReference.set",e);var n=fu(this.rf,t,e);n=Ns(this.firestore.rd,"DocumentReference.set",this.if,n,null!==this.rf,e);return this.Zf.write(n.hf(this.if,Ce.We()))},n$jscomp$0.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-
2]=arguments[i];return"string"==typeof t||t instanceof ss?(Mo("DocumentReference.update",arguments,2),n=Ss(this.firestore.rd,"DocumentReference.update",this.if,t,e,r)):(qo("DocumentReference.update",arguments,1),n=As(this.firestore.rd,"DocumentReference.update",this.if,t)),this.Zf.write(n.hf(this.if,Ce.exists(!0)))},n$jscomp$0.prototype.delete=function(){return qo("DocumentReference.delete",arguments,0),this.Zf.write([new Xe(this.if,Ce.We())])},n$jscomp$0.prototype.onSnapshot=function(){for(var t$jscomp$0,
e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Fo("DocumentReference.onSnapshot",arguments,1,4);o={includeMetadataChanges:!1};var u=0;"object"!=typeof i[u]||Vo(i[u])||(Xo("DocumentReference.onSnapshot",o=i[u],["includeMetadataChanges"]),zo("DocumentReference.onSnapshot","boolean","includeMetadataChanges",o.includeMetadataChanges),u++);o={includeMetadataChanges:o.includeMetadataChanges};if(Vo(i[u])){var c=i[u];i[u]=null===(t$jscomp$0=c.next)||void 0===t$jscomp$0?void 0:t$jscomp$0.bind(c);
i[u+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c);i[u+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else Go("DocumentReference.onSnapshot","function",u,i[u]),jo("DocumentReference.onSnapshot","function",u+1,i[u+1]),jo("DocumentReference.onSnapshot","function",u+2,i[u+2]);t$jscomp$0={next:function(t){i[u]&&i[u](r.Ad(t))},error:i[u+1],complete:i[u+2]};return this.Zf.listen(new an(this.if.path),o,t$jscomp$0)},n$jscomp$0.prototype.get=function(t$jscomp$0){var e=this;Fo("DocumentReference.get",
arguments,0,1);au("DocumentReference.get",t$jscomp$0);var n=this.firestore.Xf();return t$jscomp$0&&"cache"===t$jscomp$0.source?n.kf(this.if).then(function(t){return new Ys(e.firestore,e.if,t,!0,t instanceof rn&&t.Ge,e.rf)}):n.$f(this.if,t$jscomp$0).then(function(t){return e.Ad(t)})},n$jscomp$0.prototype.withConverter=function(t){return new n$jscomp$0(this.if,this.firestore,t)},n$jscomp$0.prototype.Ad=function(t){var e=t.docs.get(this.if);return new Ys(this.firestore,this.if,e,t.fromCache,t.hasPendingWrites,
this.rf)},n$jscomp$0}(ws),Ks=function(){function t$jscomp$0(t,e){this.hasPendingWrites=t;this.fromCache=e}return t$jscomp$0.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t$jscomp$0}(),Ys=function(){function t$jscomp$1(t,e,n,r,i,o){this.wd=t;this.if=e;this.Rd=n;this.Pd=r;this.gd=i;this.rf=o}return t$jscomp$1.prototype.data=function(t$jscomp$0){var e=this;if(Fo("DocumentSnapshot.data",arguments,0,1),t$jscomp$0=uu("DocumentSnapshot.data",
t$jscomp$0),this.Rd){if(this.rf){var n=new Zs(this.wd,this.if,this.Rd,this.Pd,this.gd,null);return this.rf.fromFirestore(n,t$jscomp$0)}return(new Gs(this.wd.sf,this.wd.fd(),t$jscomp$0.serverTimestamps||"none",function(t){return new Hs(t,e.wd,null)})).Bf(this.Rd.tn())}},t$jscomp$1.prototype.get=function(t$jscomp$0,e){var n=this;if(Fo("DocumentSnapshot.get",arguments,1,2),e=uu("DocumentSnapshot.get",e),this.Rd){var r=this.Rd.data().field(Ps("DocumentSnapshot.get",t$jscomp$0,this.if));if(null!==r)return(new Gs(this.wd.sf,
this.wd.fd(),e.serverTimestamps||"none",function(t){return new Hs(t,n.wd,n.rf)})).Bf(r)}},Object.defineProperty(t$jscomp$1.prototype,"id",{get:function(){return this.if.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$1.prototype,"ref",{get:function(){return new Hs(this.if,this.wd,this.rf)},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$1.prototype,"exists",{get:function(){return null!==this.Rd},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$1.prototype,
"metadata",{get:function(){return new Ks(this.gd,this.Pd)},enumerable:!1,configurable:!0}),t$jscomp$1.prototype.isEqual=function(e){if(!(e instanceof t$jscomp$1))throw $o("isEqual","DocumentSnapshot",1,e);return this.wd===e.wd&&this.Pd===e.Pd&&this.if.isEqual(e.if)&&(null===this.Rd?null===e.Rd:this.Rd.isEqual(e.Rd))&&this.rf===e.rf},t$jscomp$1}(),Zs=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t$jscomp$4.__extends(n,e),n.prototype.data=function(t){return e.prototype.data.call(this,
t)},n}(Ys),ru=function(){function e$jscomp$1(t,e,n){this.Vd=t;this.firestore=e;this.rf=n}return e$jscomp$1.prototype.where=function(t,n,r){qo("Query.where",arguments,3);Zo("Query.where",3,r);var i="not-in"===n||"!\x3d"===n?n:Wo("Query.where","\x3c \x3c\x3d \x3d\x3d \x3e\x3d \x3e array-contains in array-contains-any".split(" "),2,n);var o=Ps("Query.where",t);o=Xs(this.Vd,"Query.where",this.firestore.rd,this.firestore.sf,o,i,r);i=this.Vd;o=i.filters.concat([o]);i=new an(i.path,i.collectionGroup,i.en.slice(),
o,i.limit,i.nn,i.startAt,i.endAt);return new e$jscomp$1(i,this.firestore,this.rf)},e$jscomp$1.prototype.orderBy=function(t$jscomp$0,n){if(Fo("Query.orderBy",arguments,1,2),jo("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)var r="asc";else{if("desc"!==n)throw new x(D.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Ps("Query.orderBy",t$jscomp$0),t=this.Vd;if(null!==t.startAt)throw new x(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");
if(null!==t.endAt)throw new x(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");i=new Vn(i,r);null===t.cn()&&(r=t.ln(),null!==r&&eu(t,r,i.field));t=this.Vd;i=t.en.concat([i]);t=new an(t.path,t.collectionGroup,i,t.filters.slice(),t.limit,t.nn,t.startAt,t.endAt);return new e$jscomp$1(t,this.firestore,this.rf)},e$jscomp$1.prototype.limit=function(t){return qo("Query.limit",arguments,1),Go("Query.limit","number",1,t),Jo("Query.limit",1,t),new e$jscomp$1(dn(this.Vd,
t,"F"),this.firestore,this.rf)},e$jscomp$1.prototype.limitToLast=function(t){return qo("Query.limitToLast",arguments,1),Go("Query.limitToLast","number",1,t),Jo("Query.limitToLast",1,t),new e$jscomp$1(dn(this.Vd,t,"L"),this.firestore,this.rf)},e$jscomp$1.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Mo("Query.startAt",arguments,1);n=this.yd("Query.startAt",t,n,!0);return new e$jscomp$1(yn(this.Vd,n),this.firestore,this.rf)},e$jscomp$1.prototype.startAfter=
function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Mo("Query.startAfter",arguments,1);n=this.yd("Query.startAfter",t,n,!1);return new e$jscomp$1(yn(this.Vd,n),this.firestore,this.rf)},e$jscomp$1.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Mo("Query.endBefore",arguments,1);n=this.yd("Query.endBefore",t,n,!0);return new e$jscomp$1(vn(this.Vd,n),this.firestore,this.rf)},e$jscomp$1.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-
1]=arguments[r];Mo("Query.endAt",arguments,1);n=this.yd("Query.endAt",t,n,!1);return new e$jscomp$1(vn(this.Vd,n),this.firestore,this.rf)},e$jscomp$1.prototype.isEqual=function(t){if(!(t instanceof e$jscomp$1))throw $o("isEqual","Query",1,t);return this.firestore===t.firestore&&gn(this.Vd,t.Vd)&&this.rf===t.rf},e$jscomp$1.prototype.withConverter=function(t){return new e$jscomp$1(this.Vd,this.firestore,t)},e$jscomp$1.prototype.yd=function(e$jscomp$0,n$jscomp$0,r$jscomp$0,i$jscomp$0){if(Zo(e$jscomp$0,
1,n$jscomp$0),n$jscomp$0 instanceof Ys)return qo(e$jscomp$0,t$jscomp$4.__spreadArrays([n$jscomp$0],r$jscomp$0),1),function(t,e,n,r,i){if(!r)throw new x(D.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");n=[];var s=0;for(t=ln(t);s<t.length;s++){var a=t[s];if(a.field.M())n.push(Ct(e,r.key));else{var c=r.field(a.field);if(Nt(c))throw new x(D.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');
if(null===c)throw e=a.field.F(),new x(D.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+e+"' (used as the orderBy) does not exist.");n.push(c)}}return new Ln(n,i)}(this.Vd,this.firestore.sf,e$jscomp$0,n$jscomp$0.Rd,i$jscomp$0);n$jscomp$0=[n$jscomp$0].concat(r$jscomp$0);return function(t,e,n,r,i,o){var s=t.en;if(i.length>s.length)throw new x(D.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");
for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.M()){if("string"!=typeof c)throw new x(D.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(null===t.collectionGroup&&-1!==c.indexOf("/"))throw new x(D.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");c=t.path.child(P.k(c));if(!U.j(c))throw new x(D.INVALID_ARGUMENT,
"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+c+"' is not because it contains an odd number of segments.");c=new U(c);u.push(Ct(e,c))}else c=Ds(n,r,c),u.push(c)}return new Ln(u,o)}(this.Vd,this.firestore.sf,this.firestore.rd,e$jscomp$0,n$jscomp$0,i$jscomp$0)},e$jscomp$1.prototype.onSnapshot=function(){for(var t$jscomp$0,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Fo("Query.onSnapshot",
arguments,1,4);o={};var u=0;if("object"!=typeof i[u]||Vo(i[u])||(Xo("Query.onSnapshot",o=i[u],["includeMetadataChanges"]),zo("Query.onSnapshot","boolean","includeMetadataChanges",o.includeMetadataChanges),u++),Vo(i[u])){var a=i[u];i[u]=null===(t$jscomp$0=a.next)||void 0===t$jscomp$0?void 0:t$jscomp$0.bind(a);i[u+1]=null===(e=a.error)||void 0===e?void 0:e.bind(a);i[u+2]=null===(n=a.complete)||void 0===n?void 0:n.bind(a)}else Go("Query.onSnapshot","function",u,i[u]),jo("Query.onSnapshot","function",
u+1,i[u+1]),jo("Query.onSnapshot","function",u+2,i[u+2]);t$jscomp$0={next:function(t){i[u]&&i[u](new iu(r.firestore,r.Vd,t,r.rf))},error:i[u+1],complete:i[u+2]};return nu(this.Vd),this.firestore.Xf().listen(this.Vd,o,t$jscomp$0)},e$jscomp$1.prototype.get=function(t$jscomp$0){var e=this;Fo("Query.get",arguments,0,1);au("Query.get",t$jscomp$0);nu(this.Vd);var n=this.firestore.Xf();return(t$jscomp$0&&"cache"===t$jscomp$0.source?n.xf(this.Vd):n.Of(this.Vd,t$jscomp$0)).then(function(t){return new iu(e.firestore,
e.Vd,t,e.rf)})},e$jscomp$1}(),iu=function(){function t$jscomp$2(t,e,n,r){this.wd=t;this.pd=e;this.bd=n;this.rf=r;this.Sd=this.vd=null;this.metadata=new Ks(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t$jscomp$2.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$2.prototype,"empty",{get:function(){return this.bd.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(t$jscomp$2.prototype,
"size",{get:function(){return this.bd.docs.size},enumerable:!1,configurable:!0}),t$jscomp$2.prototype.forEach=function(t,e){var n=this;Fo("QuerySnapshot.forEach",arguments,1,2);Go("QuerySnapshot.forEach","function",1,t);this.bd.docs.forEach(function(r){t.call(e,n.Dd(r,n.metadata.fromCache,n.bd.qt.has(r.key)))})},Object.defineProperty(t$jscomp$2.prototype,"query",{get:function(){return new ru(this.pd,this.wd,this.rf)},enumerable:!1,configurable:!0}),t$jscomp$2.prototype.docChanges=function(t$jscomp$1){t$jscomp$1&&
(Xo("QuerySnapshot.docChanges",t$jscomp$1,["includeMetadataChanges"]),zo("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t$jscomp$1.includeMetadataChanges));if((t$jscomp$1=!(!t$jscomp$1||!t$jscomp$1.includeMetadataChanges))&&this.bd.Ut)throw new x(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.vd&&this.Sd===t$jscomp$1||(this.vd=function(t$jscomp$0,e$jscomp$0,n){if(t$jscomp$0.Lt._()){var r$jscomp$0=
0;return t$jscomp$0.docChanges.map(function(e){var i=n(e.doc,t$jscomp$0.fromCache,t$jscomp$0.qt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r$jscomp$0++}})}var i$jscomp$0=t$jscomp$0.Lt;return t$jscomp$0.docChanges.filter(function(t){return e$jscomp$0||3!==t.type}).map(function(e){var r=n(e.doc,t$jscomp$0.fromCache,t$jscomp$0.qt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i$jscomp$0.indexOf(e.doc.key),i$jscomp$0=i$jscomp$0.delete(e.doc.key)),1!==e.type&&(s=(i$jscomp$0=
i$jscomp$0.add(e.doc)).indexOf(e.doc.key)),{type:hu(e.type),doc:r,oldIndex:o,newIndex:s}})}(this.bd,t$jscomp$1,this.Dd.bind(this)),this.Sd=t$jscomp$1),this.vd},t$jscomp$2.prototype.isEqual=function(e){if(!(e instanceof t$jscomp$2))throw $o("isEqual","QuerySnapshot",1,e);return this.wd===e.wd&&gn(this.pd,e.pd)&&this.bd.isEqual(e.bd)&&this.rf===e.rf},t$jscomp$2.prototype.Dd=function(t,e,n){return new Zs(this.wd,t.key,t,e,n,this.rf)},t$jscomp$2}(),ou=function(e$jscomp$0){function n$jscomp$0(t,n,r){if((n=
e$jscomp$0.call(this,new an(t),n,r)||this).Cd=t,1!=t.length%2)throw new x(D.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.F()+" has "+t.length);return n}return t$jscomp$4.__extends(n$jscomp$0,e$jscomp$0),Object.defineProperty(n$jscomp$0.prototype,"id",{get:function(){return this.Vd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(n$jscomp$0.prototype,"parent",{get:function(){var t=this.Vd.path.p();return t._()?null:
new Hs(new U(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(n$jscomp$0.prototype,"path",{get:function(){return this.Vd.path.F()},enumerable:!1,configurable:!0}),n$jscomp$0.prototype.doc=function(t){Fo("CollectionReference.doc",arguments,0,1);0===arguments.length&&(t=m.t());Go("CollectionReference.doc","non-empty string",1,t);var e=P.k(t);return Hs._d(this.Vd.path.child(e),this.firestore,this.rf)},n$jscomp$0.prototype.add=function(t){qo("CollectionReference.add",arguments,
1);Go("CollectionReference.add","object",1,this.rf?this.rf.toFirestore(t):t);var e=this.doc();return e.set(t).then(function(){return e})},n$jscomp$0.prototype.withConverter=function(t){return new n$jscomp$0(this.Cd,this.firestore,t)},n$jscomp$0}(ru),lu={Firestore:zs,GeoPoint:gs,Timestamp:k,Blob:is,Transaction:Qs,WriteBatch:Ws,DocumentReference:Hs,DocumentSnapshot:Ys,Query:ru,QueryDocumentSnapshot:Zs,QuerySnapshot:iu,CollectionReference:ou,FieldPath:ss,FieldValue:ys,setLogLevel:zs.setLogLevel,CACHE_SIZE_UNLIMITED:js};
pu(u$jscomp$1.default);exports.__PRIVATE_registerFirestore=pu}
//# sourceMappingURL=module$node_modules$$firebase$firestore$dist$index_cjs.js.map
