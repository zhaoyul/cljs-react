{
"version":3,
"file":"module$node_modules$$firebase$messaging$dist$index_cjs.js",
"lineCount":63,
"mappings":"AAAAA,cAAA,CAAe,sDAAf,CAA2E,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAsHnHC,QAASA,cAAa,CAACC,KAAD,CAAQ,CACtBC,KAAAA,CAAa,IAAIC,UAAJ,CAAeF,KAAf,CAEjB,OADmBG,KAAAC,CAAKC,MAAA,CAAOC,YAAP,CAAoBC,KAApB,CAA0BF,MAA1B,CAAkCG,KAAA,CAAMC,QAAN,CAAeR,KAAf,CAAlC,CAALG,CACZ,CAAaM,OAAb,CAAqB,IAArB,CAA2B,EAA3B,CAAA,CAA+BA,OAA/B,CAAuC,KAAvC,CAA8C,GAA9C,CAAA,CAAmDA,OAAnD,CAA2D,KAA3D,CAAkE,GAAlE,CAHmB,CAK9BC,QAASA,cAAa,CAACP,YAAD,CAAe,CACjC,IAAIQ,QAAUC,MAAA,CAAIA,MAAJ,EAAY,CAAZ,CAAiBT,YAAjB,CAA8BU,MAA9B,CAAuC,CAAvC,EAA6C,CAA7C,CACVC,aAAAA,CAAS,CAACX,YAAD,CAAgBQ,OAAhB,EACRF,OADQ,CACA,KADA,CACO,GADP,CAAA,CAERA,OAFQ,CAEA,IAFA,CAEM,GAFN,CAGTM,aAAAA,CAAUC,IAAA,CAAKF,YAAL,CACVG,QAAAA,CAAc,IAAIhB,UAAJ,CAAec,YAAf,CAAuBF,MAAvB,CAClB;IAAK,IAAIK,EAAI,CAAb,CAAgBA,CAAhB,CAAoBH,YAApB,CAA4BF,MAA5B,CAAoC,EAAEK,CAAtC,CACID,OAAA,CAAYC,CAAZ,CAAA,CAAiBH,YAAA,CAAQI,UAAR,CAAmBD,CAAnB,CAErB,OAAOD,QAV0B,CAoCrCG,QAASA,mBAAkB,CAACC,QAAD,CAAW,CAClC,MAAOd,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDC,SADiD,CACtCC,OADsC,CAC7BC,YAD6B,CACfC,WADe,CAEjDC,MAAQ,IACZ,OAAOpB,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,WAAD,CAAK,CACzC,OAAQA,WAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CACI,MAAM,WAAN,EAAqBC,UAArB,CACO,CAAC,CAAD,CAAcA,SAAA,CAAUR,SAAV,EAAd,CADP,CAAwC,CAAC,CAAD,CAAc,CAAd,CAE5C,MAAK,CAAL,CACIA,SAAA,CAAYM,WAAA,CAAGG,IAAH,EACZR,QAAA,CAAUD,SAAA,CAAUU,GAAV,CAAc,QAAS,CAACP,EAAD,CAAK,CAAE,MAAOA,GAAP,CAAUQ,IAAZ,CAA5B,CACV,IAAI,CAACV,OAAA,CAAQW,QAAR,CAnBPC,sBAmBO,CAAL,CAEI,MAAO,CAAC,CAAD;AAAe,IAAf,CAEXP,YAAA,CAAGC,KAAH,CAAW,CACf,MAAK,CAAL,CAEI,MADAL,aACO,CADQ,IACR,CAAA,CAAC,CAAD,CAAcY,GAAA,CAAIC,MAAJ,CA1BvBF,sBA0BuB,CArBpBG,CAqBoB,CAAwC,QAAS,CAACb,EAAD,CAAK,CAAE,MAAOnB,MAAA,CAAMe,SAAN,CAAgBK,KAAhB,CAAuB,IAAK,EAA5B,CAA+B,IAAK,EAApC,CAAuC,QAAS,EAAG,CAAA,IAC3Ha,WAD2H,CAC9GC,KAD8G,CACvGC,UADuG,CAE3Hb,EACJ,OAAOtB,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACe,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWb,KAAX,EACI,KAAK,CAAL,CAKI,GAJoB,CAIpB,CAJIJ,EAIJ,CAJOkB,UAIP,EAAI,CAAClB,EAAA,CAAGmB,gBAAH,CAAoBC,QAApB,CA9BjBC,wBA8BiB,CAAL,CAEI,MAAO,CAAC,CAAD,CAEXP,YAAA,CAAcd,EAAA,CAAGsB,WAAH,CAAeR,WAAf,CAlC1BO,wBAkC0B,CACd,OAAO,CAAC,CAAD,CAAcP,WAAA,CAAYS,KAAZ,CAAkB,aAAlB,CAAA,CAAiCC,GAAjC,CAAqC7B,QAArC,CAAd,CACX,MAAK,CAAL,CAEI,MADAoB,MACO,CADCE,EAAA,CAAGX,IAAH,EACD;AAAA,CAAC,CAAD,CAAcQ,WAAA,CAAYW,KAAZ,EAAd,CACX,MAAK,CAAL,CACIR,EAAA,CAAGX,IAAH,EACA,IAAI,CAACS,KAAL,CAEI,MAAO,CAAC,CAAD,CAEX,IAAsB,CAAtB,GAAIf,EAAJ,CAAOkB,UAAP,CAAyB,CACrBF,UAAA,CAAaD,KACb,IAAI,CAACC,UAAD,CAAYU,IAAhB,EAAwB,CAACV,UAAD,CAAYW,MAApC,EAA8C,CAACX,UAAD,CAAYY,QAA1D,CACI,MAAO,CAAC,CAAD,CAEX7B,aAAA,CAAe,CACX8B,MAAOb,UAAPa,CAAkBC,QADP,CAEXC,WAA6C,IAAjC,IAAC5B,EAAD,CAAMa,UAAN,CAAiBe,UAAjB,GAAgD,IAAK,EAArD,GAAyC5B,EAAzC,CAAyDA,EAAzD,CAA8D6B,IAAA,CAAKC,GAAL,EAF/D,CAGXC,oBAAqB,CACjBR,KAAMV,UAANU,CAAiBA,IADA,CAEjBC,OAAQX,UAARW,CAAmBA,MAFF,CAGjBC,SAAUZ,UAAVY,CAAqBA,QAHJ,CAIjBO,QAASnB,UAATmB,CAAoBA,OAJH,CAKjBC,SAAyC,QAA/B,GAAA,MAAOpB,WAAP,CAAkBoB,QAAlB,CACJpB,UADI,CACOoB,QADP,CAEJhE,aAAA,CAAc4C,UAAd,CAAyBoB,QAAzB,CAPW,CAHV,CALM,CAAzB,IAmB2B,EAAtB;AAAIpC,EAAJ,CAAOkB,UAAP,EACDF,UACA,CADaD,KACb,CAAAhB,YAAA,CAAe,CACX8B,MAAOb,UAAPa,CAAkBC,QADP,CAEXC,WAAYf,UAAZe,CAAuBA,UAFZ,CAGXG,oBAAqB,CACjBR,KAAMtD,aAAA,CAAc4C,UAAd,CAAyBU,IAAzB,CADW,CAEjBC,OAAQvD,aAAA,CAAc4C,UAAd,CAAyBW,MAAzB,CAFS,CAGjBC,SAAUZ,UAAVY,CAAqBA,QAHJ,CAIjBO,QAASnB,UAATmB,CAAoBA,OAJH,CAKjBC,SAAUhE,aAAA,CAAc4C,UAAd,CAAyBoB,QAAzB,CALO,CAHV,CAFd,EAcsB,CAdtB,GAcIpC,EAdJ,CAcOkB,UAdP,GAeDF,UACA,CADaD,KACb,CAAAhB,YAAA,CAAe,CACX8B,MAAOb,UAAPa,CAAkBC,QADP,CAEXC,WAAYf,UAAZe,CAAuBA,UAFZ,CAGXG,oBAAqB,CACjBR,KAAMtD,aAAA,CAAc4C,UAAd,CAAyBU,IAAzB,CADW,CAEjBC,OAAQvD,aAAA,CAAc4C,UAAd,CAAyBW,MAAzB,CAFS;AAGjBC,SAAUZ,UAAVY,CAAqBA,QAHJ,CAIjBO,QAASnB,UAATmB,CAAoBA,OAJH,CAKjBC,SAAUhE,aAAA,CAAc4C,UAAd,CAAyBoB,QAAzB,CALO,CAHV,CAhBd,CA4BL,OAAO,CAAC,CAAD,CApEf,CADyC,CAAtC,CAHwH,CAAnD,CAAT,CAAtD,CAAd,CA4EX,MAAK,CAAL,CAII,MAHApC,YAGO,CAHFG,WAAA,CAAGG,IAAH,EAGE,CAFPN,WAAA,CAAGqC,KAAH,EAEO,CAAA,CAAC,CAAD,CAAc1B,GAAA,CAAI2B,QAAJ,CA1GvB5B,sBA0GuB,CAAd,CACX,MAAK,CAAL,CAGI,MADAP,YAAA,CAAGG,IAAH,EACO,CAAA,CAAC,CAAD,CAAcK,GAAA,CAAI2B,QAAJ,CAAa,sBAAb,CAAd,CACX,MAAK,CAAL,CAEI,MADAnC,YAAA,CAAGG,IAAH,EACO,CAAA,CAAC,CAAD,CAAcK,GAAA,CAAI2B,QAAJ,CAAa,WAAb,CAAd,CACX,MAAK,CAAL,CAEI,MADAnC,YAAA,CAAGG,IAAH,EACO,CAAA,CAAC,CAAD,CAAeiC,iBAAA,CAAkBxC,YAAlB,CAAA,CAAkCA,YAAlC,CAAiD,IAAhE,CAxGf,CADyC,CAAtC,CAH8C,CAAlD,CAD2B,CAkHtCwC,QAASA,kBAAiB,CAACxC,YAAD,CAAe,CACrC,GAAI,CAACA,YAAL;AAAqB,CAACA,YAAD,CAAcmC,mBAAnC,CACI,MAAO,CAAA,CAEX,KAAIA,oBAAsBnC,YAAtBmC,CAAmCA,mBACvC,OAA2C,QAA3C,GAAQ,MAAOnC,aAAP,CAAoBgC,UAA5B,EAC8B,CAD9B,CACIhC,YADJ,CACiBgC,UADjB,EAEkC,QAFlC,GAEI,MAAOhC,aAAP,CAAoB8B,KAFxB,EAGgC,CAHhC,CAGI9B,YAHJ,CAGiB8B,KAHjB,CAGuB1C,MAHvB,EAIwC,QAJxC,GAII,MAAO+C,oBAAP,CAA2BR,IAJ/B,EAKsC,CALtC,CAKIQ,mBALJ,CAKwBR,IALxB,CAK6BvC,MAL7B,EAM0C,QAN1C,GAMI,MAAO+C,oBAAP,CAA2BP,MAN/B,EAOwC,CAPxC,CAOIO,mBAPJ,CAOwBP,MAPxB,CAO+BxC,MAP/B,EAQ4C,QAR5C,GAQI,MAAO+C,oBAAP,CAA2BN,QAR/B,EAS0C,CAT1C,CASIM,mBATJ,CASwBN,QATxB,CASiCzC,MATjC,EAU2C,QAV3C;AAUI,MAAO+C,oBAAP,CAA2BC,OAV/B,EAWyC,CAXzC,CAWID,mBAXJ,CAWwBC,OAXxB,CAWgChD,MAXhC,EAY4C,QAZ5C,GAYI,MAAO+C,oBAAP,CAA2BE,QAZ/B,EAa0C,CAb1C,CAaIF,mBAbJ,CAawBE,QAbxB,CAaiCjD,MAlBI,CA0CzCqD,QAASA,aAAY,EAAG,CACfC,SAAL,GACIA,SADJ,CACgB9B,GAAA,CAAIC,MAAJ,CANA8B,6BAMA,CALGC,CAKH,CAA4C,QAAS,CAACC,SAAD,CAAY,CAKzE,OAAQA,SAAR,CAAkB1B,UAAlB,EACI,KAAK,CAAL,CACI0B,SAAA,CAAUC,iBAAV,CAXIC,0BAWJ,CAFR,CALyE,CAAjE,CADhB,CAYA,OAAOL,UAba,CAgBxBM,QAASA,MAAK,CAACC,oBAAD,CAAuB,CACjC,MAAOnE,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDqD,GADiD,CAC5CjD,EAD4C,CACxCD,YADwC,CAC1BmD,eAC3B;MAAOrE,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CAEI,MADA6C,IACO,CADMD,oBACN,CAuEJG,SAvEI,CAwENC,KAxEM,CAAA,CAAC,CAAD,CAAcZ,YAAA,EAAd,CACX,MAAK,CAAL,CAEI,MADAxC,GACO,CADFG,EAAA,CAAGG,IAAH,EACE,CAAA,CAAC,CAAD,CAAcN,EAAA,CACZsB,WADY,CA5BjBwB,0BA4BiB,CAAA,CAEZhC,WAFY,CA5BjBgC,0BA4BiB,CAAA,CAGZtB,GAHY,CAGRyB,GAHQ,CAAd,CAIX,MAAK,CAAL,CAEI,MAAA,CADAlD,YACA,CADeI,EAAA,CAAGG,IAAH,EACf,EACO,CAAC,CAAD,CAAeP,YAAf,CADP,CAA0B,CAAC,CAAD,CAAc,CAAd,CAE9B,MAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAcL,kBAAA,CAAmBsD,oBAAnB,CAAwCG,SAAxC,CAAkDxD,QAAlD,CAAd,CACf,MAAK,CAAL,CAEI,MAAA,CADAuD,eACA,CADkB/C,EAAA,CAAGG,IAAH,EAClB,EACO,CAAC,CAAD,CAAc+C,KAAA,CAAML,oBAAN,CAA4BE,eAA5B,CAAd,CADP,CAA6B,CAAC,CAAD,CAAc,CAAd,CAEjC,MAAK,CAAL,CAEI,MADA/C,GAAA,CAAGG,IAAH,EACO;AAAA,CAAC,CAAD,CAAe4C,eAAf,CACX,MAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAtBnB,CADyC,CAAtC,CAF8C,CAAlD,CAD0B,CAgCrCG,QAASA,MAAK,CAACL,oBAAD,CAAuBjD,YAAvB,CAAqC,CAC/C,MAAOlB,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDqD,GADiD,CAC5CjD,EAD4C,CACxCsD,EACb,OAAOzE,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CAEI,MADA6C,IACO,CADMD,oBACN,CAuCJG,SAvCI,CAwCNC,KAxCM,CAAA,CAAC,CAAD,CAAcZ,YAAA,EAAd,CACX,MAAK,CAAL,CAGI,MAFAxC,GAEO,CAFFG,EAAA,CAAGG,IAAH,EAEE,CADPgD,EACO,CADFtD,EAAA,CAAGsB,WAAH,CA5DDwB,0BA4DC,CAAkC,WAAlC,CACE,CAAA,CAAC,CAAD,CAAcQ,EAAA,CAAGxC,WAAH,CA7DjBgC,0BA6DiB,CAAA,CAAkCS,GAAlC,CAAsCxD,YAAtC,CAAoDkD,GAApD,CAAd,CACX,MAAK,CAAL,CAEI,MADA9C,GAAA,CAAGG,IAAH,EACO,CAAA,CAAC,CAAD,CAAcgD,EAAd,CAAiBE,QAAjB,CACX,MAAK,CAAL,CAEI,MADArD,GAAA,CAAGG,IAAH,EACO;AAAA,CAAC,CAAD,CAAeP,YAAf,CAbf,CADyC,CAAtC,CAF8C,CAAlD,CADwC,CAuBnD0D,QAASA,SAAQ,CAACT,oBAAD,CAAuB,CACpC,MAAOnE,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDqD,GADiD,CAC5CjD,EAD4C,CACxCsD,EACb,OAAOzE,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CAEI,MADA6C,IACO,CADMD,oBACN,CAgBJG,SAhBI,CAiBNC,KAjBM,CAAA,CAAC,CAAD,CAAcZ,YAAA,EAAd,CACX,MAAK,CAAL,CAGI,MAFAxC,GAEO,CAFFG,EAAA,CAAGG,IAAH,EAEE,CADPgD,EACO,CADFtD,EAAA,CAAGsB,WAAH,CAnFDwB,0BAmFC,CAAkC,WAAlC,CACE,CAAA,CAAC,CAAD,CAAcQ,EAAA,CAAGxC,WAAH,CApFjBgC,0BAoFiB,CAAA,CAAkCY,MAAlC,CAAyCT,GAAzC,CAAd,CACX,MAAK,CAAL,CAEI,MADA9C,GAAA,CAAGG,IAAH,EACO,CAAA,CAAC,CAAD,CAAcgD,EAAd,CAAiBE,QAAjB,CACX,MAAK,CAAL,CAEI,MADArD,GAAA,CAAGG,IAAH,EACO,CAAA,CAAC,CAAD,CAbf,CADyC,CAAtC,CAF8C,CAAlD,CAD6B,CA2CxCqD,QAASA,gBAAe,CAACX,oBAAD;AAAuBd,mBAAvB,CAA4C,CAChE,MAAOrD,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDgE,OADiD,CACxCC,IADwC,CAClCC,gBADkC,CAChBC,YADgB,CACFC,QADE,CACQC,KADR,CACeC,OACpE,OAAOrF,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAc+D,UAAA,CAAWnB,oBAAX,CAAd,CACf,MAAK,CAAL,CACIY,OAOA,CAPUzD,EAAA,CAAGG,IAAH,EAOV,CANAuD,IAMA,CANOO,OAAA,CAAQlC,mBAAR,CAMP,CALA4B,gBAKA,CALmB,CACfO,OAAQ,MADO,CAEfT,QAASA,OAFM,CAGfC,KAAMS,IAAA,CAAKC,SAAL,CAAeV,IAAf,CAHS,CAKnB,CAAA1D,EAAA,CAAGC,KAAH,CAAW,CACf,MAAK,CAAL,CAEI,MADAD,GAAA,CAAGqE,IAAH,CAAQC,IAAR,CAAa,CAAC,CAAD,CAAI,CAAJ,CAAA,CAAS,CAAT,CAAb,CACO,CAAA,CAAC,CAAD,CAAcC,KAAA,CAAMC,WAAA,CAAY3B,oBAAZ,CAAiCG,SAAjC,CAAN,CAAmDW,gBAAnD,CAAd,CACX;KAAK,CAAL,CAEI,MADAE,SACO,CADI7D,EAAA,CAAGG,IAAH,EACJ,CAAA,CAAC,CAAD,CAAc0D,QAAA,CAASY,IAAT,EAAd,CACX,MAAK,CAAL,CAEI,MADAb,aACO,CADQ5D,EAAA,CAAGG,IAAH,EACR,CAAA,CAAC,CAAD,CAAc,CAAd,CACX,MAAK,CAAL,CAEI,KADA2D,MACM,CADE9D,EAAA,CAAGG,IAAH,EACF,CAAAuE,aAAA,CAAcC,MAAd,CAAqB,wBAArB,CAA4E,CAC9EC,UAAWd,KADmE,CAA5E,CAAN,CAGJ,KAAK,CAAL,CACI,GAAIF,YAAJ,CAAiBiB,KAAjB,CAEI,KADAd,QACM,CADIH,YACJ,CADiBiB,KACjB,CADuBd,OACvB,CAAAW,aAAA,CAAcC,MAAd,CAAqB,wBAArB,CAA4E,CAC9EC,UAAWb,OADmE,CAA5E,CAAN,CAIJ,GAAI,CAACH,YAAD,CAAclC,KAAlB,CACI,KAAMgD,cAAA,CAAcC,MAAd,CAAqB,0BAArB,CAAN,CAEJ,MAAO,CAAC,CAAD,CAAef,YAAf,CAA4BlC,KAA5B,CAnCf,CADyC,CAAtC,CAF8C,CAAlD,CADyD,CA4CpEoD,QAASA,mBAAkB,CAACjC,oBAAD,CAAuBjD,YAAvB,CAAqC,CAC5D,MAAOlB,MAAA,CAAMe,SAAN,CAAgB,IAAhB;AAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDgE,OADiD,CACxCC,IADwC,CAClCqB,aADkC,CACnBnB,YADmB,CACLC,QADK,CACKmB,KADL,CACYjB,OACjE,OAAOrF,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAc+D,UAAA,CAAWnB,oBAAX,CAAd,CACf,MAAK,CAAL,CACIY,OAOA,CAPUzD,EAAA,CAAGG,IAAH,EAOV,CANAuD,IAMA,CANOO,OAAA,CAAQrE,YAAR,CAAqBmC,mBAArB,CAMP,CALAgD,aAKA,CALgB,CACZb,OAAQ,OADI,CAEZT,QAASA,OAFG,CAGZC,KAAMS,IAAA,CAAKC,SAAL,CAAeV,IAAf,CAHM,CAKhB,CAAA1D,EAAA,CAAGC,KAAH,CAAW,CACf,MAAK,CAAL,CAEI,MADAD,GAAA,CAAGqE,IAAH,CAAQC,IAAR,CAAa,CAAC,CAAD,CAAI,CAAJ,CAAA,CAAS,CAAT,CAAb,CACO,CAAA,CAAC,CAAD,CAAcC,KAAA,CAAMC,WAAA,CAAY3B,oBAAZ,CAAiCG,SAAjC,CAAN,CAAoD,GAApD,CAA0DpD,YAA1D,CAAuE8B,KAAvE,CAA8EqD,aAA9E,CAAd,CACX,MAAK,CAAL,CAEI,MADAlB,SACO;AADI7D,EAAA,CAAGG,IAAH,EACJ,CAAA,CAAC,CAAD,CAAc0D,QAAA,CAASY,IAAT,EAAd,CACX,MAAK,CAAL,CAEI,MADAb,aACO,CADQ5D,EAAA,CAAGG,IAAH,EACR,CAAA,CAAC,CAAD,CAAc,CAAd,CACX,MAAK,CAAL,CAEI,KADA6E,MACM,CADEhF,EAAA,CAAGG,IAAH,EACF,CAAAuE,aAAA,CAAcC,MAAd,CAAqB,qBAArB,CAAsE,CACxEC,UAAWI,KAD6D,CAAtE,CAAN,CAGJ,KAAK,CAAL,CACI,GAAIpB,YAAJ,CAAiBiB,KAAjB,CAEI,KADAd,QACM,CADIH,YACJ,CADiBiB,KACjB,CADuBd,OACvB,CAAAW,aAAA,CAAcC,MAAd,CAAqB,qBAArB,CAAsE,CACxEC,UAAWb,OAD6D,CAAtE,CAAN,CAIJ,GAAI,CAACH,YAAD,CAAclC,KAAlB,CACI,KAAMgD,cAAA,CAAcC,MAAd,CAAqB,uBAArB,CAAN,CAEJ,MAAO,CAAC,CAAD,CAAef,YAAf,CAA4BlC,KAA5B,CAnCf,CADyC,CAAtC,CAF8C,CAAlD,CADqD,CA4ChEuD,QAASA,mBAAkB,CAACpC,oBAAD,CAAuBnB,KAAvB,CAA8B,CACrD,MAAOhD,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC;AAAsC,QAAS,EAAG,CAAA,IACjDgE,OADiD,CACxCyB,kBADwC,CACpBrB,QADoB,CACVD,YADU,CACIG,OADJ,CACaoB,KAClE,OAAOzG,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAc+D,UAAA,CAAWnB,oBAAX,CAAd,CACf,MAAK,CAAL,CACIY,OAKA,CALUzD,EAAA,CAAGG,IAAH,EAKV,CAJA+E,kBAIA,CAJqB,CACjBhB,OAAQ,QADS,CAEjBT,QAASA,OAFQ,CAIrB,CAAAzD,EAAA,CAAGC,KAAH,CAAW,CACf,MAAK,CAAL,CAEI,MADAD,GAAA,CAAGqE,IAAH,CAAQC,IAAR,CAAa,CAAC,CAAD,CAAI,CAAJ,CAAA,CAAS,CAAT,CAAb,CACO,CAAA,CAAC,CAAD,CAAcC,KAAA,CAAMC,WAAA,CAAY3B,oBAAZ,CAAiCG,SAAjC,CAAN,CAAoD,GAApD,CAA0DtB,KAA1D,CAAiEwD,kBAAjE,CAAd,CACX,MAAK,CAAL,CAEI,MADArB,SACO,CADI7D,EAAA,CAAGG,IAAH,EACJ,CAAA,CAAC,CAAD,CAAc0D,QAAA,CAASY,IAAT,EAAd,CACX,MAAK,CAAL,CACIb,YAAA,CAAe5D,EAAA,CAAGG,IAAH,EACf,IAAIyD,YAAJ,CAAiBiB,KAAjB,CAEI,KADAd,QACM;AADIH,YACJ,CADiBiB,KACjB,CADuBd,OACvB,CAAAW,aAAA,CAAcC,MAAd,CAAqB,0BAArB,CAAgF,CAClFC,UAAWb,OADuE,CAAhF,CAAN,CAIJ,MAAO,CAAC,CAAD,CAAc,CAAd,CACX,MAAK,CAAL,CAEI,KADAoB,MACM,CADEnF,EAAA,CAAGG,IAAH,EACF,CAAAuE,aAAA,CAAcC,MAAd,CAAqB,0BAArB,CAAgF,CAClFC,UAAWO,KADuE,CAAhF,CAAN,CAGJ,KAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CA7BnB,CADyC,CAAtC,CAF8C,CAAlD,CAD8C,CAsCzDX,QAASA,YAAW,CAACxE,EAAD,CAAK,CAErB,MAAO,sDAAP,CADgBA,EAChB,CADmBoF,SACnB,CAA6C,gBAFxB,CAIzBpB,QAASA,WAAU,CAAChE,EAAD,CAAK,CAAA,IAChBgD,UAAYhD,EAAZgD,CAAeA,SADC,CACUqC,cAAgBrF,EAAhBqF,CAAmBA,aACjD,OAAO3G,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CACrD,IAAI6F,SACJ,OAAO5G,MAAA,CAAMqB,WAAN,CAAkB,IAAlB;AAAwB,QAAS,CAACe,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWb,KAAX,EACI,KAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAcoF,aAAA,CAAcE,QAAd,EAAd,CACf,MAAK,CAAL,CAEI,MADAD,UACO,CADKxE,EAAA,CAAGX,IAAH,EACL,CAAA,CAAC,CAAD,CAAe,IAAIqF,OAAJ,CAAY,CAC1B,eAAgB,kBADU,CAE1BC,OAAQ,kBAFkB,CAG1B,iBAAkBzC,SAAlB,CAA4B0C,MAHF,CAI1B,qCAAsC,MAAtC,CAA+CJ,SAJrB,CAAZ,CAAf,CAJf,CADyC,CAAtC,CAF8C,CAAlD,CAFa,CAmBxBrB,QAASA,QAAO,CAACjE,EAAD,CAAK,CACjB,IAAgEiC,SAAWjC,EAAXiC,CAAcA,QAC1EyB,GAAAA,CAAO,CACPiC,IAAK,CACDlE,SAH2CzB,EAG3CyB,CAH8CA,QAE7C,CAEDF,KAJuBvB,EAIvBuB,CAJ0BA,IAEzB,CAGDC,OALKxB,EAKLwB,CALQA,MAEP,CADE,CA7fSoE,0FAogBpB,GAAI3D,QAAJ,GACIyB,EADJ,CACSiC,GADT,CACaE,iBADb;AACiC5D,QADjC,CAGA,OAAOyB,GAZU,CAiCrB6B,QAASA,SAAQ,CAAC1C,oBAAD,CAAuBiD,cAAvB,CAAuC7D,QAAvC,CAAiD,CAC9D,MAAOvD,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDsG,gBADiD,CAC/BnG,YAD+B,CACjBmC,mBADiB,CACIiE,GACzD,OAAOtH,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CACI,GAAgC,SAAhC,GAAIgG,YAAJ,CAAiBC,UAAjB,CACI,KAAMxB,cAAA,CAAcC,MAAd,CAAqB,oBAArB,CAAN,CAEJ,MAAO,CAAC,CAAD,CAAcwB,mBAAA,CAAoBL,cAApB,CAAoC7D,QAApC,CAAd,CACX,MAAK,CAAL,CAEI,MADA8D,iBACO,CADY/F,EAAA,CAAGG,IAAH,EACZ,CAAA,CAAC,CAAD,CAAcyC,KAAA,CAAMC,oBAAN,CAAd,CACX,MAAK,CAAL,CASI,MARAjD,aAQA;AAReI,EAAA,CAAGG,IAAH,EAQf,CAPA4B,mBAOA,CAPsB,CAClBE,SAAUA,QADQ,CAElBD,QAAS8D,cAAT9D,CAAwBoE,KAFN,CAGlB3E,SAAUsE,gBAAVtE,CAA2BA,QAHT,CAIlBF,KAAMtD,aAAA,CAAc8H,gBAAA,CAAiBM,MAAjB,CAAwB,MAAxB,CAAd,CAJY,CAKlB7E,OAAQvD,aAAA,CAAc8H,gBAAA,CAAiBM,MAAjB,CAAwB,QAAxB,CAAd,CALU,CAOtB,CAAMzG,YAAN,CAA2B,CAAC,CAAD,CAAc,CAAd,CAA3B,CAEO,CAAC,CAAD,CAAe0G,WAAA,CAAYzD,oBAAZ,CAAkCd,mBAAlC,CAAf,CACX,MAAK,CAAL,CACuBA,IAAAA,UAAAnC,YAAAmC,CAAaA,mBAAbA,CA4I/BwE,gBA5IiExE,mBA4IjEwE,CAAiC9E,QAAjC8E,GAA8CC,SAA9CD,CAAwD9E,QA5IzBM,CA6I/B0E,YA7IiE1E,mBA6IjE0E,CAA6BlF,IAA7BkF,GAAsCD,SAAtCC,CAAgDlF,IA7IjBQ,CA8I/B2E,cA9IiE3E,mBA8IjE2E,CAA+BlF,MAA/BkF;AAA0CF,SAA1CE,CAAoDlF,MA9IxC,IAAqDO,mBAArD,CA2IqBE,QA3IrB,GA2IkCuE,SA3IlC,CA2I4CvE,QA3I5C,EA+IUsE,eA/IV,EA+I6BE,WA/I7B,EA+I4CC,aA/I5C,CAA2E,MAAO,CAAC,CAAD,CAAc,CAAd,CAClF1G,GAAA,CAAGC,KAAH,CAAW,CACf,MAAK,CAAL,CAEI,MADAD,GAAA,CAAGqE,IAAH,CAAQC,IAAR,CAAa,CAAC,CAAD,CAAI,CAAJ,CAAA,CAAS,CAAT,CAAb,CACO,CAAA,CAAC,CAAD,CAAcW,kBAAA,CAAmBpC,oBAAnB,CAAyCjD,YAAzC,CAAsD8B,KAAtD,CAAd,CACX,MAAK,CAAL,CAEI,MADA1B,GAAA,CAAGG,IAAH,EACO,CAAA,CAAC,CAAD,CAAc,CAAd,CACX,MAAK,CAAL,CAII,MAHA6F,IAGO,CAHDhG,EAAA,CAAGG,IAAH,EAGC,CADPwG,OAAA,CAAQC,IAAR,CAAaZ,GAAb,CACO,CAAA,CAAC,CAAD,CAAc,CAAd,CACX,MAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAeM,WAAA,CAAYzD,oBAAZ,CAAkCd,mBAAlC,CAAf,CACf,MAAK,CAAL,CACI,MAAIF,KAAA,CAAKC,GAAL,EAAJ,EAAkBlC,YAAlB,CAA+BgC,UAA/B,CA1CMiF,MA0CN,CAEW,CAAC,CAAD,CAAeC,WAAA,CAAY,CAC1BpF,MAAO9B,YAAP8B,CAAoBA,KADM,CAE1BE,WAAYC,IAAA,CAAKC,GAAL,EAFc;AAG1BC,oBAAqBA,mBAHK,CAAZ,CAIfc,oBAJe,CAIOiD,cAJP,CAAf,CAFX,CAUW,CAAC,CAAD,CAAelG,YAAf,CAA4B8B,KAA5B,CAEf,MAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAjDnB,CADyC,CAAtC,CAF8C,CAAlD,CADuD,CA8DlEqF,QAASA,YAAW,CAAClE,oBAAD,CAAuBiD,cAAvB,CAAuC,CACvD,MAAOpH,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDG,YADiD,CACnCmG,gBAClB,OAAOrH,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAc2C,KAAA,CAAMC,oBAAN,CAAd,CACf,MAAK,CAAL,CAEI,MAAA,CADAjD,YACA,CADeI,EAAA,CAAGG,IAAH,EACf,EACO,CAAC,CAAD,CAAc8E,kBAAA,CAAmBpC,oBAAnB,CAAyCjD,YAAzC,CAAsD8B,KAAtD,CAAd,CADP,CAA0B,CAAC,CAAD,CAAc,CAAd,CAE9B,MAAK,CAAL,CAEI,MADA1B,GAAA,CAAGG,IAAH,EACO;AAAA,CAAC,CAAD,CAAcmD,QAAA,CAAST,oBAAT,CAAd,CACX,MAAK,CAAL,CACI7C,EAAA,CAAGG,IAAH,EACA,CAAAH,EAAA,CAAGC,KAAH,CAAW,CACf,MAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAc6F,cAAA,CAAekB,WAAf,CAA2BC,eAA3B,EAAd,CACf,MAAK,CAAL,CAEI,MAAA,CADAlB,gBACA,CADmB/F,EAAA,CAAGG,IAAH,EACnB,EACW,CAAC,CAAD,CAAe4F,gBAAA,CAAiBmB,WAAjB,EAAf,CADX,CAIO,CAAC,CAAD,CAAe,CAAA,CAAf,CAnBf,CADyC,CAAtC,CAF8C,CAAlD,CADgD,CA4B3DJ,QAASA,YAAW,CAAClH,YAAD,CAAeiD,oBAAf,CAAqCiD,cAArC,CAAqD,CACrE,MAAOpH,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjD0H,YADiD,CACnCC,mBADmC,CACdC,GACvC,OAAO3I,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CAEI,MADAD,GAAA,CAAGqE,IAAH,CAAQC,IAAR,CAAa,CAAC,CAAD,CAAI,CAAJ,CAAA,CAAS,CAAT,CAAb,CACO,CAAA,CAAC,CAAD,CAAcQ,kBAAA,CAAmBjC,oBAAnB;AAAyCjD,YAAzC,CAAd,CACX,MAAK,CAAL,CAGI,MAFAuH,aAEO,CAFQnH,EAAA,CAAGG,IAAH,EAER,CADPiH,mBACO,CADe1I,KAAA,CAAM4I,QAAN,CAAe5I,KAAA,CAAM4I,QAAN,CAAe,EAAf,CAAmB1H,YAAnB,CAAf,CAAiD,CAAE8B,MAAOyF,YAAT,CAAuBvF,WAAYC,IAAA,CAAKC,GAAL,EAAnC,CAAjD,CACf,CAAA,CAAC,CAAD,CAAcoB,KAAA,CAAML,oBAAN,CAA4BuE,mBAA5B,CAAd,CACX,MAAK,CAAL,CAEI,MADApH,GAAA,CAAGG,IAAH,EACO,CAAA,CAAC,CAAD,CAAegH,YAAf,CACX,MAAK,CAAL,CAEI,MADAE,IACO,CADDrH,EAAA,CAAGG,IAAH,EACC,CAAA,CAAC,CAAD,CAAc4G,WAAA,CAAYlE,oBAAZ,CAAkCiD,cAAlC,CAAd,CACX,MAAK,CAAL,CAEI,KADA9F,GAAA,CAAGG,IAAH,EACMkH,CAAAA,GAAN,CACJ,KAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAjBnB,CADyC,CAAtC,CAF8C,CAAlD,CAD8D,CA0BzEf,QAASA,YAAW,CAACzD,oBAAD,CAAuBd,mBAAvB,CAA4C,CAC5D,MAAOrD,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDiC,KADiD;AAC1C9B,YACX,OAAOlB,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAcuD,eAAA,CAAgBX,oBAAhB,CAAsCd,mBAAtC,CAAd,CACf,MAAK,CAAL,CAOI,MANAL,MAMO,CANC1B,EAAA,CAAGG,IAAH,EAMD,CALPP,YAKO,CALQ,CACX8B,MAAOA,KADI,CAEXE,WAAYC,IAAA,CAAKC,GAAL,EAFD,CAGXC,oBAAqBA,mBAHV,CAKR,CAAA,CAAC,CAAD,CAAcmB,KAAA,CAAML,oBAAN,CAA4BjD,YAA5B,CAAd,CACX,MAAK,CAAL,CAEI,MADAI,GAAA,CAAGG,IAAH,EACO,CAAA,CAAC,CAAD,CAAeP,YAAf,CAA4B8B,KAA5B,CAZf,CADyC,CAAtC,CAF8C,CAAlD,CADqD,CAwBhEyE,QAASA,oBAAmB,CAACL,cAAD,CAAiB7D,QAAjB,CAA2B,CACnD,MAAOvD,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CACrD,IAAI8H,YACJ,OAAO7I,MAAA,CAAMqB,WAAN,CAAkB,IAAlB;AAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAc6F,cAAA,CAAekB,WAAf,CAA2BC,eAA3B,EAAd,CACf,MAAK,CAAL,CAEI,MAAA,CADAM,YACA,CADevH,EAAA,CAAGG,IAAH,EACf,EACW,CAAC,CAAD,CAAeoH,YAAf,CADX,CAGO,CAAC,CAAD,CAAezB,cAAA,CAAekB,WAAf,CAA2BQ,SAA3B,CAAqC,CACnDC,gBAAiB,CAAA,CADkC,CAInDC,qBAAsB7I,aAAA,CAAcoD,QAAd,CAJ6B,CAArC,CAAf,CAPf,CADyC,CAAtC,CAF8C,CAAlD,CAD4C,CAmHvD0F,QAASA,iBAAgB,CAACC,IAAD,CAAO,CAE5B,MAAuB,QAAvB,GAAO,MAAOA,KAAd,EAAmC,CAAC,CAACA,IAArC,EAzxBsBC,iBAyxBtB,EAAoED,KAFxC,CAsBhCE,QAASA,MAAK,CAACC,EAAD,CAAK,CACf,MAAO,KAAIC,OAAJ,CAAY,QAAS,CAACC,OAAD,CAAU,CAClCC,UAAA,CAAWD,OAAX,CAAoBF,EAApB,CADkC,CAA/B,CADQ,CAySnBI,QAASA,gBAAe,CAACC,GAAD,CAAM,CAC1B,MAAO1J,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B;AAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjD4I,SADiD,CACtCC,UADsC,CAC1BC,YAD0B,CACZC,cADY,CACIC,MADJ,CACYC,eADZ,CAEjD1C,GAFiD,CAE5ChG,EACT,OAAOtB,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACe,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWb,KAAX,EACI,KAAK,CAAL,CAEI,MADAoI,UACO,CADK,IAAIM,GAAJ,CAAQP,GAAR,CAAaQ,IAAb,CAAkBC,QAAlB,CAA2BC,IAA3B,CACL,CAAA,CAAC,CAAD,CAAcC,aAAA,EAAd,CACX,MAAK,CAAL,CACIT,UAAA,CAAaxH,EAAA,CAAGX,IAAH,EACb,IAAI,CACA,IAAKoI,YAA2C,CAA5B7J,KAAA,CAAMsK,QAAN,CAAeV,UAAf,CAA4B,CAAAE,cAAA,CAAiBD,YAAA,CAAaU,IAAb,EAAjE,CAAsF,CAACT,cAAD,CAAgBU,IAAtG,CAA4GV,cAA5G,CAA6HD,YAAA,CAAaU,IAAb,EAA7H,CAGI,GAFAR,MAEI,CAFKD,cAEL,CAFoB5H,KAEpB,CADJ8H,eACI,CADc,IAAIC,GAAJ,CAAQF,MAAR,CAAeL,GAAf,CAAoBQ,IAApB,CAAyBC,QAAzB,CAAkCC,IAAlC,CACd,CAAAJ,eAAA,CAAgBS,IAAhB;AAAyBd,SAAzB,CAAmCc,IAAvC,CACI,MAAO,CAAC,CAAD,CAAeV,MAAf,CALf,CASJ,MAAOW,KAAP,CAAc,CAAEpD,GAAA,CAAM,CAAEnB,MAAOuE,KAAT,CAAR,CATd,OAUQ,CACJ,GAAI,CACIZ,cAAJ,EAAsB,CAACA,cAAD,CAAgBU,IAAtC,GAA+ClJ,EAA/C,CAAoDuI,YAApD,CAAiEc,MAAjE,GAA0ErJ,EAAA,CAAGsJ,IAAH,CAAQf,YAAR,CAD1E,CAAJ,OAGQ,CAAE,GAAIvC,GAAJ,CAAS,KAAMA,IAAN,CAAUnB,KAAV,CAAX,CAJJ,CAMR,MAAO,CAAC,CAAD,CAAe,IAAf,CAtBf,CADyC,CAAtC,CAH8C,CAAlD,CADmB,CAoC9B0E,QAASA,kBAAiB,CAACjB,UAAD,CAAa,CACnC,MAAOA,WAAA,CAAWkB,IAAX,CAAgB,QAAS,CAACf,MAAD,CAAS,CACrC,MAAkC,SAAlC,GAAOA,MAAP,CAAcgB,eAAd,EAGI,CAAChB,MAAA,CAAOL,GAAP,CAAWsB,UAAX,CAAsB,qBAAtB,CAJgC,CAAlC,CAD4B,CA0BvCX,QAASA,cAAa,EAAG,CACrB,MAAOH,KAAA,CAAKe,OAAL,CAAaC,QAAb,CAAsB,CACzBC,KAAM,QADmB,CAEzBC,oBAAqB,CAAA,CAFI,CAAtB,CADc,CA+UzBC,QAASA,oBAAmB,CAACC,eAAD,CAAkB,CAC1C,OAAOA,eAAP,CAAuBC,WACvB;OAAOD,eAAP,CAAuBE,mBACvB,OAAOF,gBAHmC,CA6D9CG,QAASA,qBAAoB,CAACC,SAAD,CAAY,CACrC,MAAO1F,cAAA,CAAcC,MAAd,CAAqB,2BAArB,CAAkF,CACrFyF,UAAWA,SAD0E,CAAlF,CAD8B,CAmDzCC,QAASA,YAAW,EAAG,CACnB,MAAIzB,KAAJ,EAAY,0BAAZ,EAA0CA,KAA1C,CA2BQ,WA3BR,EA2BuBA,KA3BvB,EA4BkB,IA5BlB,GA4BI1I,SA5BJ,EA6BI,aA7BJ,EA6BqB0I,KA7BrB,EA8BI,cA9BJ,EA8BsBA,KA9BtB,EA+BI0B,yBAAA,CAA0BC,SAA1B,CAAoCC,cAApC,CAAmD,kBAAnD,CA/BJ,EAgCIC,gBAAA,CAAiBF,SAAjB,CAA2BC,cAA3B,CAA0C,QAA1C,CAhCJ,CAaQ,WAbR,EAauBE,OAbvB,EAckB,IAdlB,GAcIxK,SAdJ;AAeIyK,SAfJ,CAecC,aAfd,EAgBI,eAhBJ,EAgBuBD,UAhBvB,EAiBI,aAjBJ,EAiBqBD,OAjBrB,EAkBI,cAlBJ,EAkBsBA,OAlBtB,EAmBI,OAnBJ,EAmBeA,OAnBf,EAoBIJ,yBAAA,CAA0BC,SAA1B,CAAoCC,cAApC,CAAmD,kBAAnD,CApBJ,EAqBIC,gBAAA,CAAiBF,SAAjB,CAA2BC,cAA3B,CAA0C,QAA1C,CAtBe,CAzpDvB1M,OAAA,CAAQ,4DAAR,CACI+M,OAAAA,CAAY/M,OAAA,CAAQ,wDAAR,CACZgN,OAAAA,CAAOhN,OAAA,CAAQ,mDAAR,CACX,KAAIY,MAAQZ,OAAA,CAAQ,iCAAR,CAAZ;AACI0C,IAAM1C,OAAA,CAAQ,mCAAR,CACNiN,QAAAA,CAPJC,QAAyB,CAACC,EAAD,CAAK,CAAE,MAAQA,GAAD,EAAsB,QAAtB,GAAQ,MAAOA,GAAf,EAAmC,SAAnC,EAAgDA,GAAhD,CAAsDA,EAAA,CAAG,SAAH,CAAtD,CAAsEA,EAA/E,CAOf,CAAgBnN,OAAA,CAAQ,kDAAR,CAAhB,CAkBf,KAAIkC,WACAkL,QAAAA,EAAalL,WAAA,CAAK,EAAL,CACbA,WAAA,CAAG,2BAAH,CADa,CACqD,iDADrD,CAEbA,WAAA,CAAG,0BAAH,CAFa,CAE8C,+CAF9C,CAGbA,WAAA,CAAG,sBAAH,CAHa,CAGsC,uDAHtC;AAIbA,WAAA,CAAG,oBAAH,CAJa,CAIuC,oEAJvC,CAKbA,WAAA,CAAG,oBAAH,CALa,CAKuC,kEALvC,CAMbA,WAAA,CAAG,qBAAH,CANa,CAMyC,0EANzC,CAObA,WAAA,CAAG,oCAAH,CAPa,CAOgE,8EAPhE,CAQbA,WAAA,CAAG,wBAAH,CARa,CAQ+C,mEAR/C;AASbA,WAAA,CAAG,0BAAH,CATa,CASmD,0DATnD,CAUbA,WAAA,CAAG,0BAAH,CAVa,CAUmD,uEAVnD,CAYbA,WAAA,CAAG,qBAAH,CAZa,CAYyC,kEAZzC,CAabA,WAAA,CAAG,uBAAH,CAba,CAa6C,uDAb7C,CAcbA,WAAA,CAAG,wBAAH,CAda,CAc+C,2IAd/C;AAgBbA,WAAA,CAAG,yBAAH,CAhBa,CAgBiD,sEAhBjD,CAiBbA,WAAA,CAAG,oBAAH,CAjBa,CAiBuC,gEAjBvC,CAkBbA,WAAA,CAAG,mBAAH,CAlBa,CAkBqC,wCAlBrC,CAmBbA,WAAA,CAAG,+BAAH,CAnBa,CAmB6D,uIAnB7D,CAqBbA,WArBAkL,CAsBJ,KAAIxG,cAAgB,IAAIoG,MAAJ,CAASK,YAAT,CAAsB,WAAtB;AAAmC,WAAnC,CAAgDD,OAAhD,CAApB,CA6CIE,WACH,UAAS,CAACA,WAAD,CAAc,CACpBA,WAAA,CAAY,aAAZ,CAA+B,eAC/BA,YAAA,CAAY,oBAAZ,CAAsC,sBAFlB,CAAvB,CAAD,CAGGA,WAHH,GAGmBA,WAHnB,CAGiC,EAHjC,EAyNA,KAAI9I,UAAY,IAAhB,CAolBI+I,aAA8B,QAAS,EAAG,CAC1CA,QAASA,aAAY,CAACxI,oBAAD,CAAuB,CACxC,IAAI/C,MAAQ,IACZ,KAAA,CAAK+C,oBAAL,CAA4BA,oBAO5B,KAAA,CAAKyI,gBAAL,CADA,IACA,CADKrJ,QACL,CAFA,IAEA,CAFKsJ,yBAEL,CAFiC,IAGjC3C,KAAA,CAAK4C,gBAAL,CAAsB,MAAtB,CAA8B,QAAS,CAACC,CAAD,CAAI,CACvCA,CAAA,CAAEC,SAAF,CAAY5L,KAAA,CAAM6L,MAAN,CAAaF,CAAb,CAAZ,CADuC,CAA3C,CAGA7C,KAAA,CAAK4C,gBAAL,CAAsB,wBAAtB;AAAgD,QAAS,CAACC,CAAD,CAAI,CACzDA,CAAA,CAAEC,SAAF,CAAY5L,KAAA,CAAM8L,WAAN,CAAkBH,CAAlB,CAAZ,CADyD,CAA7D,CAGA7C,KAAA,CAAK4C,gBAAL,CAAsB,mBAAtB,CAA2C,QAAS,CAACC,CAAD,CAAI,CACpDA,CAAA,CAAEC,SAAF,CAAY5L,KAAA,CAAM+L,mBAAN,CAA0BJ,CAA1B,CAAZ,CADoD,CAAxD,CAhBwC,CAoB5CK,MAAA,CAAOC,cAAP,CAAsBV,YAAtB,CAAmCd,SAAnC,CAA8C,KAA9C,CAAqD,CACjDlJ,IAAKA,QAAS,EAAG,CACb,MAAO,KAAP,CAAYwB,oBAAZ,CAAiCmJ,GADpB,CADgC,CAIjDC,WAAY,CAAA,CAJqC,CAKjDC,aAAc,CAAA,CALmC,CAArD,CAsBAb,aAAA,CAAad,SAAb,CAAuB4B,2BAAvB,CAAqDC,QAAS,CAACC,QAAD,CAAW,CACrE,IAAA,CAAKd,yBAAL,CAAiC,CAAA,CACjC,IAAI,CAACc,QAAL,EAAqC,UAArC,GAAiB,MAAOA,SAAxB,CACI,KAAM3H,cAAA,CAAcC,MAAd,CAAqB,oBAArB,CAAN,CAEJ,IAAA,CAAK2G,gBAAL;AAAwBe,QAL6C,CAOzEhB,aAAA,CAAad,SAAb,CAAuB+B,mBAAvB,CAA6CC,QAAS,CAACC,cAAD,CAAiB,CACnE,IAAI1M,MAAQ,IACZ,KAAA,CAAKyL,yBAAL,CAAiC,CAAA,CACjC,KAAA,CAAKD,gBAAL,CAAwBkB,cACxB,OAAO,SAAS,EAAG,CACf1M,KAAA,CAAMwL,gBAAN,CAAyB,IADV,CAJgD,CAUvED,aAAA,CAAad,SAAb,CAAuBhF,QAAvB,CAAkCkH,QAAS,EAAG,CAAA,IACtCzM,EADsC,CAClCc,EACR,OAAOpC,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CACrD,IAAIG,YACJ,OAAOlB,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAAC2M,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWzM,KAAX,EACI,KAAK,CAAL,CACI,MAAM,KAAN,CAAWgC,QAAX,CAA4B,CAAC,CAAD,CAAc,CAAd,CAA5B,CACO,CAAC,CAAD,CAAcW,KAAA,CAAM,IAAN,CAAWC,oBAAX,CAAd,CACX,MAAK,CAAL,CACIjD,YAEA,CAFe8M,EAAA,CAAGvM,IAAH,EAEf,CADA,IACA,CADK8B,QACL;AADgL,IAAhK,IAACnB,EAAD,CAA8G,IAAxG,IAACd,EAAD,CAAuB,IAAjB,GAAAJ,YAAA,EAA0C,IAAK,EAA/C,GAAyBA,YAAzB,CAAmD,IAAK,EAAxD,CAA4DA,YAA5D,CAAyEmC,mBAA/E,GAAuH,IAAK,EAA5H,GAAgH/B,EAAhH,CAAgI,IAAK,EAArI,CAAyIA,EAAzI,CAA4IiC,QAAlJ,GAA+K,IAAK,EAApL,GAAwKnB,EAAxK,CAAwLA,EAAxL,CA94BhB8E,yFA+4BA,CAAA8G,EAAA,CAAGzM,KAAH,CAAW,CACf,MAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAesF,QAAA,CAAS,IAAT,CAAc1C,oBAAd,CAAoC+F,IAApC,CAAyC+D,YAAzC,CAAuD,IAAvD,CAA4D1K,QAA5D,CAAf,CARnB,CADyC,CAAtC,CAF8C,CAAlD,CAFmC,CAoB9CoJ,aAAA,CAAad,SAAb,CAAuBxD,WAAvB,CAAqC6F,QAAS,EAAG,CAC7C,MAAO7F,YAAA,CAAY,IAAZ,CAAiBlE,oBAAjB,CAAuC+F,IAAvC,CAA4C+D,YAA5C,CADsC,CAGjDtB,aAAA,CAAad,SAAb,CAAuBsC,iBAAvB,CAA2CC,QAAS,EAAG,CACnD,KAAMpI,cAAA,CAAcC,MAAd,CAAqB,0BAArB,CAAN;AADmD,CAIvD0G,aAAA,CAAad,SAAb,CAAuBwC,iBAAvB,CAA2CC,QAAS,CAAC/K,QAAD,CAAW,CAC3D,GAAsB,IAAtB,GAAI,IAAJ,CAASA,QAAT,CACI,KAAMyC,cAAA,CAAcC,MAAd,CAAqB,+BAArB,CAAN,CAEJ,GAAwB,QAAxB,GAAI,MAAO1C,SAAX,EAAwD,CAAxD,GAAoCA,QAApC,CAA6CjD,MAA7C,CACI,KAAM0F,cAAA,CAAcC,MAAd,CAAqB,mBAArB,CAAN,CAEJ,IAAA,CAAK1C,QAAL,CAAgBA,QAP2C,CAS/DoJ,aAAA,CAAad,SAAb,CAAuB0C,gBAAvB,CAA0CC,QAAS,EAAG,CAClD,KAAMxI,cAAA,CAAcC,MAAd,CAAqB,0BAArB,CAAN,CADkD,CAGtD0G,aAAA,CAAad,SAAb,CAAuB4C,SAAvB,CAAmCC,QAAS,EAAG,CAC3C,KAAM1I,cAAA,CAAcC,MAAd,CAAqB,0BAArB,CAAN,CAD2C,CAG/C0G,aAAA,CAAad,SAAb,CAAuB8C,cAAvB;AAAwCC,QAAS,EAAG,CAChD,KAAM5I,cAAA,CAAcC,MAAd,CAAqB,0BAArB,CAAN,CADgD,CAapD0G,aAAA,CAAad,SAAb,CAAuBoB,MAAvB,CAAgC4B,QAAS,CAACC,KAAD,CAAQ,CAC7C,MAAO9O,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDuK,wBADiD,CAChC1B,UADgC,CACpBmF,mBADoB,CACCC,OACtD,OAAOhP,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,WAAD,CAAK,CACzC,OAAQA,WAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CA2IhB,IAAI2H,KA1I4D4F,KA0I5D5F,CAAUA,IACd,IAAKA,IAAL,CAGA,GAAI,CACA,wBAAA,CAAOA,IAAA,CAAKnD,IAAL,EADP,CAGJ,MAAOkJ,GAAP,CAAY,CAER,wBAAA,CAAO,IAFC,CANZ,IACI,yBAAA,CAAO,IA3IS,OAAK3D,yBAAL,CAKO,CAAC,CAAD,CAAcjB,aAAA,EAAd,CALP;CACIpC,OAAA,CAAQiH,KAAR,CAAc,oGAAd,CAEO,CAAA,CAAC,CAAD,CAHX,CAMJ,MAAK,CAAL,CACItF,UAAA,CAAatI,WAAA,CAAGG,IAAH,EACb,IAAIoJ,iBAAA,CAAkBjB,UAAlB,CAAJ,CAAmC,CAC2BA,IAAAA,CAAAA,UAAY0B,KAAAA,gBAAAA,wBAAAA,CA6LrFhK,EACTgK,gBAAA,CAAgBE,mBAAhB,CAAsC,CAAA,CACtCF,gBAAA,CAAgBC,WAAhB,CAA8BmB,WAA9B,CAA0CyC,aAC1C,IAAI,CACA,IADA,IACSC,aAAepP,KAAA,CAAMsK,QAAN,CAAeV,IAAf,CADxB,CACoDyF,eAAiBD,YAAA,CAAa7E,IAAb,EAArE,CAA0F,CAAC8E,cAAD,CAAgB7E,IAA1G,CAAgH6E,cAAhH,CAAiID,YAAA,CAAa7E,IAAb,EAAjI,CACiB8E,cACb,CAD4BnN,KAC5B,CAAOoN,WAAP,CAAmBhE,eAAnB,CAHJ,CAMJ,MAAOiE,KAAP,CAAc,CAAE,IAAA5G;AAAM,CAAExC,MAAOoJ,KAAT,CAAR,CANd,OAOQ,CACJ,GAAI,CACIF,cAAJ,EAAsB,CAACA,cAAD,CAAgB7E,IAAtC,GAA+ClJ,EAA/C,CAAoD8N,YAApD,CAAiEzE,MAAjE,GAA0ErJ,EAAA,CAAGsJ,IAAH,CAAQwE,YAAR,CAD1E,CAAJ,OAGQ,CAAE,GAAIzG,GAAJ,CAAS,KAAMA,IAAN,CAAUxC,KAAV,CAAX,CAJJ,CAvMgB,MAAO,CAAC,CAAD,CA4LuC,IAAA,EA5LvC,CADwB,CAGnC4I,mBAAA,CAAsB,CAAA,CACtB,IAAI,CAAGzD,wBAAH,CAAmBkE,YAAvB,CAAqC,MAAO,CAAC,CAAD,CAAc,CAAd,CACclE,GAAAA,CAAAA,wBAkH1EmE,IAAAA,CAAyBzP,KAAA,CAAM4I,QAAN,CAAe,EAAf,CAAmB0C,EAAnB,CAAmCkE,YAAnC,CAI7BC,IAAA,CAAuBvG,IAAvB,EAA+B5H,eAAA,CAAK,EAAL,CAC3BA,eAD2B,CAjkCrBoO,OAikCqB,CACbpE,EADa,CAE3BhK,eAFJ,CA+FIqO,GAAAA,CA5FGF,GA4FHE,CAAsCA,OACtCC,aAAAA,CAAarI,YAAbqI,CAA0BA,UAC1BD,GAAJ,EAAeC,YAAf,EAA6BD,EAA7B,CAAqCrP,MAArC,CAA8CsP,YAA9C,EACI3H,OAAA,CAAQC,IAAR,CAAa,6BAAb;AAA6C0H,YAA7C,CAA0D,wDAA1D,CAxNgB,OAAO,CAAC,CAAD,CA0NpB1F,IAAA,CAAK+D,YAAL,CAAkB4B,gBAAlB,CAC6C,IADV,IAACvO,IAAD,CAjGnCmO,GAiGmC,CACDK,KADC,GACyB,IAAK,EAD9B,GACkBxO,IADlB,CACkCA,IADlC,CACuC,EAD1E,CAjGAmO,GAiGA,CA1NoB,CACX,MAAK,CAAL,CACInO,WAAA,CAAGG,IAAH,EAEA,CADAsN,mBACA,CADsB,CAAA,CACtB,CAAAzN,WAAA,CAAGC,KAAH,CAAW,CACf,MAAK,CAAL,CAGI,GAA4B,CAAA,CAA5B,GAAIwN,mBAAJ,EACuC,CAAA,CADvC,GACI,IADJ,CACSlC,yBADT,CAEI,MAAO,CAAC,CAAD,CAEX,IAAM,IAAN,CAAWD,gBAAX,CAA6B,CACItB,GAAAA,CAAAA,wBAlQjD0D,KAAAA,CAAU,CACVe,KAAMzE,GAANyE,CAAsBA,IADZ,CAGVC,YAAa1E,GAAb0E,CAA6BC,YAHnB,CAWd,IANsC3E,GAMtC,CAA4BkE,YAA5B,CAAA,CAN6BR,IAS7B,CAAQQ,YAAR,CAAuB,EAEvB,IADIM,EACJ,CAXsCxE,GAWtC,CADmCkE,YACnC,CADgDM,KAChD,CAX6Bd,IAYzB,CAAQQ,YAAR,CAAqBM,KAArB;AAA6BA,EAGjC,IADI9K,EACJ,CAfsCsG,GAetC,CADkCkE,YAClC,CAD+CxK,IAC/C,CAf6BgK,IAgBzB,CAAQQ,YAAR,CAAqBxK,IAArB,CAA4BA,EAGhC,IADIkL,EACJ,CAnBsC5E,GAmBtC,CADmCkE,YACnC,CADgDU,KAChD,CAnB6BlB,IAoBzB,CAAQQ,YAAR,CAAqBU,KAArB,CAA6BA,EAdjC,CAL8B5E,GAuB9B,CAA4BpC,IAA5B,GAvBqB8F,IAuBrB,CAGQ9F,IAHR,CAvB8BoC,GAuB9B,CAGsCpC,IAHtC,CAMA,IA5B6BoC,GA4B7B,CAA4B6E,UAA5B,CAAA,CA5BoBnB,IA+BpB,CAAQmB,UAAR,CAAqB,EAErB,IADIC,EACJ,CAjC6B9E,GAiC7B,CADkC6E,UAClC,CAD6CC,IAC7C,CAjCoBpB,IAkChB,CAAQmB,UAAR,CAAmBC,IAAnB,CAA0BA,EAI9B,IADIC,GACJ,CAtC6B/E,GAsC7B,CAD4C6E,UAC5C,CADuDG,eACvD,CAtCoBtB,IAuChB,CAAQmB,UAAR,CAAmBE,cAAnB,CAAoCA,GAXxC,CA3BA,OAAA,CAAOrB,IA2PsD,WAArC,GAAI,MAAO,KAAP,CAAYpC,gBAAhB,CACI,IAAA,CAAKA,gBAAL,CAAsBoC,OAAtB,CADJ,CAII,IAAA,CAAKpC,gBAAL,CAAsBrC,IAAtB,CAA2ByE,OAA3B,CANqB,CAS7B,MAAO,CAAC,CAAD,CArCf,CADyC,CAAtC,CAF8C,CAAlD,CADsC,CA8CjDrC,aAAA,CAAad,SAAb,CAAuBqB,WAAvB,CAAqCqD,QAAS,CAACzB,KAAD,CAAQ,CAAA,IAC9CxN,EAD8C;AAC1Cc,EACR,OAAOpC,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDyP,eADiD,CAChCtP,YACrB,OAAOlB,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAAC2M,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWzM,KAAX,EACI,KAAK,CAAL,CAEI,MAAA,CADAiP,eACA,CADkB1B,KAClB,CADwB0B,eACxB,EAA8B,CAAC,CAAD,CAAc,CAAd,CAA9B,CAEO,CAAC,CAAD,CAAcnI,WAAA,CAAY,IAAZ,CAAiBlE,oBAAjB,CAAuC+F,IAAvC,CAA4C+D,YAA5C,CAAd,CACX,MAAK,CAAL,CAGI,MADAD,GAAA,CAAGvM,IAAH,EACO,CAAA,CAAC,CAAD,CACX,MAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAcyC,KAAA,CAAM,IAAN,CAAWC,oBAAX,CAAd,CACf,MAAK,CAAL,CAEI,MADAjD,aACO,CADQ8M,EAAA,CAAGvM,IAAH,EACR,CAAA,CAAC,CAAD,CAAc4G,WAAA,CAAY,IAAZ,CAAiBlE,oBAAjB,CAAuC+F,IAAvC,CAA4C+D,YAA5C,CAAd,CACX,MAAK,CAAL,CAEI,MADAD,GAAA,CAAGvM,IAAH,EACO,CAAA,CAAC,CAAD,CAAcoF,QAAA,CAAS,IAAT,CAAc1C,oBAAd;AAAoC+F,IAApC,CAAyC+D,YAAzC,CAAuN,IAAhK,IAAC7L,EAAD,CAA8G,IAAxG,IAACd,EAAD,CAAuB,IAAjB,GAAAJ,YAAA,EAA0C,IAAK,EAA/C,GAAyBA,YAAzB,CAAmD,IAAK,EAAxD,CAA4DA,YAA5D,CAAyEmC,mBAA/E,GAAuH,IAAK,EAA5H,GAAgH/B,EAAhH,CAAgI,IAAK,EAArI,CAAyIA,EAAzI,CAA4IiC,QAAlJ,GAA+K,IAAK,EAApL,GAAwKnB,EAAxK,CAAwLA,EAAxL,CA7/B5E8E,yFA6/BqB,CAAd,CACX,MAAK,CAAL,CAEI,MADA8G,GAAA,CAAGvM,IAAH,EACO,CAAA,CAAC,CAAD,CAnBf,CADyC,CAAtC,CAF8C,CAAlD,CAF2C,CA6BtDkL,aAAA,CAAad,SAAb,CAAuBsB,mBAAvB,CAA6CsD,QAAS,CAAC3B,KAAD,CAAQ,CAAA,IACtDxN,WADsD,CAClDc,WACR,OAAOpC,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDuK,eADiD,CAChC8E,IADgC,CAC1BrG,MAC3B,OAAO/J,MAAA,CAAMqB,WAAN,CAAkB,IAAlB;AAAwB,QAAS,CAAC2M,WAAD,CAAK,CACzC,OAAQA,WAAR,CAAWzM,KAAX,EACI,KAAK,CAAL,CACI+J,eAAA,CAAoG,IAAlF,IAAClJ,WAAD,CAAoC,IAA9B,IAACd,WAAD,CAAMwN,KAAN,CAAYU,YAAZ,GAA6C,IAAK,EAAlD,GAAsClO,WAAtC,CAAsD,IAAK,EAA3D,CAA+DA,WAA/D,CAAkE4H,IAAxE,GAAiG,IAAK,EAAtG,GAA0F9G,WAA1F,CAA0G,IAAK,EAA/G,CAAmHA,WAAnH,CAzgC5BsN,OA6gCe,IAHD,CAACpE,eAGA,EAAIwD,KAAJ,CAAU4B,MAAV,CAGD,MAAO,CAAC,CAAD,CAGX5B,MAAA,CAAM6B,wBAAN,EACA7B,MAAA,CAAMU,YAAN,CAAmBhM,KAAnB,EAoJE,KAClBlC,EADkB,CACdc,EADc,CACV4L,EAIR,KAAA,CADJ,CADIoC,WACJ,CAD6F,IAAlF,IAAChO,EAAD,CAAoC,IAA9B,IAACd,EAAD,CAtJkBgK,eAsJlB,CAAc6E,UAAd,GAA6C,IAAK,EAAlD,GAAsC7O,EAAtC,CAAsD,IAAK,EAA3D,CAA+DA,EAA/D,CAAkE8O,IAAxE,GAAiG,IAAK,EAAtG,GAA0FhO,EAA1F,CAA0GA,EAA1G,CAA+I,IAAhC,IAAC4L,EAAD,CAtJvF1C,eAsJuF,CAAckE,YAAd,GAA+C,IAAK,EAApD;AAAwCxB,EAAxC,CAAwD,IAAK,EAA7D,CAAiEA,EAAjE,CAAoE4C,YAC9L,EACWR,WADX,CAGInH,gBAAA,CA1J+BqC,eA0J/B,CAAyBpC,IAAzB,CAAJ,CAEWgB,IAFX,CAEgBC,QAFhB,CAEyB0G,MAFzB,CAKW,IA9JS,OAAKT,KAAL,CAGO,CAAC,CAAD,CAAc3G,eAAA,CAAgB2G,IAAhB,CAAd,CAHP,CACW,CAAC,CAAD,CAGf,MAAK,CAAL,CAEI,MAAA,CADArG,MACA,CADSiE,WAAA,CAAGvM,IAAH,EACT,EAAqB,CAAC,CAAD,CAAc,CAAd,CAArB,CACO,CAAC,CAAD,CAAcyI,IAAA,CAAKe,OAAL,CAAa6F,UAAb,CAAwBV,IAAxB,CAAd,CACX,MAAK,CAAL,CAKI,MAHArG,OAGO,CAHEiE,WAAA,CAAGvM,IAAH,EAGF,CAAA,CAAC,CAAD,CAAc2H,KAAA,CAAM,GAAN,CAAd,CACX,MAAK,CAAL,CAII,MADA4E,YAAA,CAAGvM,IAAH,EACO,CAAA,CAAC,CAAD,CAAc,CAAd,CACX,MAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAcsI,MAAA,CAAOgH,KAAP,EAAd,CACf,MAAK,CAAL,CACIhH,MACA,CADSiE,WAAA,CAAGvM,IAAH,EACT,CAAAuM,WAAA,CAAGzM,KAAH,CAAW,CACf,MAAK,CAAL,CACI,GAAI,CAACwI,MAAL,CAEI,MAAO,CAAC,CAAD,CAEXuB,gBAAA,CAAgBC,WAAhB,CAA8BmB,WAA9B,CAA0CsE,oBAC1C1F,gBAAA,CAAgBE,mBAAhB;AAAsC,CAAA,CACtC,OAAO,CAAC,CAAD,CAAezB,MAAA,CAAOuF,WAAP,CAAmBhE,eAAnB,CAAf,CA7Cf,CADyC,CAAtC,CAF8C,CAAlD,CAFmD,CAuD9D,OAAOqB,aArPmC,CAAZ,EAplBlC,CAw9BIsE,iBAAkC,QAAS,EAAG,CAC9CA,QAASA,iBAAgB,CAAC9M,oBAAD,CAAuB,CAC5C,IAAI/C,MAAQ,IACZ,KAAA,CAAK+C,oBAAL,CAA4BA,oBAE5B,KAAA,CAAK+M,iBAAL,CADA,IACA,CADK3N,QACL,CADgB,IAEhB0I,UAAA,CAAUkF,aAAV,CAAwBrE,gBAAxB,CAAyC,SAAzC,CAAoD,QAAS,CAACC,CAAD,CAAI,CAC7D,MAAO3L,MAAA,CAAMgQ,oBAAN,CAA2BrE,CAA3B,CADsD,CAAjE,CAL4C,CAShDK,MAAA,CAAOC,cAAP,CAAsB4D,gBAAtB,CAAuCpF,SAAvC,CAAkD,KAAlD,CAAyD,CACrDlJ,IAAKA,QAAS,EAAG,CACb,MAAO,KAAP,CAAYwB,oBAAZ,CAAiCmJ,GADpB,CADoC,CAIrDC,WAAY,CAAA,CAJyC,CAKrDC,aAAc,CAAA,CALuC,CAAzD,CAOAyD;gBAAA,CAAiBpF,SAAjB,CAA2BuF,oBAA3B,CAAkDC,QAAS,CAACvC,KAAD,CAAQ,CAC/D,MAAO9O,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDuK,eADiD,CAChCgG,WACrB,OAAOtR,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CACI+J,eAAA,CAAkBwD,KAAlB,CAAwB5F,IACxB,IAAI,CAACoC,eAAD,CAAiBE,mBAArB,CACI,MAAO,CAAC,CAAD,CAKX,IAAI,IAAJ,CAAS0F,iBAAT,EACI5F,eADJ,CACoBC,WADpB,GACoCmB,WADpC,CACgDyC,aADhD,CAEI,GAAsC,UAAtC,GAAI,MAAO,KAAP,CAAY+B,iBAAhB,CACI,IAAA,CAAKA,iBAAL,CAAuB7F,mBAAA,CAAoB+B,MAAA,CAAOmE,MAAP,CAAc,EAAd,CAAkBjG,eAAlB,CAApB,CAAvB,CADJ;IAII,KAAA,CAAK4F,iBAAL,CAAuB3G,IAAvB,CAA4B6C,MAAA,CAAOmE,MAAP,CAAc,EAAd,CAAkBjG,eAAlB,CAA5B,CAGRgG,YAAA,CAAchG,eAAd,CAA8BpC,IAC9B,OAAMD,iBAAA,CAAiBqI,WAAjB,CAAN,EACwD,GADxD,GACIA,WAAA,CA5uCaE,cA4uCb,CADJ,CAEO,CAAC,CAAD,CAAc,IAAA,CAAKC,QAAL,CAAcnG,eAAd,CAA8BC,WAA9B,CAA2C+F,WAA3C,CAAd,CAFP,CACqE,CAAC,CAAD,CAAc,CAAd,CAEzE,MAAK,CAAL,CACIhQ,EAAA,CAAGG,IAAH,EACA,CAAAH,EAAA,CAAGC,KAAH,CAAW,CACf,MAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAzBnB,CADyC,CAAtC,CAF8C,CAAlD,CADwD,CAkCnE0P,iBAAA,CAAiBpF,SAAjB,CAA2B6F,WAA3B,CAAyCC,QAAS,EAAG,CACjD,MAAO,KAAP,CAAYpO,QADqC,CAGrD0N,iBAAA,CAAiBpF,SAAjB,CAA2B+F,QAA3B,CAAsCC,QAAS,EAAG,CAC9C,MAAO,KAAP,CAAYzK,cADkC,CAGlD6J,iBAAA,CAAiBpF,SAAjB,CAA2BhF,QAA3B,CAAsCiL,QAAS,CAACC,OAAD,CAAU,CACrD,MAAO/R,MAAA,CAAMe,SAAN,CAAgB,IAAhB;AAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CACrD,MAAOf,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CACI,MAAkC,SAAlC,GAAMgG,YAAN,CAAmBC,UAAnB,CAAqD,CAAC,CAAD,CAAc,CAAd,CAArD,CACO,CAAC,CAAD,CAAcD,YAAA,CAAa4G,iBAAb,EAAd,CACX,MAAK,CAAL,CACI7M,EAAA,CAAGG,IAAH,EACA,CAAAH,EAAA,CAAGC,KAAH,CAAW,CACf,MAAK,CAAL,CACI,GAAgC,SAAhC,GAAIgG,YAAJ,CAAiBC,UAAjB,CACI,KAAMxB,cAAA,CAAcC,MAAd,CAAqB,oBAArB,CAAN,CAEJ,MAAO,CAAC,CAAD,CAAc,IAAA,CAAK+L,cAAL,CAAgC,IAAZ,GAAAD,OAAA,EAAgC,IAAK,EAArC,GAAoBA,OAApB,CAAyC,IAAK,EAA9C,CAAkDA,OAAlD,CAA0DxO,QAA9E,CAAd,CACX,MAAK,CAAL,CAEI,MADAjC,GAAA,CAAGG,IAAH,EACO,CAAA,CAAC,CAAD,CAAc,IAAA,CAAKwQ,WAAL,CAA6B,IAAZ,GAAAF,OAAA,EAAgC,IAAK,EAArC,GAAoBA,OAApB,CAAyC,IAAK,EAA9C,CAAkDA,OAAlD,CAA0DG,yBAA3E,CAAd,CACX;KAAK,CAAL,CAEI,MADA5Q,GAAA,CAAGG,IAAH,EACO,CAAA,CAAC,CAAD,CAAeoF,QAAA,CAAS,IAAT,CAAc1C,oBAAd,CAAoC,IAApC,CAAyCiD,cAAzC,CAAyD,IAAzD,CAA8D7D,QAA9D,CAAf,CAjBf,CADyC,CAAtC,CAD8C,CAAlD,CAD8C,CAyBzD0N,iBAAA,CAAiBpF,SAAjB,CAA2BmG,cAA3B,CAA4CG,QAAS,CAAC5O,QAAD,CAAW,CAC5D,MAAOvD,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CACrD,MAAOf,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACnCiC,QAAN,CACI,IADJ,CACSA,QADT,CACoBA,QADpB,CAGU,IAHV,CAGeA,QAHf,GAII,IAJJ,CAISA,QAJT,CAhyCQ2D,yFAgyCR,CAMA,OAAO,CAAC,CAAD,CAPkC,CAAtC,CAD8C,CAAlD,CADqD,CAahE+J,iBAAA,CAAiBpF,SAAjB,CAA2BoG,WAA3B,CAAyCG,QAAS,CAAChL,cAAD,CAAiB,CAC/D,MAAOpH,MAAA,CAAMe,SAAN,CAAgB,IAAhB;AAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CACrD,MAAOf,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CACI,MAAO6F,eAAP,EAA0B,IAA1B,CAA+BA,cAA/B,CAAuD,CAAC,CAAD,CAAc,CAAd,CAAvD,CACO,CAAC,CAAD,CAAc,IAAA,CAAKiL,iBAAL,EAAd,CACX,MAAK,CAAL,CACI/Q,EAAA,CAAGG,IAAH,EACA,CAAAH,EAAA,CAAGC,KAAH,CAAW,CACf,MAAK,CAAL,CACI,GAAI,CAAC6F,cAAL,EAAyB,IAAzB,CAA8BA,cAA9B,CACI,MAAO,CAAC,CAAD,CAEX,IAAI,EAAEA,cAAF,WAA4BwE,0BAA5B,CAAJ,CACI,KAAM5F,cAAA,CAAcC,MAAd,CAAqB,yBAArB,CAAN,CAEJ,IAAA,CAAKmB,cAAL,CAAsBA,cACtB,OAAO,CAAC,CAAD,CAff,CADyC,CAAtC,CAD8C,CAAlD,CADwD,CAuBnE6J,iBAAA,CAAiBpF,SAAjB,CAA2BwG,iBAA3B,CAA+CC,QAAS,EAAG,CACvD,MAAOtS,MAAA,CAAMe,SAAN,CAAgB,IAAhB;AAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDO,EADiD,CAC7CgG,GACR,OAAOtH,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACe,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWb,KAAX,EACI,KAAK,CAAL,CAGI,MAFAa,GAAA,CAAGuD,IAAH,CAAQC,IAAR,CAAa,CAAC,CAAD,CAAI,CAAJ,CAAA,CAAS,CAAT,CAAb,CAEO,CADPtE,EACO,CADF,IACE,CAAA,CAAC,CAAD,CAAc2K,SAAA,CAAUkF,aAAV,CAAwBoB,QAAxB,CA30CvBC,2BA20CuB,CAAkD,CAC/D9K,MA30CT+K,sCA00CwE,CAAlD,CAAd,CAGX,MAAK,CAAL,CAUI,MATAnR,GASO,CATJ8F,cASI,CATahF,EAAA,CAAGX,IAAH,EASb,CAHP,IAAA,CAAK2F,cAAL,CAAoBsL,MAApB,EAAA,CAA6BC,KAA7B,CAAmC,QAAS,EAAG,EAA/C,CAGO,CAAA,CAAC,CAAD,CAAc,CAAd,CACX,MAAK,CAAL,CAEI,KADArL,IACM,CADAlF,EAAA,CAAGX,IAAH,EACA,CAAAuE,aAAA,CAAcC,MAAd,CAAqB,oCAArB,CAA6F,CAC/F2M,oBAAqBtL,GAArBsL,CAAyBvN,OADsE,CAA7F,CAAN,CAGJ,KAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAvBnB,CADyC,CAAtC,CAF8C,CAAlD,CADgD,CAgC3D4L,iBAAA,CAAiBpF,SAAjB,CAA2BxD,WAA3B;AAAyCwK,QAAS,EAAG,CACjD,MAAO7S,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CACrD,MAAOf,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CACI,MAAM,KAAN,CAAW6F,cAAX,CAAkC,CAAC,CAAD,CAAc,CAAd,CAAlC,CACO,CAAC,CAAD,CAAc,IAAA,CAAKiL,iBAAL,EAAd,CACX,MAAK,CAAL,CACI/Q,EAAA,CAAGG,IAAH,EACA,CAAAH,EAAA,CAAGC,KAAH,CAAW,CACf,MAAK,CAAL,CAAQ,MAAO,CAAC,CAAD,CAAe8G,WAAA,CAAY,IAAZ,CAAiBlE,oBAAjB,CAAuC,IAAvC,CAA4CiD,cAA5C,CAAf,CAPnB,CADyC,CAAtC,CAD8C,CAAlD,CAD0C,CAuBrD6J,iBAAA,CAAiBpF,SAAjB,CAA2BsC,iBAA3B,CAA+C2E,QAAS,EAAG,CACvD,MAAO9S,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CACrD,IAAIgS,gBACJ,OAAO/S,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CACI,MAAgC,SAAhC;AAAIgG,YAAJ,CAAiBC,UAAjB,CACW,CAAC,CAAD,CADX,CAGO,CAAC,CAAD,CAAcD,YAAA,CAAa4G,iBAAb,EAAd,CACX,MAAK,CAAL,CACI4E,gBAAA,CAAmBzR,EAAA,CAAGG,IAAH,EACnB,IAAyB,SAAzB,GAAIsR,gBAAJ,CACI,MAAO,CAAC,CAAD,CAEN,IAAyB,QAAzB,GAAIA,gBAAJ,CACD,KAAM/M,cAAA,CAAcC,MAAd,CAAqB,oBAArB,CAAN,CAGA,KAAMD,cAAA,CAAcC,MAAd,CAAqB,oBAArB,CAAN,CAfZ,CADyC,CAAtC,CAF8C,CAAlD,CADgD,CA6B3DgL,iBAAA,CAAiBpF,SAAjB,CAA2BwC,iBAA3B,CAA+C2E,QAAS,CAACzP,QAAD,CAAW,CAC/D,GAAsB,IAAtB,GAAI,IAAJ,CAASA,QAAT,CACI,KAAMyC,cAAA,CAAcC,MAAd,CAAqB,+BAArB,CAAN,CAEJ,GAAwB,QAAxB,GAAI,MAAO1C,SAAX,EAAwD,CAAxD,GAAoCA,QAApC,CAA6CjD,MAA7C,CACI,KAAM0F,cAAA,CAAcC,MAAd,CAAqB,mBAArB,CAAN;AAEJ,IAAA,CAAK1C,QAAL,CAAgBA,QAP+C,CAanE0N,iBAAA,CAAiBpF,SAAjB,CAA2B0C,gBAA3B,CAA8C0E,QAAS,CAAC7L,cAAD,CAAiB,CACpE,GAAI,EAAEA,cAAF,WAA4BwE,0BAA5B,CAAJ,CACI,KAAM5F,cAAA,CAAcC,MAAd,CAAqB,yBAArB,CAAN,CAEJ,GAAI,IAAJ,CAASmB,cAAT,CACI,KAAMpB,cAAA,CAAcC,MAAd,CAAqB,wBAArB,CAAN,CAEJ,IAAA,CAAKmB,cAAL,CAAsBA,cAP8C,CAcxE6J,iBAAA,CAAiBpF,SAAjB,CAA2B4C,SAA3B,CAAuCyE,QAAS,CAACpF,cAAD,CAAiB,CAC7D,IAAI1M,MAAQ,IACZ,KAAA,CAAK8P,iBAAL,CAAyBpD,cACzB,OAAO,SAAS,EAAG,CACf1M,KAAA,CAAM8P,iBAAN,CAA0B,IADX,CAH0C,CAOjED,iBAAA,CAAiBpF,SAAjB,CAA2B4B,2BAA3B;AAAyD0F,QAAS,EAAG,CACjE,KAAMnN,cAAA,CAAcC,MAAd,CAAqB,sBAArB,CAAN,CADiE,CAGrEgL,iBAAA,CAAiBpF,SAAjB,CAA2B+B,mBAA3B,CAAiDwF,QAAS,EAAG,CACzD,KAAMpN,cAAA,CAAcC,MAAd,CAAqB,sBAArB,CAAN,CADyD,CAO7DgL,iBAAA,CAAiBpF,SAAjB,CAA2B8C,cAA3B,CAA4C0E,QAAS,EAAG,CACpD,MAAO,SAAS,EAAG,EADiC,CAGxDpC,iBAAA,CAAiBpF,SAAjB,CAA2B4F,QAA3B,CAAsC6B,QAAS,CAAC/H,WAAD,CAAcrC,IAAd,CAAoB,CAC/D,MAAOlJ,MAAA,CAAMe,SAAN,CAAgB,IAAhB,CAAsB,IAAK,EAA3B,CAA8B,IAAK,EAAnC,CAAsC,QAAS,EAAG,CAAA,IACjDwS,SADiD,CACtCC,SACf,OAAOxT,MAAA,CAAMqB,WAAN,CAAkB,IAAlB,CAAwB,QAAS,CAACC,EAAD,CAAK,CACzC,OAAQA,EAAR,CAAWC,KAAX,EACI,KAAK,CAAL,CAoBe,CAAA,CAC/B,OApB6CgK,WAoB7C,EACI,KAAKmB,WAAL,CAAiBsE,oBAAjB,CACI,SAAA;AAAO,mBAAP,OAAA,CACJ,MAAKtE,WAAL,CAAiByC,aAAjB,CACI,SAAA,CAAO,yBAAP,OAAA,CACJ,SACI,KAAUsE,MAAJ,EAAN,CANR,CAnBoB,MAAO,CAAC,CAAD,CAAc,IAAA,CAAKtP,oBAAL,CAA0BuP,iBAA1B,CAA4C/Q,GAA5C,EAAd,CACX,MAAK,CAAL,CAUI,MATA6Q,UASO,CATKlS,EAAA,CAAGG,IAAH,EASL,CARP+R,SAAA,CAAU/B,QAAV,CAAmB8B,SAAnB,CAA8B,CAE1BI,WAAYzK,IAAA,CA58CdC,iBA48Cc,CAFc,CAG1ByK,aAAc1K,IAAA,CA58Cd2K,gBA48Cc,CAHY,CAI1BC,aAAc5K,IAAA,CA58Cd6K,eA48Cc,CAJY,CAK1BC,oBAAqBC,IAAA,CAAKC,KAAL,CAAW/Q,IAAA,CAAKC,GAAL,EAAX,CAAwB,GAAxB,CALK,CAA9B,CAQO,CAAA,CAAC,CAAD,CAdf,CADyC,CAAtC,CAF8C,CAAlD,CADwD,CAuBnE,OAAO6N,iBAhRuC,CAAZ,EAwYlCkD,YAAAA,CAAoB,CACpBxI,YAAaA,WADO,CAGxBU,QAAA,CAAS+H,QAAT,CAAkBC,iBAAlB,CAAoC,CAAA,IAAIlI,MAAJ,CAAcmI,SAAd,CA5BfC,WA4Be;AA3BpCC,QAAsB,CAACC,SAAD,CAAY,CAE9B,IAAInH,IAAMmH,SAAA,CAAUC,WAAV,CAAsB,KAAtB,CAAA,CAA6BC,YAA7B,EAAV,CA/DSrT,EACT,IAAI,CA+D6BgM,GA/DjC,EAAY,CA+DqBA,GA/DrB,CAAKyE,OAAjB,CACI,KAAMtG,qBAAA,CAAqB,0BAArB,CAAN,CAEJ,GAAI,CA4D6B6B,GA5D7B,CAAK3L,IAAT,CACI,KAAM8J,qBAAA,CAAqB,UAArB,CAAN,CAGJ,IAAImJ,WAAa,CACb,WADa,CAEb,QAFa,CAGb,OAHa,CAIb,mBAJa,CAAjB,CAMI7C,QAkD6BzE,GAlD7ByE,CAAcA,OAClB,IAAI,CACA,IADA,IACS8C,aAAe7U,KAAA,CAAMsK,QAAN,CAAesK,UAAf,CADxB,CACoDE,eAAiBD,YAAA,CAAatK,IAAb,EAArE,CAA0F,CAACuK,cAAD,CAAgBtK,IAA1G,CAAgHsK,cAAhH,CAAiID,YAAA,CAAatK,IAAb,EAAjI,CAAsJ,CAClJ,IAAIwK,QAAUD,cAAVC,CAAyB7S,KAC7B,IAAI,CAAC6P,OAAA,CAAQgD,OAAR,CAAL,CACI,KAAMtJ,qBAAA,CAAqBsJ,OAArB,CAAN;AAH8I,CADtJ,CAQJ,MAAOrK,KAAP,CAAc,CAAE,IAAApD,UAAM,CAAEnB,MAAOuE,KAAT,CAAR,CARd,OASQ,CACJ,GAAI,CACIoK,cAAJ,EAAsB,CAACA,cAAD,CAAgBtK,IAAtC,GAA+ClJ,EAA/C,CAAoDuT,YAApD,CAAiElK,MAAjE,GAA0ErJ,EAAA,CAAGsJ,IAAH,CAAQiK,YAAR,CAD1E,CAAJ,OAGQ,CAAE,GAAIvN,SAAJ,CAAS,KAAMA,UAAN,CAAUnB,KAAV,CAAX,CAJJ,CAMR,SAAA,CAAO,CACH6O,QAiC6B1H,GAjC7B0H,CAAarT,IADV,CAEH+E,UAAWqL,OAAXrL,CAAmBA,SAFhB,CAGHM,OAAQ+K,OAAR/K,CAAgBA,MAHb,CAIHzC,MAAOwN,OAAPxN,CAAeA,KAJZ,CAKHzD,SAAUiR,OAAVjR,CAAkBmU,iBALf,CAmCHtO,GAAAA,CAAgB8N,SAAA,CAAUC,WAAV,CAAsB,eAAtB,CAAA,CAAuCC,YAAvC,EAChBjB,UAAAA,CAAoBe,SAAA,CAAUC,WAAV,CAAsB,oBAAtB,CACpBvQ,IAAAA,CAAuB,CACvBmJ,IAAKA,GADkB,CAEvBhJ,UAAWA,SAFY,CAGvBqC,cAAeA,EAHQ,CAIvB+M,kBAAmBA,SAJI,CAM3B;GAAI,CAAC/H,WAAA,EAAL,CACI,KAAM3F,cAAA,CAAcC,MAAd,CAAqB,qBAArB,CAAN,CAEJ,MAAIiE,KAAJ,EAAY,0BAAZ,EAA0CA,KAA1C,CAEW,IAAIyC,YAAJ,CAAiBxI,GAAjB,CAFX,CAMW,IAAI8M,gBAAJ,CAAqB9M,GAArB,CArBmB,CA2BE,CAAuD,QAAvD,CAAA,EAA8E+Q,eAA9E,CAA8Ff,WAA9F,CAApC,CA7pDmH;",
"sources":["node_modules/@firebase/messaging/dist/index.cjs.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$firebase$messaging$dist$index_cjs\"] = function(global,require,module,exports) {\n'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nrequire('@firebase/installations');\nvar component = require('@firebase/component');\nvar util = require('@firebase/util');\nvar tslib = require('tslib');\nvar idb = require('idb');\nvar firebase = _interopDefault(require('@firebase/app'));\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar _a;\r\nvar ERROR_MAP = (_a = {},\r\n    _a[\"missing-app-config-values\" /* MISSING_APP_CONFIG_VALUES */] = 'Missing App configuration value: \"{$valueName}\"',\r\n    _a[\"only-available-in-window\" /* AVAILABLE_IN_WINDOW */] = 'This method is available in a Window context.',\r\n    _a[\"only-available-in-sw\" /* AVAILABLE_IN_SW */] = 'This method is available in a service worker context.',\r\n    _a[\"permission-default\" /* PERMISSION_DEFAULT */] = 'The notification permission was not granted and dismissed instead.',\r\n    _a[\"permission-blocked\" /* PERMISSION_BLOCKED */] = 'The notification permission was not granted and blocked instead.',\r\n    _a[\"unsupported-browser\" /* UNSUPPORTED_BROWSER */] = \"This browser doesn't support the API's required to use the firebase SDK.\",\r\n    _a[\"failed-service-worker-registration\" /* FAILED_DEFAULT_REGISTRATION */] = 'We are unable to register the default service worker. {$browserErrorMessage}',\r\n    _a[\"token-subscribe-failed\" /* TOKEN_SUBSCRIBE_FAILED */] = 'A problem occured while subscribing the user to FCM: {$errorInfo}',\r\n    _a[\"token-subscribe-no-token\" /* TOKEN_SUBSCRIBE_NO_TOKEN */] = 'FCM returned no token when subscribing the user to push.',\r\n    _a[\"token-unsubscribe-failed\" /* TOKEN_UNSUBSCRIBE_FAILED */] = 'A problem occured while unsubscribing the ' +\r\n        'user from FCM: {$errorInfo}',\r\n    _a[\"token-update-failed\" /* TOKEN_UPDATE_FAILED */] = 'A problem occured while updating the user from FCM: {$errorInfo}',\r\n    _a[\"token-update-no-token\" /* TOKEN_UPDATE_NO_TOKEN */] = 'FCM returned no token when updating the user to push.',\r\n    _a[\"use-sw-after-get-token\" /* USE_SW_AFTER_GET_TOKEN */] = 'The useServiceWorker() method may only be called once and must be ' +\r\n        'called before calling getToken() to ensure your service worker is used.',\r\n    _a[\"invalid-sw-registration\" /* INVALID_SW_REGISTRATION */] = 'The input to useServiceWorker() must be a ServiceWorkerRegistration.',\r\n    _a[\"invalid-bg-handler\" /* INVALID_BG_HANDLER */] = 'The input to setBackgroundMessageHandler() must be a function.',\r\n    _a[\"invalid-vapid-key\" /* INVALID_VAPID_KEY */] = 'The public VAPID key must be a string.',\r\n    _a[\"use-vapid-key-after-get-token\" /* USE_VAPID_KEY_AFTER_GET_TOKEN */] = 'The usePublicVapidKey() method may only be called once and must be ' +\r\n        'called before calling getToken() to ensure your VAPID key is used.',\r\n    _a);\r\nvar ERROR_FACTORY = new util.ErrorFactory('messaging', 'Messaging', ERROR_MAP);\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar DEFAULT_SW_PATH = '/firebase-messaging-sw.js';\r\nvar DEFAULT_SW_SCOPE = '/firebase-cloud-messaging-push-scope';\r\nvar DEFAULT_VAPID_KEY = 'BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4';\r\nvar ENDPOINT = 'https://fcmregistrations.googleapis.com/v1';\r\n/** Key of FCM Payload in Notification's data field. */\r\nvar FCM_MSG = 'FCM_MSG';\r\nvar CONSOLE_CAMPAIGN_ID = 'google.c.a.c_id';\r\nvar CONSOLE_CAMPAIGN_NAME = 'google.c.a.c_l';\r\nvar CONSOLE_CAMPAIGN_TIME = 'google.c.a.ts';\r\n/** Set to '1' if Analytics is enabled for the campaign */\r\nvar CONSOLE_CAMPAIGN_ANALYTICS_ENABLED = 'google.c.a.e';\r\nvar TAG = 'FirebaseMessaging: ';\n\n/**\r\n * @license\r\n * Copyright 2018 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except\r\n * in compliance with the License. You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under the License\r\n * is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\r\n * or implied. See the License for the specific language governing permissions and limitations under\r\n * the License.\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    MessageType[\"PUSH_RECEIVED\"] = \"push-received\";\r\n    MessageType[\"NOTIFICATION_CLICKED\"] = \"notification-clicked\";\r\n})(MessageType || (MessageType = {}));\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction arrayToBase64(array) {\r\n    var uint8Array = new Uint8Array(array);\r\n    var base64String = btoa(String.fromCharCode.apply(String, tslib.__spread(uint8Array)));\r\n    return base64String.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\r\n}\r\nfunction base64ToArray(base64String) {\r\n    var padding = '='.repeat((4 - (base64String.length % 4)) % 4);\r\n    var base64 = (base64String + padding)\r\n        .replace(/\\-/g, '+')\r\n        .replace(/_/g, '/');\r\n    var rawData = atob(base64);\r\n    var outputArray = new Uint8Array(rawData.length);\r\n    for (var i = 0; i < rawData.length; ++i) {\r\n        outputArray[i] = rawData.charCodeAt(i);\r\n    }\r\n    return outputArray;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar OLD_DB_NAME = 'fcm_token_details_db';\r\n/**\r\n * The last DB version of 'fcm_token_details_db' was 4. This is one higher, so that the upgrade\r\n * callback is called for all versions of the old DB.\r\n */\r\nvar OLD_DB_VERSION = 5;\r\nvar OLD_OBJECT_STORE_NAME = 'fcm_token_object_Store';\r\nfunction migrateOldDatabase(senderId) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var databases, dbNames, tokenDetails, db;\r\n        var _this = this;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!('databases' in indexedDB)) return [3 /*break*/, 2];\r\n                    return [4 /*yield*/, indexedDB.databases()];\r\n                case 1:\r\n                    databases = _a.sent();\r\n                    dbNames = databases.map(function (db) { return db.name; });\r\n                    if (!dbNames.includes(OLD_DB_NAME)) {\r\n                        // old DB didn't exist, no need to open.\r\n                        return [2 /*return*/, null];\r\n                    }\r\n                    _a.label = 2;\r\n                case 2:\r\n                    tokenDetails = null;\r\n                    return [4 /*yield*/, idb.openDb(OLD_DB_NAME, OLD_DB_VERSION, function (db) { return tslib.__awaiter(_this, void 0, void 0, function () {\r\n                            var objectStore, value, oldDetails, oldDetails, oldDetails;\r\n                            var _a;\r\n                            return tslib.__generator(this, function (_b) {\r\n                                switch (_b.label) {\r\n                                    case 0:\r\n                                        if (db.oldVersion < 2) {\r\n                                            // Database too old, skip migration.\r\n                                            return [2 /*return*/];\r\n                                        }\r\n                                        if (!db.objectStoreNames.contains(OLD_OBJECT_STORE_NAME)) {\r\n                                            // Database did not exist. Nothing to do.\r\n                                            return [2 /*return*/];\r\n                                        }\r\n                                        objectStore = db.transaction.objectStore(OLD_OBJECT_STORE_NAME);\r\n                                        return [4 /*yield*/, objectStore.index('fcmSenderId').get(senderId)];\r\n                                    case 1:\r\n                                        value = _b.sent();\r\n                                        return [4 /*yield*/, objectStore.clear()];\r\n                                    case 2:\r\n                                        _b.sent();\r\n                                        if (!value) {\r\n                                            // No entry in the database, nothing to migrate.\r\n                                            return [2 /*return*/];\r\n                                        }\r\n                                        if (db.oldVersion === 2) {\r\n                                            oldDetails = value;\r\n                                            if (!oldDetails.auth || !oldDetails.p256dh || !oldDetails.endpoint) {\r\n                                                return [2 /*return*/];\r\n                                            }\r\n                                            tokenDetails = {\r\n                                                token: oldDetails.fcmToken,\r\n                                                createTime: (_a = oldDetails.createTime) !== null && _a !== void 0 ? _a : Date.now(),\r\n                                                subscriptionOptions: {\r\n                                                    auth: oldDetails.auth,\r\n                                                    p256dh: oldDetails.p256dh,\r\n                                                    endpoint: oldDetails.endpoint,\r\n                                                    swScope: oldDetails.swScope,\r\n                                                    vapidKey: typeof oldDetails.vapidKey === 'string'\r\n                                                        ? oldDetails.vapidKey\r\n                                                        : arrayToBase64(oldDetails.vapidKey)\r\n                                                }\r\n                                            };\r\n                                        }\r\n                                        else if (db.oldVersion === 3) {\r\n                                            oldDetails = value;\r\n                                            tokenDetails = {\r\n                                                token: oldDetails.fcmToken,\r\n                                                createTime: oldDetails.createTime,\r\n                                                subscriptionOptions: {\r\n                                                    auth: arrayToBase64(oldDetails.auth),\r\n                                                    p256dh: arrayToBase64(oldDetails.p256dh),\r\n                                                    endpoint: oldDetails.endpoint,\r\n                                                    swScope: oldDetails.swScope,\r\n                                                    vapidKey: arrayToBase64(oldDetails.vapidKey)\r\n                                                }\r\n                                            };\r\n                                        }\r\n                                        else if (db.oldVersion === 4) {\r\n                                            oldDetails = value;\r\n                                            tokenDetails = {\r\n                                                token: oldDetails.fcmToken,\r\n                                                createTime: oldDetails.createTime,\r\n                                                subscriptionOptions: {\r\n                                                    auth: arrayToBase64(oldDetails.auth),\r\n                                                    p256dh: arrayToBase64(oldDetails.p256dh),\r\n                                                    endpoint: oldDetails.endpoint,\r\n                                                    swScope: oldDetails.swScope,\r\n                                                    vapidKey: arrayToBase64(oldDetails.vapidKey)\r\n                                                }\r\n                                            };\r\n                                        }\r\n                                        return [2 /*return*/];\r\n                                }\r\n                            });\r\n                        }); })];\r\n                case 3:\r\n                    db = _a.sent();\r\n                    db.close();\r\n                    // Delete all old databases.\r\n                    return [4 /*yield*/, idb.deleteDb(OLD_DB_NAME)];\r\n                case 4:\r\n                    // Delete all old databases.\r\n                    _a.sent();\r\n                    return [4 /*yield*/, idb.deleteDb('fcm_vapid_details_db')];\r\n                case 5:\r\n                    _a.sent();\r\n                    return [4 /*yield*/, idb.deleteDb('undefined')];\r\n                case 6:\r\n                    _a.sent();\r\n                    return [2 /*return*/, checkTokenDetails(tokenDetails) ? tokenDetails : null];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction checkTokenDetails(tokenDetails) {\r\n    if (!tokenDetails || !tokenDetails.subscriptionOptions) {\r\n        return false;\r\n    }\r\n    var subscriptionOptions = tokenDetails.subscriptionOptions;\r\n    return (typeof tokenDetails.createTime === 'number' &&\r\n        tokenDetails.createTime > 0 &&\r\n        typeof tokenDetails.token === 'string' &&\r\n        tokenDetails.token.length > 0 &&\r\n        typeof subscriptionOptions.auth === 'string' &&\r\n        subscriptionOptions.auth.length > 0 &&\r\n        typeof subscriptionOptions.p256dh === 'string' &&\r\n        subscriptionOptions.p256dh.length > 0 &&\r\n        typeof subscriptionOptions.endpoint === 'string' &&\r\n        subscriptionOptions.endpoint.length > 0 &&\r\n        typeof subscriptionOptions.swScope === 'string' &&\r\n        subscriptionOptions.swScope.length > 0 &&\r\n        typeof subscriptionOptions.vapidKey === 'string' &&\r\n        subscriptionOptions.vapidKey.length > 0);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Exported for tests.\r\nvar DATABASE_NAME = 'firebase-messaging-database';\r\nvar DATABASE_VERSION = 1;\r\nvar OBJECT_STORE_NAME = 'firebase-messaging-store';\r\nvar dbPromise = null;\r\nfunction getDbPromise() {\r\n    if (!dbPromise) {\r\n        dbPromise = idb.openDb(DATABASE_NAME, DATABASE_VERSION, function (upgradeDb) {\r\n            // We don't use 'break' in this switch statement, the fall-through behavior is what we want,\r\n            // because if there are multiple versions between the old version and the current version, we\r\n            // want ALL the migrations that correspond to those versions to run, not only the last one.\r\n            // eslint-disable-next-line default-case\r\n            switch (upgradeDb.oldVersion) {\r\n                case 0:\r\n                    upgradeDb.createObjectStore(OBJECT_STORE_NAME);\r\n            }\r\n        });\r\n    }\r\n    return dbPromise;\r\n}\r\n/** Gets record(s) from the objectStore that match the given key. */\r\nfunction dbGet(firebaseDependencies) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var key, db, tokenDetails, oldTokenDetails;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    key = getKey(firebaseDependencies);\r\n                    return [4 /*yield*/, getDbPromise()];\r\n                case 1:\r\n                    db = _a.sent();\r\n                    return [4 /*yield*/, db\r\n                            .transaction(OBJECT_STORE_NAME)\r\n                            .objectStore(OBJECT_STORE_NAME)\r\n                            .get(key)];\r\n                case 2:\r\n                    tokenDetails = _a.sent();\r\n                    if (!tokenDetails) return [3 /*break*/, 3];\r\n                    return [2 /*return*/, tokenDetails];\r\n                case 3: return [4 /*yield*/, migrateOldDatabase(firebaseDependencies.appConfig.senderId)];\r\n                case 4:\r\n                    oldTokenDetails = _a.sent();\r\n                    if (!oldTokenDetails) return [3 /*break*/, 6];\r\n                    return [4 /*yield*/, dbSet(firebaseDependencies, oldTokenDetails)];\r\n                case 5:\r\n                    _a.sent();\r\n                    return [2 /*return*/, oldTokenDetails];\r\n                case 6: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\n/** Assigns or overwrites the record for the given key with the given value. */\r\nfunction dbSet(firebaseDependencies, tokenDetails) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var key, db, tx;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    key = getKey(firebaseDependencies);\r\n                    return [4 /*yield*/, getDbPromise()];\r\n                case 1:\r\n                    db = _a.sent();\r\n                    tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\r\n                    return [4 /*yield*/, tx.objectStore(OBJECT_STORE_NAME).put(tokenDetails, key)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [4 /*yield*/, tx.complete];\r\n                case 3:\r\n                    _a.sent();\r\n                    return [2 /*return*/, tokenDetails];\r\n            }\r\n        });\r\n    });\r\n}\r\n/** Removes record(s) from the objectStore that match the given key. */\r\nfunction dbRemove(firebaseDependencies) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var key, db, tx;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    key = getKey(firebaseDependencies);\r\n                    return [4 /*yield*/, getDbPromise()];\r\n                case 1:\r\n                    db = _a.sent();\r\n                    tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\r\n                    return [4 /*yield*/, tx.objectStore(OBJECT_STORE_NAME).delete(key)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [4 /*yield*/, tx.complete];\r\n                case 3:\r\n                    _a.sent();\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction getKey(_a) {\r\n    var appConfig = _a.appConfig;\r\n    return appConfig.appId;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction requestGetToken(firebaseDependencies, subscriptionOptions) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var headers, body, subscribeOptions, responseData, response, err_1, message;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, getHeaders(firebaseDependencies)];\r\n                case 1:\r\n                    headers = _a.sent();\r\n                    body = getBody(subscriptionOptions);\r\n                    subscribeOptions = {\r\n                        method: 'POST',\r\n                        headers: headers,\r\n                        body: JSON.stringify(body)\r\n                    };\r\n                    _a.label = 2;\r\n                case 2:\r\n                    _a.trys.push([2, 5, , 6]);\r\n                    return [4 /*yield*/, fetch(getEndpoint(firebaseDependencies.appConfig), subscribeOptions)];\r\n                case 3:\r\n                    response = _a.sent();\r\n                    return [4 /*yield*/, response.json()];\r\n                case 4:\r\n                    responseData = _a.sent();\r\n                    return [3 /*break*/, 6];\r\n                case 5:\r\n                    err_1 = _a.sent();\r\n                    throw ERROR_FACTORY.create(\"token-subscribe-failed\" /* TOKEN_SUBSCRIBE_FAILED */, {\r\n                        errorInfo: err_1\r\n                    });\r\n                case 6:\r\n                    if (responseData.error) {\r\n                        message = responseData.error.message;\r\n                        throw ERROR_FACTORY.create(\"token-subscribe-failed\" /* TOKEN_SUBSCRIBE_FAILED */, {\r\n                            errorInfo: message\r\n                        });\r\n                    }\r\n                    if (!responseData.token) {\r\n                        throw ERROR_FACTORY.create(\"token-subscribe-no-token\" /* TOKEN_SUBSCRIBE_NO_TOKEN */);\r\n                    }\r\n                    return [2 /*return*/, responseData.token];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction requestUpdateToken(firebaseDependencies, tokenDetails) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var headers, body, updateOptions, responseData, response, err_2, message;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, getHeaders(firebaseDependencies)];\r\n                case 1:\r\n                    headers = _a.sent();\r\n                    body = getBody(tokenDetails.subscriptionOptions);\r\n                    updateOptions = {\r\n                        method: 'PATCH',\r\n                        headers: headers,\r\n                        body: JSON.stringify(body)\r\n                    };\r\n                    _a.label = 2;\r\n                case 2:\r\n                    _a.trys.push([2, 5, , 6]);\r\n                    return [4 /*yield*/, fetch(getEndpoint(firebaseDependencies.appConfig) + \"/\" + tokenDetails.token, updateOptions)];\r\n                case 3:\r\n                    response = _a.sent();\r\n                    return [4 /*yield*/, response.json()];\r\n                case 4:\r\n                    responseData = _a.sent();\r\n                    return [3 /*break*/, 6];\r\n                case 5:\r\n                    err_2 = _a.sent();\r\n                    throw ERROR_FACTORY.create(\"token-update-failed\" /* TOKEN_UPDATE_FAILED */, {\r\n                        errorInfo: err_2\r\n                    });\r\n                case 6:\r\n                    if (responseData.error) {\r\n                        message = responseData.error.message;\r\n                        throw ERROR_FACTORY.create(\"token-update-failed\" /* TOKEN_UPDATE_FAILED */, {\r\n                            errorInfo: message\r\n                        });\r\n                    }\r\n                    if (!responseData.token) {\r\n                        throw ERROR_FACTORY.create(\"token-update-no-token\" /* TOKEN_UPDATE_NO_TOKEN */);\r\n                    }\r\n                    return [2 /*return*/, responseData.token];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction requestDeleteToken(firebaseDependencies, token) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var headers, unsubscribeOptions, response, responseData, message, err_3;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, getHeaders(firebaseDependencies)];\r\n                case 1:\r\n                    headers = _a.sent();\r\n                    unsubscribeOptions = {\r\n                        method: 'DELETE',\r\n                        headers: headers\r\n                    };\r\n                    _a.label = 2;\r\n                case 2:\r\n                    _a.trys.push([2, 5, , 6]);\r\n                    return [4 /*yield*/, fetch(getEndpoint(firebaseDependencies.appConfig) + \"/\" + token, unsubscribeOptions)];\r\n                case 3:\r\n                    response = _a.sent();\r\n                    return [4 /*yield*/, response.json()];\r\n                case 4:\r\n                    responseData = _a.sent();\r\n                    if (responseData.error) {\r\n                        message = responseData.error.message;\r\n                        throw ERROR_FACTORY.create(\"token-unsubscribe-failed\" /* TOKEN_UNSUBSCRIBE_FAILED */, {\r\n                            errorInfo: message\r\n                        });\r\n                    }\r\n                    return [3 /*break*/, 6];\r\n                case 5:\r\n                    err_3 = _a.sent();\r\n                    throw ERROR_FACTORY.create(\"token-unsubscribe-failed\" /* TOKEN_UNSUBSCRIBE_FAILED */, {\r\n                        errorInfo: err_3\r\n                    });\r\n                case 6: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction getEndpoint(_a) {\r\n    var projectId = _a.projectId;\r\n    return ENDPOINT + \"/projects/\" + projectId + \"/registrations\";\r\n}\r\nfunction getHeaders(_a) {\r\n    var appConfig = _a.appConfig, installations = _a.installations;\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var authToken;\r\n        return tslib.__generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0: return [4 /*yield*/, installations.getToken()];\r\n                case 1:\r\n                    authToken = _b.sent();\r\n                    return [2 /*return*/, new Headers({\r\n                            'Content-Type': 'application/json',\r\n                            Accept: 'application/json',\r\n                            'x-goog-api-key': appConfig.apiKey,\r\n                            'x-goog-firebase-installations-auth': \"FIS \" + authToken\r\n                        })];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction getBody(_a) {\r\n    var p256dh = _a.p256dh, auth = _a.auth, endpoint = _a.endpoint, vapidKey = _a.vapidKey;\r\n    var body = {\r\n        web: {\r\n            endpoint: endpoint,\r\n            auth: auth,\r\n            p256dh: p256dh\r\n        }\r\n    };\r\n    if (vapidKey !== DEFAULT_VAPID_KEY) {\r\n        body.web.applicationPubKey = vapidKey;\r\n    }\r\n    return body;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** UpdateRegistration will be called once every week. */\r\nvar TOKEN_EXPIRATION_MS = 7 * 24 * 60 * 60 * 1000; // 7 days\r\nfunction getToken(firebaseDependencies, swRegistration, vapidKey) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var pushSubscription, tokenDetails, subscriptionOptions, e_1;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (Notification.permission !== 'granted') {\r\n                        throw ERROR_FACTORY.create(\"permission-blocked\" /* PERMISSION_BLOCKED */);\r\n                    }\r\n                    return [4 /*yield*/, getPushSubscription(swRegistration, vapidKey)];\r\n                case 1:\r\n                    pushSubscription = _a.sent();\r\n                    return [4 /*yield*/, dbGet(firebaseDependencies)];\r\n                case 2:\r\n                    tokenDetails = _a.sent();\r\n                    subscriptionOptions = {\r\n                        vapidKey: vapidKey,\r\n                        swScope: swRegistration.scope,\r\n                        endpoint: pushSubscription.endpoint,\r\n                        auth: arrayToBase64(pushSubscription.getKey('auth')),\r\n                        p256dh: arrayToBase64(pushSubscription.getKey('p256dh'))\r\n                    };\r\n                    if (!!tokenDetails) return [3 /*break*/, 3];\r\n                    // No token, get a new one.\r\n                    return [2 /*return*/, getNewToken(firebaseDependencies, subscriptionOptions)];\r\n                case 3:\r\n                    if (!!isTokenValid(tokenDetails.subscriptionOptions, subscriptionOptions)) return [3 /*break*/, 8];\r\n                    _a.label = 4;\r\n                case 4:\r\n                    _a.trys.push([4, 6, , 7]);\r\n                    return [4 /*yield*/, requestDeleteToken(firebaseDependencies, tokenDetails.token)];\r\n                case 5:\r\n                    _a.sent();\r\n                    return [3 /*break*/, 7];\r\n                case 6:\r\n                    e_1 = _a.sent();\r\n                    // Suppress errors because of #2364\r\n                    console.warn(e_1);\r\n                    return [3 /*break*/, 7];\r\n                case 7: return [2 /*return*/, getNewToken(firebaseDependencies, subscriptionOptions)];\r\n                case 8:\r\n                    if (Date.now() >= tokenDetails.createTime + TOKEN_EXPIRATION_MS) {\r\n                        // Weekly token refresh\r\n                        return [2 /*return*/, updateToken({\r\n                                token: tokenDetails.token,\r\n                                createTime: Date.now(),\r\n                                subscriptionOptions: subscriptionOptions\r\n                            }, firebaseDependencies, swRegistration)];\r\n                    }\r\n                    else {\r\n                        // Valid token, nothing to do.\r\n                        return [2 /*return*/, tokenDetails.token];\r\n                    }\r\n                case 9: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * This method deletes the token from the database, unsubscribes the token from FCM, and unregisters\r\n * the push subscription if it exists.\r\n */\r\nfunction deleteToken(firebaseDependencies, swRegistration) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var tokenDetails, pushSubscription;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, dbGet(firebaseDependencies)];\r\n                case 1:\r\n                    tokenDetails = _a.sent();\r\n                    if (!tokenDetails) return [3 /*break*/, 4];\r\n                    return [4 /*yield*/, requestDeleteToken(firebaseDependencies, tokenDetails.token)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [4 /*yield*/, dbRemove(firebaseDependencies)];\r\n                case 3:\r\n                    _a.sent();\r\n                    _a.label = 4;\r\n                case 4: return [4 /*yield*/, swRegistration.pushManager.getSubscription()];\r\n                case 5:\r\n                    pushSubscription = _a.sent();\r\n                    if (pushSubscription) {\r\n                        return [2 /*return*/, pushSubscription.unsubscribe()];\r\n                    }\r\n                    // If there's no SW, consider it a success.\r\n                    return [2 /*return*/, true];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction updateToken(tokenDetails, firebaseDependencies, swRegistration) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var updatedToken, updatedTokenDetails, e_2;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    _a.trys.push([0, 3, , 5]);\r\n                    return [4 /*yield*/, requestUpdateToken(firebaseDependencies, tokenDetails)];\r\n                case 1:\r\n                    updatedToken = _a.sent();\r\n                    updatedTokenDetails = tslib.__assign(tslib.__assign({}, tokenDetails), { token: updatedToken, createTime: Date.now() });\r\n                    return [4 /*yield*/, dbSet(firebaseDependencies, updatedTokenDetails)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, updatedToken];\r\n                case 3:\r\n                    e_2 = _a.sent();\r\n                    return [4 /*yield*/, deleteToken(firebaseDependencies, swRegistration)];\r\n                case 4:\r\n                    _a.sent();\r\n                    throw e_2;\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction getNewToken(firebaseDependencies, subscriptionOptions) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var token, tokenDetails;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, requestGetToken(firebaseDependencies, subscriptionOptions)];\r\n                case 1:\r\n                    token = _a.sent();\r\n                    tokenDetails = {\r\n                        token: token,\r\n                        createTime: Date.now(),\r\n                        subscriptionOptions: subscriptionOptions\r\n                    };\r\n                    return [4 /*yield*/, dbSet(firebaseDependencies, tokenDetails)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, tokenDetails.token];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Gets a PushSubscription for the current user.\r\n */\r\nfunction getPushSubscription(swRegistration, vapidKey) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var subscription;\r\n        return tslib.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, swRegistration.pushManager.getSubscription()];\r\n                case 1:\r\n                    subscription = _a.sent();\r\n                    if (subscription) {\r\n                        return [2 /*return*/, subscription];\r\n                    }\r\n                    return [2 /*return*/, swRegistration.pushManager.subscribe({\r\n                            userVisibleOnly: true,\r\n                            // Chrome <= 75 doesn't support base64-encoded VAPID key. For backward compatibility, VAPID key\r\n                            // submitted to pushManager#subscribe must be of type Uint8Array.\r\n                            applicationServerKey: base64ToArray(vapidKey)\r\n                        })];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * Checks if the saved tokenDetails object matches the configuration provided.\r\n */\r\nfunction isTokenValid(dbOptions, currentOptions) {\r\n    var isVapidKeyEqual = currentOptions.vapidKey === dbOptions.vapidKey;\r\n    var isEndpointEqual = currentOptions.endpoint === dbOptions.endpoint;\r\n    var isAuthEqual = currentOptions.auth === dbOptions.auth;\r\n    var isP256dhEqual = currentOptions.p256dh === dbOptions.p256dh;\r\n    return isVapidKeyEqual && isEndpointEqual && isAuthEqual && isP256dhEqual;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction externalizePayload(internalPayload) {\r\n    var payload = {\r\n        from: internalPayload.from,\r\n        // eslint-disable-next-line camelcase\r\n        collapseKey: internalPayload.collapse_key\r\n    };\r\n    propagateNotificationPayload(payload, internalPayload);\r\n    propagateDataPayload(payload, internalPayload);\r\n    propagateFcmOptions(payload, internalPayload);\r\n    return payload;\r\n}\r\nfunction propagateNotificationPayload(payload, messagePayloadInternal) {\r\n    if (!messagePayloadInternal.notification) {\r\n        return;\r\n    }\r\n    payload.notification = {};\r\n    var title = messagePayloadInternal.notification.title;\r\n    if (!!title) {\r\n        payload.notification.title = title;\r\n    }\r\n    var body = messagePayloadInternal.notification.body;\r\n    if (!!body) {\r\n        payload.notification.body = body;\r\n    }\r\n    var image = messagePayloadInternal.notification.image;\r\n    if (!!image) {\r\n        payload.notification.image = image;\r\n    }\r\n}\r\nfunction propagateDataPayload(payload, messagePayloadInternal) {\r\n    if (!messagePayloadInternal.data) {\r\n        return;\r\n    }\r\n    payload.data = messagePayloadInternal.data;\r\n}\r\nfunction propagateFcmOptions(payload, messagePayloadInternal) {\r\n    if (!messagePayloadInternal.fcmOptions) {\r\n        return;\r\n    }\r\n    payload.fcmOptions = {};\r\n    var link = messagePayloadInternal.fcmOptions.link;\r\n    if (!!link) {\r\n        payload.fcmOptions.link = link;\r\n    }\r\n    // eslint-disable-next-line camelcase\r\n    var analyticsLabel = messagePayloadInternal.fcmOptions.analytics_label;\r\n    if (!!analyticsLabel) {\r\n        payload.fcmOptions.analyticsLabel = analyticsLabel;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction isConsoleMessage(data) {\r\n    // This message has a campaign ID, meaning it was sent using the Firebase Console.\r\n    return typeof data === 'object' && !!data && CONSOLE_CAMPAIGN_ID in data;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** Returns a promise that resolves after given time passes. */\r\nfunction sleep(ms) {\r\n    return new Promise(function (resolve) {\r\n        setTimeout(resolve, ms);\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar SwController = /** @class */ (function () {\r\n    function SwController(firebaseDependencies) {\r\n        var _this = this;\r\n        this.firebaseDependencies = firebaseDependencies;\r\n        // A boolean flag to determine wether an app is using onBackgroundMessage or\r\n        // setBackgroundMessageHandler. onBackgroundMessage will receive a MessagePayload regardless of if\r\n        // a notification is displayed. Whereas, setBackgroundMessageHandler will swallow the\r\n        // MessagePayload if a NotificationPayload is included.\r\n        this.isOnBackgroundMessageUsed = null;\r\n        this.vapidKey = null;\r\n        this.bgMessageHandler = null;\r\n        self.addEventListener('push', function (e) {\r\n            e.waitUntil(_this.onPush(e));\r\n        });\r\n        self.addEventListener('pushsubscriptionchange', function (e) {\r\n            e.waitUntil(_this.onSubChange(e));\r\n        });\r\n        self.addEventListener('notificationclick', function (e) {\r\n            e.waitUntil(_this.onNotificationClick(e));\r\n        });\r\n    }\r\n    Object.defineProperty(SwController.prototype, \"app\", {\r\n        get: function () {\r\n            return this.firebaseDependencies.app;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @deprecated. Use onBackgroundMessage(nextOrObserver: NextFn<object> | Observer<object>):\r\n     * Unsubscribe instead.\r\n     *\r\n     * Calling setBackgroundMessageHandler will opt in to some specific behaviors.\r\n     *\r\n     * 1.) If a notification doesn't need to be shown due to a window already being visible, then push\r\n     * messages will be sent to the page. 2.) If a notification needs to be shown, and the message\r\n     * contains no notification data this method will be called and the promise it returns will be\r\n     * passed to event.waitUntil. If you do not set this callback then all push messages will let and\r\n     * the developer can handle them in a their own 'push' event callback\r\n     *\r\n     * @param callback The callback to be called when a push message is received and a notification\r\n     * must be shown. The callback will be given the data from the push message.\r\n     */\r\n    SwController.prototype.setBackgroundMessageHandler = function (callback) {\r\n        this.isOnBackgroundMessageUsed = false;\r\n        if (!callback || typeof callback !== 'function') {\r\n            throw ERROR_FACTORY.create(\"invalid-bg-handler\" /* INVALID_BG_HANDLER */);\r\n        }\r\n        this.bgMessageHandler = callback;\r\n    };\r\n    SwController.prototype.onBackgroundMessage = function (nextOrObserver) {\r\n        var _this = this;\r\n        this.isOnBackgroundMessageUsed = true;\r\n        this.bgMessageHandler = nextOrObserver;\r\n        return function () {\r\n            _this.bgMessageHandler = null;\r\n        };\r\n    };\r\n    // TODO: Remove getToken from SW Controller. Calling this from an old SW can cause all kinds of\r\n    // trouble.\r\n    SwController.prototype.getToken = function () {\r\n        var _a, _b;\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var tokenDetails;\r\n            return tslib.__generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        if (!!this.vapidKey) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, dbGet(this.firebaseDependencies)];\r\n                    case 1:\r\n                        tokenDetails = _c.sent();\r\n                        this.vapidKey = (_b = (_a = tokenDetails === null || tokenDetails === void 0 ? void 0 : tokenDetails.subscriptionOptions) === null || _a === void 0 ? void 0 : _a.vapidKey) !== null && _b !== void 0 ? _b : DEFAULT_VAPID_KEY;\r\n                        _c.label = 2;\r\n                    case 2: return [2 /*return*/, getToken(this.firebaseDependencies, self.registration, this.vapidKey)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    // TODO: Remove deleteToken from SW Controller. Calling this from an old SW can cause all kinds of\r\n    // trouble.\r\n    SwController.prototype.deleteToken = function () {\r\n        return deleteToken(this.firebaseDependencies, self.registration);\r\n    };\r\n    SwController.prototype.requestPermission = function () {\r\n        throw ERROR_FACTORY.create(\"only-available-in-window\" /* AVAILABLE_IN_WINDOW */);\r\n    };\r\n    // TODO: Remove this together with getToken from SW Controller.\r\n    SwController.prototype.usePublicVapidKey = function (vapidKey) {\r\n        if (this.vapidKey !== null) {\r\n            throw ERROR_FACTORY.create(\"use-vapid-key-after-get-token\" /* USE_VAPID_KEY_AFTER_GET_TOKEN */);\r\n        }\r\n        if (typeof vapidKey !== 'string' || vapidKey.length === 0) {\r\n            throw ERROR_FACTORY.create(\"invalid-vapid-key\" /* INVALID_VAPID_KEY */);\r\n        }\r\n        this.vapidKey = vapidKey;\r\n    };\r\n    SwController.prototype.useServiceWorker = function () {\r\n        throw ERROR_FACTORY.create(\"only-available-in-window\" /* AVAILABLE_IN_WINDOW */);\r\n    };\r\n    SwController.prototype.onMessage = function () {\r\n        throw ERROR_FACTORY.create(\"only-available-in-window\" /* AVAILABLE_IN_WINDOW */);\r\n    };\r\n    SwController.prototype.onTokenRefresh = function () {\r\n        throw ERROR_FACTORY.create(\"only-available-in-window\" /* AVAILABLE_IN_WINDOW */);\r\n    };\r\n    /**\r\n     * A handler for push events that shows notifications based on the content of the payload.\r\n     *\r\n     * The payload must be a JSON-encoded Object with a `notification` key. The value of the\r\n     * `notification` property will be used as the NotificationOptions object passed to\r\n     * showNotification. Additionally, the `title` property of the notification object will be used as\r\n     * the title.\r\n     *\r\n     * If there is no notification data in the payload then no notification will be shown.\r\n     */\r\n    SwController.prototype.onPush = function (event) {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var internalPayload, clientList, isNotificationShown, payload;\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        internalPayload = getMessagePayloadInternal(event);\r\n                        if (!internalPayload) {\r\n                            console.debug(TAG +\r\n                                'failed to get parsed MessagePayload from the PushEvent. Skip handling the push.');\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, getClientList()];\r\n                    case 1:\r\n                        clientList = _a.sent();\r\n                        if (hasVisibleClients(clientList)) {\r\n                            return [2 /*return*/, sendMessagePayloadInternalToWindows(clientList, internalPayload)];\r\n                        }\r\n                        isNotificationShown = false;\r\n                        if (!!!internalPayload.notification) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, showNotification(wrapInternalPayload(internalPayload))];\r\n                    case 2:\r\n                        _a.sent();\r\n                        isNotificationShown = true;\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        // MessagePayload is only passed to `onBackgroundMessage`. Skip passing MessagePayload for\r\n                        // the legacy `setBackgroundMessageHandler` to preserve the SDK behaviors.\r\n                        if (isNotificationShown === true &&\r\n                            this.isOnBackgroundMessageUsed === false) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        if (!!this.bgMessageHandler) {\r\n                            payload = externalizePayload(internalPayload);\r\n                            if (typeof this.bgMessageHandler === 'function') {\r\n                                this.bgMessageHandler(payload);\r\n                            }\r\n                            else {\r\n                                this.bgMessageHandler.next(payload);\r\n                            }\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SwController.prototype.onSubChange = function (event) {\r\n        var _a, _b;\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var newSubscription, tokenDetails;\r\n            return tslib.__generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        newSubscription = event.newSubscription;\r\n                        if (!!newSubscription) return [3 /*break*/, 2];\r\n                        // Subscription revoked, delete token\r\n                        return [4 /*yield*/, deleteToken(this.firebaseDependencies, self.registration)];\r\n                    case 1:\r\n                        // Subscription revoked, delete token\r\n                        _c.sent();\r\n                        return [2 /*return*/];\r\n                    case 2: return [4 /*yield*/, dbGet(this.firebaseDependencies)];\r\n                    case 3:\r\n                        tokenDetails = _c.sent();\r\n                        return [4 /*yield*/, deleteToken(this.firebaseDependencies, self.registration)];\r\n                    case 4:\r\n                        _c.sent();\r\n                        return [4 /*yield*/, getToken(this.firebaseDependencies, self.registration, (_b = (_a = tokenDetails === null || tokenDetails === void 0 ? void 0 : tokenDetails.subscriptionOptions) === null || _a === void 0 ? void 0 : _a.vapidKey) !== null && _b !== void 0 ? _b : DEFAULT_VAPID_KEY)];\r\n                    case 5:\r\n                        _c.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SwController.prototype.onNotificationClick = function (event) {\r\n        var _a, _b;\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var internalPayload, link, client;\r\n            return tslib.__generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        internalPayload = (_b = (_a = event.notification) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b[FCM_MSG];\r\n                        if (!internalPayload) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        else if (event.action) {\r\n                            // User clicked on an action button. This will allow developers to act on action button clicks\r\n                            // by using a custom onNotificationClick listener that they define.\r\n                            return [2 /*return*/];\r\n                        }\r\n                        // Prevent other listeners from receiving the event\r\n                        event.stopImmediatePropagation();\r\n                        event.notification.close();\r\n                        link = getLink(internalPayload);\r\n                        if (!link) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, getWindowClient(link)];\r\n                    case 1:\r\n                        client = _c.sent();\r\n                        if (!!client) return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, self.clients.openWindow(link)];\r\n                    case 2:\r\n                        // Unable to find window client so need to open one. This also focuses the opened client.\r\n                        client = _c.sent();\r\n                        // Wait three seconds for the client to initialize and set up the message handler so that it\r\n                        // can receive the message.\r\n                        return [4 /*yield*/, sleep(3000)];\r\n                    case 3:\r\n                        // Wait three seconds for the client to initialize and set up the message handler so that it\r\n                        // can receive the message.\r\n                        _c.sent();\r\n                        return [3 /*break*/, 6];\r\n                    case 4: return [4 /*yield*/, client.focus()];\r\n                    case 5:\r\n                        client = _c.sent();\r\n                        _c.label = 6;\r\n                    case 6:\r\n                        if (!client) {\r\n                            // Window Client will not be returned if it's for a third party origin.\r\n                            return [2 /*return*/];\r\n                        }\r\n                        internalPayload.messageType = MessageType.NOTIFICATION_CLICKED;\r\n                        internalPayload.isFirebaseMessaging = true;\r\n                        return [2 /*return*/, client.postMessage(internalPayload)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return SwController;\r\n}());\r\nfunction wrapInternalPayload(internalPayload) {\r\n    var _a;\r\n    var wrappedInternalPayload = tslib.__assign({}, internalPayload.notification);\r\n    // Put the message payload under FCM_MSG name so we can identify the notification as being an FCM\r\n    // notification vs a notification from somewhere else (i.e. normal web push or developer generated\r\n    // notification).\r\n    wrappedInternalPayload.data = (_a = {},\r\n        _a[FCM_MSG] = internalPayload,\r\n        _a);\r\n    return wrappedInternalPayload;\r\n}\r\nfunction getMessagePayloadInternal(_a) {\r\n    var data = _a.data;\r\n    if (!data) {\r\n        return null;\r\n    }\r\n    try {\r\n        return data.json();\r\n    }\r\n    catch (err) {\r\n        // Not JSON so not an FCM message.\r\n        return null;\r\n    }\r\n}\r\n/**\r\n * @param url The URL to look for when focusing a client.\r\n * @return Returns an existing window client or a newly opened WindowClient.\r\n */\r\nfunction getWindowClient(url) {\r\n    return tslib.__awaiter(this, void 0, void 0, function () {\r\n        var parsedURL, clientList, clientList_1, clientList_1_1, client, parsedClientUrl;\r\n        var e_1, _a;\r\n        return tslib.__generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    parsedURL = new URL(url, self.location.href);\r\n                    return [4 /*yield*/, getClientList()];\r\n                case 1:\r\n                    clientList = _b.sent();\r\n                    try {\r\n                        for (clientList_1 = tslib.__values(clientList), clientList_1_1 = clientList_1.next(); !clientList_1_1.done; clientList_1_1 = clientList_1.next()) {\r\n                            client = clientList_1_1.value;\r\n                            parsedClientUrl = new URL(client.url, self.location.href);\r\n                            if (parsedClientUrl.host === parsedURL.host) {\r\n                                return [2 /*return*/, client];\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n                    finally {\r\n                        try {\r\n                            if (clientList_1_1 && !clientList_1_1.done && (_a = clientList_1.return)) _a.call(clientList_1);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                    }\r\n                    return [2 /*return*/, null];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * @returns If there is currently a visible WindowClient, this method will resolve to true,\r\n * otherwise false.\r\n */\r\nfunction hasVisibleClients(clientList) {\r\n    return clientList.some(function (client) {\r\n        return client.visibilityState === 'visible' &&\r\n            // Ignore chrome-extension clients as that matches the background pages of extensions, which\r\n            // are always considered visible for some reason.\r\n            !client.url.startsWith('chrome-extension://');\r\n    });\r\n}\r\nfunction sendMessagePayloadInternalToWindows(clientList, internalPayload) {\r\n    var e_2, _a;\r\n    internalPayload.isFirebaseMessaging = true;\r\n    internalPayload.messageType = MessageType.PUSH_RECEIVED;\r\n    try {\r\n        for (var clientList_2 = tslib.__values(clientList), clientList_2_1 = clientList_2.next(); !clientList_2_1.done; clientList_2_1 = clientList_2.next()) {\r\n            var client = clientList_2_1.value;\r\n            client.postMessage(internalPayload);\r\n        }\r\n    }\r\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n    finally {\r\n        try {\r\n            if (clientList_2_1 && !clientList_2_1.done && (_a = clientList_2.return)) _a.call(clientList_2);\r\n        }\r\n        finally { if (e_2) throw e_2.error; }\r\n    }\r\n}\r\nfunction getClientList() {\r\n    return self.clients.matchAll({\r\n        type: 'window',\r\n        includeUncontrolled: true\r\n        // TS doesn't know that \"type: 'window'\" means it'll return WindowClient[]\r\n    });\r\n}\r\nfunction showNotification(notificationPayloadInternal) {\r\n    var _a;\r\n    // Note: Firefox does not support the maxActions property.\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/notification/maxActions\r\n    var actions = notificationPayloadInternal.actions;\r\n    var maxActions = Notification.maxActions;\r\n    if (actions && maxActions && actions.length > maxActions) {\r\n        console.warn(\"This browser only supports \" + maxActions + \" actions. The remaining actions will not be displayed.\");\r\n    }\r\n    return self.registration.showNotification((_a = \r\n    /* title= */ notificationPayloadInternal.title) !== null && _a !== void 0 ? _a : '', notificationPayloadInternal);\r\n}\r\nfunction getLink(payload) {\r\n    var _a, _b, _c;\r\n    // eslint-disable-next-line camelcase\r\n    var link = (_b = (_a = payload.fcmOptions) === null || _a === void 0 ? void 0 : _a.link) !== null && _b !== void 0 ? _b : (_c = payload.notification) === null || _c === void 0 ? void 0 : _c.click_action;\r\n    if (link) {\r\n        return link;\r\n    }\r\n    if (isConsoleMessage(payload.data)) {\r\n        // Notification created in the Firebase Console. Redirect to origin.\r\n        return self.location.origin;\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar WindowController = /** @class */ (function () {\r\n    function WindowController(firebaseDependencies) {\r\n        var _this = this;\r\n        this.firebaseDependencies = firebaseDependencies;\r\n        this.vapidKey = null;\r\n        this.onMessageCallback = null;\r\n        navigator.serviceWorker.addEventListener('message', function (e) {\r\n            return _this.messageEventListener(e);\r\n        });\r\n    }\r\n    Object.defineProperty(WindowController.prototype, \"app\", {\r\n        get: function () {\r\n            return this.firebaseDependencies.app;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    WindowController.prototype.messageEventListener = function (event) {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var internalPayload, dataPayload;\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        internalPayload = event.data;\r\n                        if (!internalPayload.isFirebaseMessaging) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        // onMessageCallback is either a function or observer/subscriber.\r\n                        // TODO: in the modularization release, have onMessage handle type MessagePayload as supposed to\r\n                        // the legacy payload where some fields are in snake cases.\r\n                        if (this.onMessageCallback &&\r\n                            internalPayload.messageType === MessageType.PUSH_RECEIVED) {\r\n                            if (typeof this.onMessageCallback === 'function') {\r\n                                this.onMessageCallback(stripInternalFields(Object.assign({}, internalPayload)));\r\n                            }\r\n                            else {\r\n                                this.onMessageCallback.next(Object.assign({}, internalPayload));\r\n                            }\r\n                        }\r\n                        dataPayload = internalPayload.data;\r\n                        if (!(isConsoleMessage(dataPayload) &&\r\n                            dataPayload[CONSOLE_CAMPAIGN_ANALYTICS_ENABLED] === '1')) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.logEvent(internalPayload.messageType, dataPayload)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WindowController.prototype.getVapidKey = function () {\r\n        return this.vapidKey;\r\n    };\r\n    WindowController.prototype.getSwReg = function () {\r\n        return this.swRegistration;\r\n    };\r\n    WindowController.prototype.getToken = function (options) {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(Notification.permission === 'default')) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, Notification.requestPermission()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (Notification.permission !== 'granted') {\r\n                            throw ERROR_FACTORY.create(\"permission-blocked\" /* PERMISSION_BLOCKED */);\r\n                        }\r\n                        return [4 /*yield*/, this.updateVapidKey(options === null || options === void 0 ? void 0 : options.vapidKey)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.updateSwReg(options === null || options === void 0 ? void 0 : options.serviceWorkerRegistration)];\r\n                    case 4:\r\n                        _a.sent();\r\n                        return [2 /*return*/, getToken(this.firebaseDependencies, this.swRegistration, this.vapidKey)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WindowController.prototype.updateVapidKey = function (vapidKey) {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            return tslib.__generator(this, function (_a) {\r\n                if (!!vapidKey) {\r\n                    this.vapidKey = vapidKey;\r\n                }\r\n                else if (!this.vapidKey) {\r\n                    this.vapidKey = DEFAULT_VAPID_KEY;\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    WindowController.prototype.updateSwReg = function (swRegistration) {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(!swRegistration && !this.swRegistration)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.registerDefaultSw()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!swRegistration && !!this.swRegistration) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        if (!(swRegistration instanceof ServiceWorkerRegistration)) {\r\n                            throw ERROR_FACTORY.create(\"invalid-sw-registration\" /* INVALID_SW_REGISTRATION */);\r\n                        }\r\n                        this.swRegistration = swRegistration;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WindowController.prototype.registerDefaultSw = function () {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var _a, e_1;\r\n            return tslib.__generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _b.trys.push([0, 2, , 3]);\r\n                        _a = this;\r\n                        return [4 /*yield*/, navigator.serviceWorker.register(DEFAULT_SW_PATH, {\r\n                                scope: DEFAULT_SW_SCOPE\r\n                            })];\r\n                    case 1:\r\n                        _a.swRegistration = _b.sent();\r\n                        // The timing when browser updates sw when sw has an update is unreliable by my experiment. It\r\n                        // leads to version conflict when the SDK upgrades to a newer version in the main page, but sw\r\n                        // is stuck with the old version. For example,\r\n                        // https://github.com/firebase/firebase-js-sdk/issues/2590 The following line reliably updates\r\n                        // sw if there was an update.\r\n                        this.swRegistration.update().catch(function () {\r\n                            /* it is non blocking and we don't care if it failed */\r\n                        });\r\n                        return [3 /*break*/, 3];\r\n                    case 2:\r\n                        e_1 = _b.sent();\r\n                        throw ERROR_FACTORY.create(\"failed-service-worker-registration\" /* FAILED_DEFAULT_REGISTRATION */, {\r\n                            browserErrorMessage: e_1.message\r\n                        });\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WindowController.prototype.deleteToken = function () {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!!this.swRegistration) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.registerDefaultSw()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/, deleteToken(this.firebaseDependencies, this.swRegistration)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Request permission if it is not currently granted.\r\n     *\r\n     * @return Resolves if the permission was granted, rejects otherwise.\r\n     *\r\n     * @deprecated Use Notification.requestPermission() instead.\r\n     * https://developer.mozilla.org/en-US/docs/Web/API/Notification/requestPermission\r\n     */\r\n    WindowController.prototype.requestPermission = function () {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var permissionResult;\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (Notification.permission === 'granted') {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, Notification.requestPermission()];\r\n                    case 1:\r\n                        permissionResult = _a.sent();\r\n                        if (permissionResult === 'granted') {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        else if (permissionResult === 'denied') {\r\n                            throw ERROR_FACTORY.create(\"permission-blocked\" /* PERMISSION_BLOCKED */);\r\n                        }\r\n                        else {\r\n                            throw ERROR_FACTORY.create(\"permission-default\" /* PERMISSION_DEFAULT */);\r\n                        }\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * @deprecated. Use getToken(options?: {vapidKey?: string; serviceWorkerRegistration?:\r\n     * ServiceWorkerRegistration;}): Promise<string> instead.\r\n     */\r\n    WindowController.prototype.usePublicVapidKey = function (vapidKey) {\r\n        if (this.vapidKey !== null) {\r\n            throw ERROR_FACTORY.create(\"use-vapid-key-after-get-token\" /* USE_VAPID_KEY_AFTER_GET_TOKEN */);\r\n        }\r\n        if (typeof vapidKey !== 'string' || vapidKey.length === 0) {\r\n            throw ERROR_FACTORY.create(\"invalid-vapid-key\" /* INVALID_VAPID_KEY */);\r\n        }\r\n        this.vapidKey = vapidKey;\r\n    };\r\n    /**\r\n     * @deprecated. Use getToken(options?: {vapidKey?: string; serviceWorkerRegistration?:\r\n     * ServiceWorkerRegistration;}): Promise<string> instead.\r\n     */\r\n    WindowController.prototype.useServiceWorker = function (swRegistration) {\r\n        if (!(swRegistration instanceof ServiceWorkerRegistration)) {\r\n            throw ERROR_FACTORY.create(\"invalid-sw-registration\" /* INVALID_SW_REGISTRATION */);\r\n        }\r\n        if (this.swRegistration) {\r\n            throw ERROR_FACTORY.create(\"use-sw-after-get-token\" /* USE_SW_AFTER_GET_TOKEN */);\r\n        }\r\n        this.swRegistration = swRegistration;\r\n    };\r\n    /**\r\n     * @param nextOrObserver An observer object or a function triggered on message.\r\n     *\r\n     * @return The unsubscribe function for the observer.\r\n     */\r\n    WindowController.prototype.onMessage = function (nextOrObserver) {\r\n        var _this = this;\r\n        this.onMessageCallback = nextOrObserver;\r\n        return function () {\r\n            _this.onMessageCallback = null;\r\n        };\r\n    };\r\n    WindowController.prototype.setBackgroundMessageHandler = function () {\r\n        throw ERROR_FACTORY.create(\"only-available-in-sw\" /* AVAILABLE_IN_SW */);\r\n    };\r\n    WindowController.prototype.onBackgroundMessage = function () {\r\n        throw ERROR_FACTORY.create(\"only-available-in-sw\" /* AVAILABLE_IN_SW */);\r\n    };\r\n    /**\r\n     * @deprecated No-op. It was initially designed with token rotation requests from server in mind.\r\n     * However, the plan to implement such feature was abandoned.\r\n     */\r\n    WindowController.prototype.onTokenRefresh = function () {\r\n        return function () { };\r\n    };\r\n    WindowController.prototype.logEvent = function (messageType, data) {\r\n        return tslib.__awaiter(this, void 0, void 0, function () {\r\n            var eventType, analytics;\r\n            return tslib.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        eventType = getEventType(messageType);\r\n                        return [4 /*yield*/, this.firebaseDependencies.analyticsProvider.get()];\r\n                    case 1:\r\n                        analytics = _a.sent();\r\n                        analytics.logEvent(eventType, {\r\n                            /* eslint-disable camelcase */\r\n                            message_id: data[CONSOLE_CAMPAIGN_ID],\r\n                            message_name: data[CONSOLE_CAMPAIGN_NAME],\r\n                            message_time: data[CONSOLE_CAMPAIGN_TIME],\r\n                            message_device_time: Math.floor(Date.now() / 1000)\r\n                            /* eslint-enable camelcase */\r\n                        });\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return WindowController;\r\n}());\r\nfunction getEventType(messageType) {\r\n    switch (messageType) {\r\n        case MessageType.NOTIFICATION_CLICKED:\r\n            return 'notification_open';\r\n        case MessageType.PUSH_RECEIVED:\r\n            return 'notification_foreground';\r\n        default:\r\n            throw new Error();\r\n    }\r\n}\r\nfunction stripInternalFields(internalPayload) {\r\n    delete internalPayload.messageType;\r\n    delete internalPayload.isFirebaseMessaging;\r\n    return internalPayload;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction extractAppConfig(app) {\r\n    var e_1, _a;\r\n    if (!app || !app.options) {\r\n        throw getMissingValueError('App Configuration Object');\r\n    }\r\n    if (!app.name) {\r\n        throw getMissingValueError('App Name');\r\n    }\r\n    // Required app config keys\r\n    var configKeys = [\r\n        'projectId',\r\n        'apiKey',\r\n        'appId',\r\n        'messagingSenderId'\r\n    ];\r\n    var options = app.options;\r\n    try {\r\n        for (var configKeys_1 = tslib.__values(configKeys), configKeys_1_1 = configKeys_1.next(); !configKeys_1_1.done; configKeys_1_1 = configKeys_1.next()) {\r\n            var keyName = configKeys_1_1.value;\r\n            if (!options[keyName]) {\r\n                throw getMissingValueError(keyName);\r\n            }\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (configKeys_1_1 && !configKeys_1_1.done && (_a = configKeys_1.return)) _a.call(configKeys_1);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n    return {\r\n        appName: app.name,\r\n        projectId: options.projectId,\r\n        apiKey: options.apiKey,\r\n        appId: options.appId,\r\n        senderId: options.messagingSenderId\r\n    };\r\n}\r\nfunction getMissingValueError(valueName) {\r\n    return ERROR_FACTORY.create(\"missing-app-config-values\" /* MISSING_APP_CONFIG_VALUES */, {\r\n        valueName: valueName\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar MESSAGING_NAME = 'messaging';\r\nfunction factoryMethod(container) {\r\n    // Dependencies.\r\n    var app = container.getProvider('app').getImmediate();\r\n    var appConfig = extractAppConfig(app);\r\n    var installations = container.getProvider('installations').getImmediate();\r\n    var analyticsProvider = container.getProvider('analytics-internal');\r\n    var firebaseDependencies = {\r\n        app: app,\r\n        appConfig: appConfig,\r\n        installations: installations,\r\n        analyticsProvider: analyticsProvider\r\n    };\r\n    if (!isSupported()) {\r\n        throw ERROR_FACTORY.create(\"unsupported-browser\" /* UNSUPPORTED_BROWSER */);\r\n    }\r\n    if (self && 'ServiceWorkerGlobalScope' in self) {\r\n        // Running in ServiceWorker context\r\n        return new SwController(firebaseDependencies);\r\n    }\r\n    else {\r\n        // Assume we are in the window context.\r\n        return new WindowController(firebaseDependencies);\r\n    }\r\n}\r\nvar NAMESPACE_EXPORTS = {\r\n    isSupported: isSupported\r\n};\r\nfirebase.INTERNAL.registerComponent(new component.Component(MESSAGING_NAME, factoryMethod, \"PUBLIC\" /* PUBLIC */).setServiceProps(NAMESPACE_EXPORTS));\r\nfunction isSupported() {\r\n    if (self && 'ServiceWorkerGlobalScope' in self) {\r\n        // Running in ServiceWorker context\r\n        return isSWControllerSupported();\r\n    }\r\n    else {\r\n        // Assume we are in the window context.\r\n        return isWindowControllerSupported();\r\n    }\r\n}\r\n/**\r\n * Checks to see if the required APIs exist.\r\n */\r\nfunction isWindowControllerSupported() {\r\n    return ('indexedDB' in window &&\r\n        indexedDB !== null &&\r\n        navigator.cookieEnabled &&\r\n        'serviceWorker' in navigator &&\r\n        'PushManager' in window &&\r\n        'Notification' in window &&\r\n        'fetch' in window &&\r\n        ServiceWorkerRegistration.prototype.hasOwnProperty('showNotification') &&\r\n        PushSubscription.prototype.hasOwnProperty('getKey'));\r\n}\r\n/**\r\n * Checks to see if the required APIs exist within SW Context.\r\n */\r\nfunction isSWControllerSupported() {\r\n    return ('indexedDB' in self &&\r\n        indexedDB !== null &&\r\n        'PushManager' in self &&\r\n        'Notification' in self &&\r\n        ServiceWorkerRegistration.prototype.hasOwnProperty('showNotification') &&\r\n        PushSubscription.prototype.hasOwnProperty('getKey'));\r\n}\n//# sourceMappingURL=index.cjs.js.map\n\n};"],
"names":["shadow$provide","global","require","module","exports","arrayToBase64","array","uint8Array","Uint8Array","btoa","base64String","String","fromCharCode","apply","tslib","__spread","replace","base64ToArray","padding","repeat","length","base64","rawData","atob","outputArray","i","charCodeAt","migrateOldDatabase","senderId","__awaiter","databases","dbNames","tokenDetails","db","_this","__generator","_a","label","indexedDB","sent","map","name","includes","OLD_DB_NAME","idb","openDb","OLD_DB_VERSION","objectStore","value","oldDetails","_b","oldVersion","objectStoreNames","contains","OLD_OBJECT_STORE_NAME","transaction","index","get","clear","auth","p256dh","endpoint","token","fcmToken","createTime","Date","now","subscriptionOptions","swScope","vapidKey","close","deleteDb","checkTokenDetails","getDbPromise","dbPromise","DATABASE_NAME","DATABASE_VERSION","upgradeDb","createObjectStore","OBJECT_STORE_NAME","dbGet","firebaseDependencies","key","oldTokenDetails","appConfig","appId","dbSet","tx","put","complete","dbRemove","delete","requestGetToken","headers","body","subscribeOptions","responseData","response","err_1","message","getHeaders","getBody","method","JSON","stringify","trys","push","fetch","getEndpoint","json","ERROR_FACTORY","create","errorInfo","error","requestUpdateToken","updateOptions","err_2","requestDeleteToken","unsubscribeOptions","err_3","projectId","installations","authToken","getToken","Headers","Accept","apiKey","web","DEFAULT_VAPID_KEY","applicationPubKey","swRegistration","pushSubscription","e_1","Notification","permission","getPushSubscription","scope","getKey","getNewToken","isEndpointEqual","dbOptions","isAuthEqual","isP256dhEqual","console","warn","TOKEN_EXPIRATION_MS","updateToken","deleteToken","pushManager","getSubscription","unsubscribe","updatedToken","updatedTokenDetails","e_2","__assign","subscription","subscribe","userVisibleOnly","applicationServerKey","isConsoleMessage","data","CONSOLE_CAMPAIGN_ID","sleep","ms","Promise","resolve","setTimeout","getWindowClient","url","parsedURL","clientList","clientList_1","clientList_1_1","client","parsedClientUrl","URL","self","location","href","getClientList","__values","next","done","host","e_1_1","return","call","hasVisibleClients","some","visibilityState","startsWith","clients","matchAll","type","includeUncontrolled","stripInternalFields","internalPayload","messageType","isFirebaseMessaging","getMissingValueError","valueName","isSupported","ServiceWorkerRegistration","prototype","hasOwnProperty","PushSubscription","window","navigator","cookieEnabled","component","util","firebase","_interopDefault","ex","ERROR_MAP","ErrorFactory","MessageType","SwController","bgMessageHandler","isOnBackgroundMessageUsed","addEventListener","e","waitUntil","onPush","onSubChange","onNotificationClick","Object","defineProperty","app","enumerable","configurable","setBackgroundMessageHandler","SwController.prototype.setBackgroundMessageHandler","callback","onBackgroundMessage","SwController.prototype.onBackgroundMessage","nextOrObserver","SwController.prototype.getToken","_c","registration","SwController.prototype.deleteToken","requestPermission","SwController.prototype.requestPermission","usePublicVapidKey","SwController.prototype.usePublicVapidKey","useServiceWorker","SwController.prototype.useServiceWorker","onMessage","SwController.prototype.onMessage","onTokenRefresh","SwController.prototype.onTokenRefresh","SwController.prototype.onPush","event","isNotificationShown","payload","err","debug","PUSH_RECEIVED","clientList_2","clientList_2_1","postMessage","e_2_1","notification","wrappedInternalPayload","FCM_MSG","actions","maxActions","showNotification","title","from","collapseKey","collapse_key","image","fcmOptions","link","analyticsLabel","analytics_label","SwController.prototype.onSubChange","newSubscription","SwController.prototype.onNotificationClick","action","stopImmediatePropagation","click_action","origin","openWindow","focus","NOTIFICATION_CLICKED","WindowController","onMessageCallback","serviceWorker","messageEventListener","WindowController.prototype.messageEventListener","dataPayload","assign","CONSOLE_CAMPAIGN_ANALYTICS_ENABLED","logEvent","getVapidKey","WindowController.prototype.getVapidKey","getSwReg","WindowController.prototype.getSwReg","WindowController.prototype.getToken","options","updateVapidKey","updateSwReg","serviceWorkerRegistration","WindowController.prototype.updateVapidKey","WindowController.prototype.updateSwReg","registerDefaultSw","WindowController.prototype.registerDefaultSw","register","DEFAULT_SW_PATH","DEFAULT_SW_SCOPE","update","catch","browserErrorMessage","WindowController.prototype.deleteToken","WindowController.prototype.requestPermission","permissionResult","WindowController.prototype.usePublicVapidKey","WindowController.prototype.useServiceWorker","WindowController.prototype.onMessage","WindowController.prototype.setBackgroundMessageHandler","WindowController.prototype.onBackgroundMessage","WindowController.prototype.onTokenRefresh","WindowController.prototype.logEvent","eventType","analytics","Error","analyticsProvider","message_id","message_name","CONSOLE_CAMPAIGN_NAME","message_time","CONSOLE_CAMPAIGN_TIME","message_device_time","Math","floor","NAMESPACE_EXPORTS","INTERNAL","registerComponent","Component","MESSAGING_NAME","factoryMethod","container","getProvider","getImmediate","configKeys","configKeys_1","configKeys_1_1","keyName","appName","messagingSenderId","setServiceProps"]
}
