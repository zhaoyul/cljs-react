shadow$provide.module$node_modules$$firebase$component$dist$index_cjs=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var tslib=require("module$node_modules$tslib$tslib"),util=require("module$node_modules$$firebase$util$dist$index_cjs");global=function(){function Component(name,instanceFactory,type){this.name=name;this.instanceFactory=instanceFactory;this.type=type;this.multipleInstances=!1;this.serviceProps={};this.instantiationMode="LAZY"}Component.prototype.setInstantiationMode=
function(mode){this.instantiationMode=mode;return this};Component.prototype.setMultipleInstances=function(multipleInstances){this.multipleInstances=multipleInstances;return this};Component.prototype.setServiceProps=function(props){this.serviceProps=props;return this};return Component}();var Provider=function(){function Provider(name,container){this.name=name;this.container=container;this.component=null;this.instances=new Map;this.instancesDeferred=new Map}Provider.prototype.get=function(identifier){void 0===
identifier&&(identifier="[DEFAULT]");identifier=this.normalizeInstanceIdentifier(identifier);if(!this.instancesDeferred.has(identifier)){var deferred=new util.Deferred;this.instancesDeferred.set(identifier,deferred);try{var instance=this.getOrInitializeService(identifier);instance&&deferred.resolve(instance)}catch(e){}}return this.instancesDeferred.get(identifier).promise};Provider.prototype.getImmediate=function(options){var _a=tslib.__assign({identifier:"[DEFAULT]",optional:!1},options);options=
_a.optional;_a=this.normalizeInstanceIdentifier(_a.identifier);try{var instance=this.getOrInitializeService(_a);if(!instance){if(options)return null;throw Error("Service "+this.name+" is not available");}return instance}catch(e){if(options)return null;throw e;}};Provider.prototype.getComponent=function(){return this.component};Provider.prototype.setComponent=function(component){var _a;if(component.name!==this.name)throw Error("Mismatching Component "+component.name+" for Provider "+this.name+".");
if(this.component)throw Error("Component for "+this.name+" has already been provided");this.component=component;if("EAGER"===component.instantiationMode)try{this.getOrInitializeService("[DEFAULT]")}catch(e){}try{for(var _b=tslib.__values(this.instancesDeferred.entries()),_c=_b.next();!_c.done;_c=_b.next()){var _d=tslib.__read(_c.value,2),instanceDeferred=_d[1],normalizedIdentifier=this.normalizeInstanceIdentifier(_d[0]);try{var instance=this.getOrInitializeService(normalizedIdentifier);instanceDeferred.resolve(instance)}catch(e$7){}}}catch(e_1_1){var e_1=
{error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error;}}};Provider.prototype.clearInstance=function(identifier){void 0===identifier&&(identifier="[DEFAULT]");this.instancesDeferred.delete(identifier);this.instances.delete(identifier)};Provider.prototype.delete=function(){return tslib.__awaiter(this,void 0,void 0,function(){var services;return tslib.__generator(this,function(_a){switch(_a.label){case 0:return services=Array.from(this.instances.values()),
[4,Promise.all(services.filter(function(service){return"INTERNAL"in service}).map(function(service){return service.INTERNAL.delete()}))];case 1:return _a.sent(),[2]}})})};Provider.prototype.isComponentSet=function(){return null!=this.component};Provider.prototype.getOrInitializeService=function(identifier){var instance=this.instances.get(identifier);!instance&&this.component&&(instance=this.component.instanceFactory(this.container,"[DEFAULT]"===identifier?void 0:identifier),this.instances.set(identifier,
instance));return instance||null};Provider.prototype.normalizeInstanceIdentifier=function(identifier){return this.component?this.component.multipleInstances?identifier:"[DEFAULT]":identifier};return Provider}();require=function(){function ComponentContainer(name){this.name=name;this.providers=new Map}ComponentContainer.prototype.addComponent=function(component){var provider=this.getProvider(component.name);if(provider.isComponentSet())throw Error("Component "+component.name+" has already been registered with "+
this.name);provider.setComponent(component)};ComponentContainer.prototype.addOrOverwriteComponent=function(component){this.getProvider(component.name).isComponentSet()&&this.providers.delete(component.name);this.addComponent(component)};ComponentContainer.prototype.getProvider=function(name){if(this.providers.has(name))return this.providers.get(name);var provider=new Provider(name,this);this.providers.set(name,provider);return provider};ComponentContainer.prototype.getProviders=function(){return Array.from(this.providers.values())};
return ComponentContainer}();exports.Component=global;exports.ComponentContainer=require;exports.Provider=Provider}
//# sourceMappingURL=module$node_modules$$firebase$component$dist$index_cjs.js.map
